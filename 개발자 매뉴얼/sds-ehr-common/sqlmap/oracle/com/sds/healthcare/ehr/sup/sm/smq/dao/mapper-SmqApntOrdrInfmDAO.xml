<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    SQL File Name : mapper_SmqApntOrdrInfmDAO_sql.xml 
    Description :                                      예약처방을 조회 하기위한 컴영역
                  -->
<mapper namespace="SmqApntOrdrInfmDAO">


	<resultMap id="com-sds-healistApntOrdrInfmthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-listApntOrdrInfm-result" type="com.sds.healthcare.ehr.sup.sm.smq.vo.SmqApntOrdrInfmDVO">
	
	</resultMap>
	
    <!--
        SQL Name : com-sds-healistApntOrdrInfmthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-listApntOrdrInfm () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.sup.sm.smq.vo.SmqApntOrdrInfmDVO
		resultMap : com-sds-healistApntOrdrInfmthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-listApntOrdrInfm-result
    -->
	<select id="com-sds-healistApntOrdrInfmthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-listApntOrdrInfm"  parameterType="com.sds.healthcare.ehr.sup.sm.smq.vo.SmqApntOrdrInfmDVO"  resultMap="com-sds-healistApntOrdrInfmthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-listApntOrdrInfm-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healistApntOrdrInfmthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-listApntOrdrInfm */
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-selectOneApntOrdrInfm-result" type="com.sds.healthcare.ehr.sup.sm.smq.vo.SmqApntOrdrInfmDVO">
	
		<result property="apntNo" column="APNT_NO"/>
		<result property="hlscSno" column="HLSC_SNO"/>
		<result property="prvlOrdrSno" column="PRVL_ORDR_SNO"/>
		<result property="pckgExmnCd" column="PCKG_EXMN_CD"/>
		<result property="hlscOrdvCd" column="HLSC_ORDV_CD"/>
		<result property="prvlOrdrSttsCd" column="PRVL_ORDR_STTS_CD"/>
		<result property="prvlOrdrSttsMdfcDt" column="PRVL_ORDR_STTS_MDFC_DT"/>
		<result property="prvlOrdrSttsMdfrId" column="PRVL_ORDR_STTS_MDFR_ID"/>
		<result property="cnclYn" column="CNCL_YN"/>
		<result property="cncrId" column="CNCR_ID"/>
		<result property="cnclIp" column="CNCL_IP"/>
		<result property="cnclDt" column="CNCL_DT"/>
		<result property="ptno" column="PTNO"/>
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="ordrSno" column="ORDR_SNO"/>
		<result property="exmnDvsnCd" column="EXMN_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="eximPrrnYmd" column="EXIM_PRRN_YMD"/>
		<result property="latrExmnYn" column="LATR_EXMN_YN"/>
		<result property="befrApntNo" column="BEFR_APNT_NO"/>
		<result property="befrHlscSno" column="BEFR_HLSC_SNO"/>
		<result property="befrPrvlOrdrSno" column="BEFR_PRVL_ORDR_SNO"/>
		<result property="userSetCd" column="USER_SET_CD"/>
		<result property="rernSno" column="RERN_SNO"/>
		<result property="exmnIpprHm" column="EXMN_IPPR_HM"/>
		<result property="hslcDvsnCd" column="HSLC_DVSN_CD"/>
		<result property="ampmDvsnCd" column="AMPM_DVSN_CD"/>
		<result property="rernDvsnCd" column="RERN_DVSN_CD"/>
		<result property="rgstPrsgYmd" column="RGST_PRSG_YMD"/>
		<result property="mterTxorSno" column="MTER_TXOR_SNO"/>
		<result property="endsHgrsGropYn" column="ENDS_HGRS_GROP_YN"/>
		<result property="hlscExrmCd" column="HLSC_EXRM_CD"/>
		<result property="hlscImplExrmCd" column="HLSC_IMPL_EXRM_CD"/>
		<result property="eximDt" column="EXIM_DT"/>
		<result property="exmnImptId" column="EXMN_IMPT_ID"/>
		<result property="pacsAccsNo" column="PACS_ACCS_NO"/>
		<result property="rsrvYn" column="RSRV_YN"/>
		<result property="cnclBassHlscSno" column="CNCL_BASS_HLSC_SNO"/>
		<result property="dplcAlwnSno" column="DPLC_ALWN_SNO"/>
		<result property="ordrShrnYn" column="ORDR_SHRN_YN"/>
		<result property="adtnBassHlscSno" column="ADTN_BASS_HLSC_SNO"/>
		<result property="hlscClsfCd" column="HLSC_CLSF_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-selectOneApntOrdrInfm () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.sup.sm.smq.vo.SmqApntOrdrInfmDVO
		resultMap : com-sds-healthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-selectOneApntOrdrInfm-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-selectOneApntOrdrInfm"  parameterType="com.sds.healthcare.ehr.sup.sm.smq.vo.SmqApntOrdrInfmDVO"  resultMap="com-sds-healthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-selectOneApntOrdrInfm-result" useCache="true" flushCache="false">
		select /*SQL_ID: com-sds-healthcare-ehr-sup-sm-smq-dao-SmqApntOrdrInfmDAO-selectOneApntOrdrInfm */
		       a.APNT_NO as APNT_NO
		     , a.HLSC_SNO as HLSC_SNO
		     , a.PRVL_ORDR_SNO as PRVL_ORDR_SNO
		     , a.PCKG_EXMN_CD as PCKG_EXMN_CD
		     , a.HLSC_ORDV_CD as HLSC_ORDV_CD
		     , a.PRVL_ORDR_STTS_CD as PRVL_ORDR_STTS_CD
		     , to_char(a.PRVL_ORDR_STTS_MDFC_DT, 'yyyymmddhh24miss') as PRVL_ORDR_STTS_MDFC_DT
		     , a.PRVL_ORDR_STTS_MDFR_ID as PRVL_ORDR_STTS_MDFR_ID
		     , a.CNCL_YN as CNCL_YN
		     , a.CNCR_ID as CNCR_ID
		     , a.CNCL_IP as CNCL_IP
		     , to_char(a.CNCL_DT, 'yyyymmddhh24miss') as CNCL_DT
		     , a.PTNO as PTNO
		     , to_char(a.ORDR_YMD, 'yyyymmdd') as ORDR_YMD
		     , a.ORDR_SNO as ORDR_SNO
		     , a.EXMN_DVSN_CD as EXMN_DVSN_CD
		     , a.ORDR_CD as ORDR_CD
		     , to_char(a.EXIM_PRRN_YMD, 'yyyymmdd') as EXIM_PRRN_YMD
		     , a.LATR_EXMN_YN as LATR_EXMN_YN
		     , a.BEFR_APNT_NO as BEFR_APNT_NO
		     , a.BEFR_HLSC_SNO as BEFR_HLSC_SNO
		     , a.BEFR_PRVL_ORDR_SNO as BEFR_PRVL_ORDR_SNO
		     , a.USER_SET_CD as USER_SET_CD
		     , a.RERN_SNO as RERN_SNO
		     , a.EXMN_IPPR_HM as EXMN_IPPR_HM
		     , a.HSLC_DVSN_CD as HSLC_DVSN_CD
		     , a.AMPM_DVSN_CD as AMPM_DVSN_CD
		     , a.RERN_DVSN_CD as RERN_DVSN_CD
		     , to_char(a.RGST_PRSG_YMD, 'yyyymmdd') as RGST_PRSG_YMD
		     , a.MTER_TXOR_SNO as MTER_TXOR_SNO
		     , a.ENDS_HGRS_GROP_YN as ENDS_HGRS_GROP_YN
		     , a.HLSC_EXRM_CD as HLSC_EXRM_CD
		     , a.HLSC_IMPL_EXRM_CD as HLSC_IMPL_EXRM_CD
		     , to_char(a.EXIM_DT, 'yyyymmddhh24miss') as EXIM_DT
		     , a.EXMN_IMPT_ID as EXMN_IMPT_ID
		     , a.PACS_ACCS_NO as PACS_ACCS_NO
		     , a.RSRV_YN as RSRV_YN
		     , a.CNCL_BASS_HLSC_SNO as CNCL_BASS_HLSC_SNO
		     , a.DPLC_ALWN_SNO as DPLC_ALWN_SNO
		     , a.ORDR_SHRN_YN as ORDR_SHRN_YN
		     , a.ADTN_BASS_HLSC_SNO as ADTN_BASS_HLSC_SNO
		     , b.HLSC_CLSF_CD as HLSC_CLSF_CD
		  from smarsordt a
		     , smarsmast b
		 where 1 = 1
		<choose>
		    <when test='afiPrsgNm == "ptno_ordrYmd_ordrSno"'>
		    <!-- #{afiPrsgNm} -->
		   and a.ptno = #{ptno}
		   and a.ordr_ymd = to_date(#{ordrYmd}, 'yyyyMMdd')
		   and a.ordr_sno = #{ordrSno}
		    </when>
		    <otherwise>
		   and a.APNT_NO = #{apntNo}
		   and a.HLSC_SNO = #{hlscSno}
		   and a.PRVL_ORDR_SNO = #{prvlOrdrSno}
		    </otherwise>
		</choose>   
		   and b.apnt_no = a.apnt_no
	</select>



</mapper>