<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    SQL File Name : mapper_MdpOrdrOrdrFeeMngmDAO_sql.xml 
    Description : -->
<mapper namespace="MdpOrdrOrdrFeeMngmDAO">


	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrOrdrFeeMngmDual-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO">
	
		<result property="orocCd" column="OROC_CD"/>
		<result property="ptptCd" column="PTPT_CD"/>
		<result property="frstIpdvCd" column="FRST_IPDV_CD"/>
		<result property="pacsInrfYn" column="PACS_INRF_YN"/>
		<result property="pacsCd" column="PACS_CD"/>
		<result property="afiCrtfOrdvVl" column="AFI_CRTF_ORDV_VL"/>
		<result property="afiRulIdVl" column="AFI_RUL_ID_VL"/>
		<result property="afiRulRspnVl" column="AFI_RUL_RSPN_VL"/>
		<result property="afiRdctInfmCnfrYn" column="AFI_RDCT_INFM_CNFR_YN"/>
		<result property="afiTmprOrdrSno" column="AFI_TMPR_ORDR_SNO"/>
		<result property="afiAditMcdpDvsnNm" column="AFI_ADIT_MCDP_DVSN_NM"/>
		<result property="afiOrglOrdrDcDvsnCd" column="AFI_ORGL_ORDR_DC_DVSN_CD"/>
		<result property="inftDprtCd" column="INFT_DPRT_CD"/>
		<result property="enfrPrrnYmd1" column="ENFR_PRRN_YMD_1"/>
		<result property="cmtxDvsnCd" column="CMTX_DVSN_CD"/>
		<result property="wntdDrMcdpCd" column="WNTD_DR_MCDP_CD"/>
		<result property="cmtxRefrYmd" column="CMTX_REFR_YMD"/>
		<result property="cmtxRefrSno" column="CMTX_REFR_SNO"/>
		<result property="orreExstYn" column="ORRE_EXST_YN"/>
		<result property="oprtMdfeCdYn" column="OPRT_MDFE_CD_YN"/>
		<result property="oprtInfmItdvCd" column="OPRT_INFM_ITDV_CD"/>
		<result property="ordrInrfClotYn" column="ORDR_INRF_CLOT_YN"/>
		<result property="mdfeDfntSno" column="MDFE_DFNT_SNO"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrOrdrFeeMngmDual (DVO Parameter를 유지하기 위한 DUAL SELECT) 
        Description :                                           DVO Parameter 를 유지하기 위한 DUAL SELECT
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrOrdrFeeMngmDual-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrOrdrFeeMngmDual"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrOrdrFeeMngmDual-result" useCache="true" flushCache="false">
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrOrdrFeeMngmDual */ 
		       '' AS OROC_CD
		     , '' AS PTPT_CD
		     , '' AS FRST_IPDV_CD
		     , '' AS PACS_INRF_YN
		     , '' AS PACS_CD
		     , '' AS AFI_CRTF_ORDV_VL
		     , '' AS AFI_RUL_ID_VL
		     , '' AS AFI_RUL_RSPN_VL
		     , '' AS AFI_RDCT_INFM_CNFR_YN
		     , 0 AS AFI_TMPR_ORDR_SNO
		     , '' AS AFI_ADIT_MCDP_DVSN_NM
		     , '' AS AFI_ORGL_ORDR_DC_DVSN_CD
		     , '' AS INFT_DPRT_CD
		     , '' AS ENFR_PRRN_YMD_1
		     , '' AS CMTX_DVSN_CD
		     , '' AS WNTD_DR_MCDP_CD
		     , '' AS CMTX_REFR_YMD
		     , 0 AS CMTX_REFR_SNO
		     , '' as ORRE_EXST_YN	/* 처방사유존재여부 */
		     , '' as OPRT_MDFE_CD_YN
		     , '' as OPRT_INFM_ITDV_CD
		     , '' as ORDR_INRF_CLOT_YN /* 처방인터페이스호출여부 */   
		     , 0  as MDFE_DFNT_SNO /* 수가확정일련번호 : NST 수가확정에 사용 */
		from dual
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrSno-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO">
	
		<result property="ordrSno" column="ORDR_SNO"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrSno (처방료 처방 Sequence 조회) 
        Description :                                           처방료 처방 처방일련번호에 사용되는 sequence를 조회한다.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrSno-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrSno"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrSno-result" useCache="true" flushCache="false">
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrSno */
			      MDTRTORDTQ.nextval as ORDR_SNO
		 from  dual
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrAtmtRtrnTrgt-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO">
	
		<result property="mdfeCd" column="MDFE_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrAtmtRtrnTrgt (처방료 처방 자동반납 대상 처방 조회) 
        Description :                                           처방료 처방 자동반납 대상 처방을 조회한다.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrAtmtRtrnTrgt-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrAtmtRtrnTrgt"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrAtmtRtrnTrgt-result" useCache="true" flushCache="false">
		 select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneOrdrFeeOrdrAtmtRtrnTrgt */
		           b.mdfe_cd as MDFE_CD
		  from  MDTRTORDT a
		        ,  AIMFMDFET b
		where  a.PTNO = #{ptno}
		   and  a.ORDR_YMD = to_date ( #{ordrYmd}, 'YYYYMMDD' )
		   and  a.ORDR_SNO = #{ordrSno}
		   and  a.ORDR_CD = b.MDFE_CD
		   and  b.MDAC_CLSF_CD = '09'
		   and  b.MDCF_CD in ('OP1', 'BR1')
		   and  a.ORDR_YMD between b.APST_YMD and b.APFN_YMD
		   and  rownum = 1
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-listPtntOrdrFeeOrdrList-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ptno" column="PTNO"/>
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="ordrSno" column="ORDR_SNO"/>
		<result property="mdrpNo" column="MDRP_NO"/>
		<result property="ptadMdrpNo" column="PTAD_MDRP_NO"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="mcdpCd" column="MCDP_CD"/>
		<result property="oddrId" column="ODDR_ID"/>
		<result property="chdrId" column="CHDR_ID"/>
		<result property="gndrId" column="GNDR_ID"/>
		<result property="codvCd" column="CODV_CD"/>
		<result property="ptadCodvCd" column="PTAD_CODV_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="odkiCd" column="ODKI_CD"/>
		<result property="odkiDetlCd" column="ODKI_DETL_CD"/>
		<result property="orfrCd" column="ORFR_CD"/>
		<result property="hslcDvsnCd" column="HSLC_DVSN_CD"/>
		<result property="mccnCd" column="MCCN_CD"/>
		<result property="wardCd" column="WARD_CD"/>
		<result property="orocDprtCd" column="OROC_DPRT_CD"/>
		<result property="frnsDprtCd" column="FRNS_DPRT_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="careSttsCd" column="CARE_STTS_CD"/>
		<result property="rtrnSttsCd" column="RTRN_STTS_CD"/>
		<result property="rtrnRqstDt" column="RTRN_RQST_DT"/>
		<result property="rtrnRqprId" column="RTRN_RQPR_ID"/>
		<result property="adtnOrdvCd" column="ADTN_ORDV_CD"/>
		<result property="rgorFndrId" column="RGOR_FNDR_ID"/>
		<result property="rgorFinsDt" column="RGOR_FINS_DT"/>
		<result property="orcnNursId" column="ORCN_NURS_ID"/>
		<result property="orcnDt" column="ORCN_DT"/>
		<result property="tmprOrdrYn" column="TMPR_ORDR_YN"/>
		<result property="dcDvsnCd" column="DC_DVSN_CD"/>
		<result property="dcOddrId" column="DC_ODDR_ID"/>
		<result property="dcOrdrDt" column="DC_ORDR_DT"/>
		<result property="dcCnnuId" column="DC_CNNU_ID"/>
		<result property="dcCnfrDt" column="DC_CNFR_DT"/>
		<result property="sortSqnc" column="SORT_SQNC"/>
		<result property="ordrUnslCtn" column="ORDR_UNSL_CTN"/>
		<result property="inptUserDvsnCd" column="INPT_USER_DVSN_CD"/>
		<result property="crtfDvsnCd" column="CRTF_DVSN_CD"/>
		<result property="athnId" column="ATHN_ID"/>
		<result property="crtfIp" column="CRTF_IP"/>
		<result property="crtfDt" column="CRTF_DT"/>
		<result property="clrsPrjcCd" column="CLRS_PRJC_CD"/>
		<result property="clrsPrjcDrId" column="CLRS_PRJC_DR_ID"/>
		<result property="oprtYmd" column="OPRT_YMD"/>
		<result property="oprtSno" column="OPRT_SNO"/>
		<result property="itrnBsdvCd" column="ITRN_BSDV_CD"/>
		<result property="srrqCmntCtn" column="SRRQ_CMNT_CTN"/>
		<result property="oprmCd" column="OPRM_CD"/>
		<result property="ordrIpdvCd" column="ORDR_IPDV_CD"/>
		<result property="ptadIpdvCd" column="PTAD_IPDV_CD"/>
		<result property="istyCd" column="ISTY_CD"/>
		<result property="istyAsstCd" column="ISTY_ASST_CD"/>
		<result property="cnplCd" column="CNPL_CD"/>
		<result property="ptadClamYmd" column="PTAD_CLAM_YMD"/>
		<result property="ptadClbaYmd" column="PTAD_CLBA_YMD"/>
		<result property="rcstCd" column="RCST_CD"/>
		<result property="rpntId" column="RPNT_ID"/>
		<result property="rcpcDt" column="RCPC_DT"/>
		<result property="viaAdmsRcstCd" column="VIA_ADMS_RCST_CD"/>
		<result property="implYmd" column="IMPL_YMD"/>
		<result property="abcEnfrYmd" column="ABC_ENFR_YMD"/>
		<result property="abcMcdpCd" column="ABC_MCDP_CD"/>
		<result property="abcEfdpCd" column="ABC_EFDP_CD"/>
		<result property="abcOddrId" column="ABC_ODDR_ID"/>
		<result property="abcEndrId" column="ABC_ENDR_ID"/>
		<result property="vatTrgtYn" column="VAT_TRGT_YN"/>
		<result property="cnntOrdrBndlNo" column="CNNT_ORDR_BNDL_NO"/>
		<result property="ordrValdStrtYmd" column="ORDR_VALD_STRT_YMD"/>
		<result property="ordrValdFnshYmd" column="ORDR_VALD_FNSH_YMD"/>
		<result property="implOrdrPblcNtm" column="IMPL_ORDR_PBLC_NTM"/>
		<result property="implOrdrPblcLmttNtm" column="IMPL_ORDR_PBLC_LMTT_NTM"/>
		<result property="orglOrdrYmd" column="ORGL_ORDR_YMD"/>
		<result property="orglOrdrSno" column="ORGL_ORDR_SNO"/>
		<result property="opsrId1" column="OPSR_ID_1"/>
		<result property="opsrNm1" column="OPSR_NM_1"/>
		<result property="opsrRa1" column="OPSR_RA_1"/>
		<result property="opsrId2" column="OPSR_ID_2"/>
		<result property="opsrNm2" column="OPSR_NM_2"/>
		<result property="opsrRa2" column="OPSR_RA_2"/>
		<result property="opsrId3" column="OPSR_ID_3"/>
		<result property="opsrNm3" column="OPSR_NM_3"/>
		<result property="opsrRa3" column="OPSR_RA_3"/>
		<result property="anshId" column="ANSH_ID"/>
		<result property="anshNm" column="ANSH_NM"/>
		<result property="cpdrId" column="CPDR_ID"/>
		<result property="endrId" column="ENDR_ID"/>
		<result property="endrNm" column="ENDR_NM"/>
		<result property="ordrLcdvCd" column="ORDR_LCDV_CD"/>
		<result property="oprtAditRt" column="OPRT_ADIT_RT"/>
		<result property="orglNtm" column="ORGL_NTM"/>
		<result property="ordrNtmQty" column="ORDR_NTM_QTY"/>
		<result property="anstO2AdmnMi" column="ANST_O2_ADMN_MI"/>
		<result property="anstStrtDt" column="ANST_STRT_DT"/>
		<result property="anstFnshDt" column="ANST_FNSH_DT"/>
		<result property="enfrPrrnYmd" column="ENFR_PRRN_YMD"/>
		<result property="mainOpdvCd" column="MAIN_OPDV_CD"/>
		<result property="reOpdvCd" column="RE_OPDV_CD"/>
		<result property="erOrfrCd" column="ER_ORFR_CD"/>
		<result property="dadvCd" column="DADV_CD"/>
		<result property="actnMterDvsnCd" column="ACTN_MTER_DVSN_CD"/>
		<result property="hgrsAnstDvsnCd" column="HGRS_ANST_DVSN_CD"/>
		<result property="afiHgrsAnstDvsnNm" column="AFI_HGRS_ANST_DVSN_NM"/>
		<result property="upltRwttVl" column="UPLT_RWTT_VL"/>
		<result property="uprgRwttVl" column="UPRG_RWTT_VL"/>
		<result property="lwlfRwttVl" column="LWLF_RWTT_VL"/>
		<result property="lwrgRwttVl" column="LWRG_RWTT_VL"/>
		<result property="actnNtm" column="ACTN_NTM"/>
		<result property="rtrnCqy" column="RTRN_CQY"/>
		<result property="wrlsPrinYn" column="WRLS_PRIN_YN"/>
		<result property="ntrtCnslOpnnCtn" column="NTRT_CNSL_OPNN_CTN"/>
		<result property="pacsTrdvCd" column="PACS_TRDV_CD"/>
		<result property="pacsAccsNo" column="PACS_ACCS_NO"/>
		<result property="pacsTrnmDt" column="PACS_TRNM_DT"/>
		<result property="pacsTrnmSttsCd" column="PACS_TRNM_STTS_CD"/>
		<result property="indrId1" column="INDR_ID_1"/>
		<result property="indrId3" column="INDR_ID_3"/>
		<result property="intrDt" column="INTR_DT"/>
		<result property="rprtDt" column="RPRT_DT"/>
		<result property="exrmRptnDt" column="EXRM_RPTN_DT"/>
		<result property="enfrDt" column="ENFR_DT"/>
		<result property="orcnEdctDrId" column="ORCN_EDCT_DR_ID"/>
		<result property="orcnDttnId" column="ORCN_DTTN_ID"/>
		<result property="dlysRcrdCtn" column="DLYS_RCRD_CTN"/>
		<result property="znlrRscnDvsnCd" column="ZNLR_RSCN_DVSN_CD"/>
		<result property="imlnOrdrYn" column="IMLN_ORDR_YN"/>
		<result property="sspcScinNm" column="SSPC_SCIN_NM"/>
		<result property="ordrCrtnDvsnCd" column="ORDR_CRTN_DVSN_CD"/>
		<result property="ordrCrtnLnknNo" column="ORDR_CRTN_LNKN_NO"/>
		<result property="sporBndlNm" column="SPOR_BNDL_NM"/>
		<result property="sporBndlNo" column="SPOR_BNDL_NO"/>
		<result property="frstRgsrId" column="FRST_RGSR_ID"/>
		<result property="frstRgstIp" column="FRST_RGST_IP"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="insrIpdvCd" column="INSR_IPDV_CD"/>
		<result property="prtcIpdvCd" column="PRTC_IPDV_CD"/>
		<result property="incsIpdvCd" column="INCS_IPDV_CD"/>
		<result property="tainIpdvCd" column="TAIN_IPDV_CD"/>
		<result property="mdfeItdvCd" column="MDFE_ITDV_CD"/>
		<result property="dxObjcUltsYn" column="DX_OBJC_ULTS_YN"/>
		<result property="ultsClsfCd" column="ULTS_CLSF_CD"/>
		<result property="insrEdiCd" column="INSR_EDI_CD"/>
		<result property="inpyOrreCtn" column="INPY_ORRE_CTN"/>
		<result property="doppExmnYn" column="DOPP_EXMN_YN"/>
		<result property="mltiFetlCnt" column="MLTI_FETL_CNT"/>
		<result property="hgrsPtrtYn" column="HGRS_PTRT_YN"/>
		<result property="hgrsPtrtResnCd" column="HGRS_PTRT_RESN_CD"/>
		<result property="hgrsPtrtAditRt" column="HGRS_PTRT_ADIT_RT"/>
		<result property="ogdpMnhtAditRt" column="OGDP_MNHT_ADIT_RT"/>
		<result property="nghtAditRt" column="NGHT_ADIT_RT"/>
		<result property="cisInrfYn" column="CIS_INRF_YN"/>
		<result property="erMcteAddvCd" column="ER_MCTE_ADDV_CD"/>
		<result property="erMcteAditYn" column="ER_MCTE_ADIT_YN"/>
		<result property="fdnoClclOrdrYn" column="FDNO_CLCL_ORDR_YN"/>
		<result property="oprtMdfeCdYn" column="OPRT_MDFE_CD_YN"/>
		<result property="oprtInfmItdvCd" column="OPRT_INFM_ITDV_CD"/>
		<result property="opsiDvsnCd" column="OPSI_DVSN_CD"/>
		<result property="insrAcknBaseCeckYn" column="INSR_ACKN_BASE_CECK_YN"/>
		<result property="cprsRt" column="CPRS_RT"/>
		<result property="subTypeCd" column="SUB_TYPE_CD"/>
		<result property="crnfSutrYn" column="CRNF_SUTR_YN"/>
		<result property="scrgInpyOnbrRt" column="SCRG_INPY_ONBR_RT"/>
		<result property="cnsnRltdYn" column="CNSN_RLTD_YN"/>
		<result property="cnsnRltdMcdpCd" column="CNSN_RLTD_MCDP_CD"/>
		<result property="ppabCnsrOprsCd" column="PPAB_CNSR_OPRS_CD"/>
		<result property="prepOrdrYn" column="PREP_ORDR_YN"/>
		<result property="cscrCd" column="CSCR_CD"/>
		<result property="klgrCd" column="KLGR_CD"/>
		<result property="klgrCtn" column="KLGR_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-listPtntOrdrFeeOrdrList (환자의 처방료 처방 정보 조회) 
        Description :                                           환자의 처방료 처방 정보를 조회한다.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-listPtntOrdrFeeOrdrList-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-listPtntOrdrFeeOrdrList"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-listPtntOrdrFeeOrdrList-result" useCache="true" flushCache="false">
			 		<![CDATA[			 
					   SELECT  /*+ SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntOrdrInqrDAO-listPtntOrdrFeeOrdrList_처치 처방 조회*/
							  'S'  as SAVE_DVSN_CD
							,  a.PTNO as PTNO                                              /* 환자번호*/
							 ,  to_char ( a.ORDR_YMD, 'YYYYMMDD') as ORDR_YMD                  /* 처방일자*/
							,  a.ORDR_SNO as ORDR_SNO                                          /* 처방일련번호*/
							,  a.MDRP_NO as MDRP_NO                                           /* 진료접수번호*/
							,  a.PTAD_MDRP_NO as PTAD_MDRP_NO                                      /* 원무진료접수번호*/
							,  a.ORDR_CD as ORDR_CD                                           /* 처방코드*/
							,  a.MCDP_CD as MCDP_CD                                           /* 진료과코드*/
							,  a.ODDR_ID as ODDR_ID                                           /* 처방의사ID*/
							,  a.CHDR_ID as CHDR_ID                                           /* 지정의사ID*/
							,  a.GNDR_ID as GNDR_ID                                           /* 주치의사ID*/
							,  a.CODV_CD as CODV_CD                                           /* 내원구분코드*/
							,  a.PTAD_CODV_CD as PTAD_CODV_CD                                      /* 원무내원구분코드*/
							,  a.ORDR_CLTY_CD as ORDR_CLTY_CD                                      /* 처방분류유형코드*/
							,  a.ORCL_CD as ORCL_CD                                           /* 처방분류코드*/
							,  a.ODKI_CD as ODKI_CD                                           /* 처방종류코드*/
							,  a.ODKI_DETL_CD as ODKI_DETL_CD                                      /* 처방종류상세코드*/
							,  a.ORFR_CD as ORFR_CD                                           /* 처방형태코드*/
							,  a.HSLC_DVSN_CD as HSLC_DVSN_CD                                      /* 위치구분코드*/
							,  a.MCCN_CD as MCCN_CD                                           /* 진료센터코드*/
							,  a.WARD_CD as WARD_CD                                           /* 병동코드*/
							,  a.OROC_DPRT_CD as OROC_DPRT_CD                                           /* 처방발생원코드*/
							,  a.FRNS_DPRT_CD as FRNS_DPRT_CD                                      /* 불출부서코드*/
							,  a.SLIP_CD as SLIP_CD                                           /* SLIP코드*/
							,  a.CARE_STTS_CD as CARE_STTS_CD                                      /* 간호상태코드*/
							,  a.RTRN_STTS_CD as RTRN_STTS_CD                                      /* 반납상태코드*/
							 ,  to_char ( a.RTRN_RQST_DT, 'YYYYMMDDhh24miss') as RTRN_RQST_DT      /* 반납요청일시*/
							,  a.RTRN_RQPR_ID as RTRN_RQPR_ID                                      /* 반납요청자ID*/
							,  a.ADTN_ORDV_CD as ADTN_ORDV_CD                                      /* 추가처방구분코드*/
							,  a.RGOR_FNDR_ID as RGOR_FNDR_ID                                      /* 정규처방완료의사ID*/
							 ,  to_char ( a.RGOR_FINS_DT, 'YYYYMMDDhh24miss') as RGOR_FINS_DT      /* 정규처방완료일시*/
							,  a.ORCN_NURS_ID as ORCN_NURS_ID                                      /* 처방확인간호사ID*/
							 ,  to_char ( a.ORCN_DT, 'YYYYMMDDhh24miss') as ORCN_DT           /* 처방확인일시*/
							,  a.TMPR_ORDR_YN as TMPR_ORDR_YN                                      /* 임시처방여부*/
							,  a.DC_DVSN_CD as DC_DVSN_CD                                        /* DC구분코드*/
							,  a.DC_ODDR_ID as DC_ODDR_ID                                        /* DC처방의사ID*/
							 ,  to_char ( a.DC_ORDR_DT, 'YYYYMMDDhh24miss') as DC_ORDR_DT        /* DC처방일시*/
							,  a.DC_CNNU_ID as DC_CNNU_ID                                        /* DC확인간호사ID*/
							 ,  to_char ( a.DC_CNFR_DT, 'YYYYMMDDhh24miss') as DC_CNFR_DT        /* DC확인일시*/
							,  a.SORT_SQNC as SORT_SQNC                                         /* 정렬순서*/
							,  a.ORDR_UNSL_CTN as ORDR_UNSL_CTN                                     /* 처방특이내용*/
							,  a.INPT_USER_DVSN_CD as INPT_USER_DVSN_CD                                 /* 입력사용자구분코드*/
							,  a.CRTF_DVSN_CD as CRTF_DVSN_CD                                      /* 인증구분코드*/
							,  a.ATHN_ID as ATHN_ID                                           /* 인증자ID*/
							,  a.CRTF_IP as CRTF_IP                                           /* 인증IP*/
							 ,  to_char ( a.CRTF_DT, 'YYYYMMDDhh24miss') as CRTF_DT           /* 인증일시*/
							,  a.CLRS_PRJC_CD as CLRS_PRJC_CD                                      /* 임상연구과제코드*/
							,  a.CLRS_PRJC_DR_ID as CLRS_PRJC_DR_ID                                   /* 임상연구과제의사ID*/
							 ,  to_char ( a.OPRT_YMD, 'YYYYMMDD') as OPRT_YMD                  /* 수술일자*/
							,  a.OPRT_SNO as OPRT_SNO                                          /* 수술일련번호*/
							,  a.ITRN_BSDV_CD as ITRN_BSDV_CD                                      /* 인턴업무구분코드*/
							,  a.SRRQ_CMNT_CTN as SRRQ_CMNT_CTN                                     /* SR커멘트내용*/
							,  a.OPRM_CD as OPRM_CD                                           /* 수술실코드*/
							,  a.ORDR_IPDV_CD as ORDR_IPDV_CD                                      /* 처방급여구분코드*/
							,  a.PTAD_IPDV_CD as PTAD_IPDV_CD                                      /* 원무급여구분코드*/
							,  a.ISTY_CD as ISTY_CD                                           /* 보험유형코드*/
							,  a.ISTY_ASST_CD as ISTY_ASST_CD                                      /* 보험유형보조코드*/
							,  a.CNPL_CD as CNPL_CD                                           /* 계약처코드*/
							 ,  to_char ( a.PTAD_CLAM_YMD, 'YYYYMMDD') as PTAD_CLAM_YMD             /* 원무청구일자*/
							 ,  to_char ( a.PTAD_CLBA_YMD, 'YYYYMMDDhh24miss') as PTAD_CLBA_YMD     /* 원무계산기준일자*/
							,  a.RCST_CD as RCST_CD                                           /* 수납상태코드*/
							,  a.RPNT_ID as RPNT_ID                                           /* 수납자ID*/
							 ,  to_char ( a.RCPC_DT, 'YYYYMMDDhh24miss') as RCPC_DT           /* 수납일시*/
							,  a.VIA_ADMS_RCST_CD as VIA_ADMS_RCST_CD                                  /* 경유입원수납상태코드*/
							 ,  to_char ( a.IMPL_YMD, 'YYYYMMDD') as IMPL_YMD                  /* 실시일자*/
							 ,  to_char ( a.ABC_ENFR_YMD, 'YYYYMMDD') as ABC_ENFR_YMD              /* ABC시행일자*/
							,  a.ABC_MCDP_CD as ABC_MCDP_CD                                       /* ABC진료과코드*/
							,  a.ABC_EFDP_CD as ABC_EFDP_CD                                       /* ABC시행부서코드*/
							,  a.ABC_ODDR_ID as ABC_ODDR_ID                                       /* ABC처방의사ID*/
							,  a.ABC_ENDR_ID as ABC_ENDR_ID                                       /* ABC시행의사ID*/
							,  a.VAT_TRGT_YN as VAT_TRGT_YN                                       /* 부가세대상여부*/
							,  a.CNNT_ORDR_BNDL_NO as CNNT_ORDR_BNDL_NO                                 /* 동시처방묶음번호*/
							 ,  to_char ( a.ORDR_VALD_STRT_YMD, 'YYYYMMDD') as ORDR_VALD_STRT_YMD        /* 처방유효시작일자*/
							 ,  to_char ( a.ORDR_VALD_FNSH_YMD, 'YYYYMMDD') as ORDR_VALD_FNSH_YMD        /* 처방유효종료일자*/
							,  a.IMPL_ORDR_PBLC_NTM as IMPL_ORDR_PBLC_NTM                                /* 실시처방발행횟수*/
							,  a.IMPL_ORDR_PBLC_LMTT_NTM as IMPL_ORDR_PBLC_LMTT_NTM                           /* 실시처방발행제한횟수*/
							 ,  to_char ( a.ORGL_ORDR_YMD, 'YYYYMMDD') as ORGL_ORDR_YMD             /* 원처방일자*/
							,  a.ORGL_ORDR_SNO as ORGL_ORDR_SNO                                     /* 원처방일련번호*/
							,  a.OPSR_ID1 as OPSR_ID_1                                /* 집도의사ID1*/
							,  u1.USER_NM as OPSR_NM_1                                /* 집도의사명1*/
							,  a.OPSR_RA1 as OPSR_RA_1                                /* 집도의사비율1*/
							,  a.OPSR_ID2 as OPSR_ID_2                                /* 집도의사ID2*/
							,  u2.USER_NM as OPSR_NM_2                                /* 집도의사명2*/
							,  a.OPSR_RA2 as OPSR_RA_2                                /* 집도의사비율2*/
							,  a.OPSR_ID3 as OPSR_ID_3                                /* 집도의사ID3*/
							,  u3.USER_NM as OPSR_NM_3                                /* 집도의사명3*/
							,  a.OPSR_RA3 as OPSR_RA_3                                /* 집도의사비율3*/
							,  a.ANSH_ID as ANSH_ID                                           /* 마취의사ID*/
							,  u4.USER_NM as ANSH_NM                                  /* 마취의사명*/
							,  a.CPDR_ID as CPDR_ID                                           /* 협진의사ID*/
							,  a.ENDR_ID as ENDR_ID                                           /* 시행의사ID*/
							,  u5.USER_NM as ENDR_NM                                  /* 시행의사명*/
							,  a.ORDR_LCDV_CD as ORDR_LCDV_CD                                      /* 처방위치구분코드*/
							,  a.OPRT_ADIT_RT as OPRT_ADIT_RT                                      /* 수술가산율*/
							,  a.ORGL_NTM as ORGL_NTM                                          /* 원횟수*/
							,  a.ORDR_NTM_QTY as ORDR_NTM_QTY                                      /* 처방횟수량*/
							,  a.ANST_O2_ADMN_MI as ANST_O2_ADMN_MI                                   /* 마취산소투여시간분*/
							 ,  to_char ( a.ANST_STRT_DT, 'YYYYMMDDhh24miss') as ANST_STRT_DT      /* 마취시작일시*/
							 ,  to_char ( a.ANST_FNSH_DT, 'YYYYMMDDhh24miss') as ANST_FNSH_DT      /* 마취종료일시*/
							 ,  to_char ( a.ENFR_PRRN_YMD, 'YYYYMMDD') as ENFR_PRRN_YMD             /* 시행예정일자*/
							,  a.MAIN_OPDV_CD as MAIN_OPDV_CD                                      /* 주수술구분코드*/
							,  a.RE_OPDV_CD as RE_OPDV_CD                                        /* 재수술구분코드*/
							,  a.ER_ORFR_CD as ER_ORFR_CD                                        /* 응급구분코드*/
							,  a.DADV_CD as DADV_CD                                           /* 주야구분코드*/
							,  a.ACTN_MTER_DVSN_CD as ACTN_MTER_DVSN_CD                                 /* 액팅재료구분코드*/
							,  a.HGRS_ANST_DVSN_CD as HGRS_ANST_DVSN_CD                                 /* 고위험마취구분코드*/
							,  ( select  DETL_CD_NM
								   from  CCCMCDDMT
								  where  COMN_GRP_CD = 'MM003'
									and  COMN_DTLS_CD = a.HGRS_ANST_DVSN_CD
									and rownum = 1 ) as AFI_HGRS_ANST_DVSN_NM         /* 고위험구분명 */
							,  a.UPLT_RWTT_VL as UPLT_RWTT_VL                                      /* 상좌치열값*/
							,  a.UPRG_RWTT_VL as UPRG_RWTT_VL                                      /* 상우치열값*/
							,  a.LWLF_RWTT_VL as LWLF_RWTT_VL                                      /* 하좌치열값*/
							,  a.LWRG_RWTT_VL as LWRG_RWTT_VL                                      /* 하우치열값*/
							,  a.ACTN_NTM as ACTN_NTM                                          /* 액팅횟수*/
							,  a.RTRN_CQY as RTRN_CQY                                          /* 반납수량*/
							,  a.WRLS_PRIN_YN as WRLS_PRIN_YN                                      /* 작업목록출력여부*/
							,  a.NTRT_CNSL_OPNN_CTN as NTRT_CNSL_OPNN_CTN                                /* 영양상담소견내용*/
							,  a.PACS_TRDV_CD as PACS_TRDV_CD                                      /* PACS송신구분코드*/
							,  a.PACS_ACCS_NO as PACS_ACCS_NO                                      /* PACS접근번호*/
							 ,  to_char ( a.PACS_TRNM_DT, 'YYYYMMDDhh24miss') as PACS_TRNM_DT      /* PACS송신일시*/
							,  a.PACS_TRNM_STTS_CD as PACS_TRNM_STTS_CD                                 /* PACS송신상태코드*/
							,  a.INDR_ID1 as INDR_ID_1                                /* 판독의사ID1*/
							,  a.INDR_ID3 as INDR_ID_3                                /* 판독의사ID3*/
							 ,  to_char ( a.INTR_DT, 'YYYYMMDDhh24miss') as INTR_DT           /* 판독일시*/
							 ,  to_char ( a.RPRT_DT, 'YYYYMMDDhh24miss') as RPRT_DT           /* 보고일시*/
							 ,  to_char ( a.EXRM_RPTN_DT, 'YYYYMMDDhh24miss') as EXRM_RPTN_DT      /* 검사실접수일시*/
							 ,  to_char ( a.ENFR_DT, 'YYYYMMDDhh24miss') as ENFR_DT           /* 시행일시*/
							,  a.ORCN_EDCT_DR_ID as ORCN_EDCT_DR_ID                                   /* 처방확인교육의사ID*/
							,  a.ORCN_DTTN_ID as ORCN_DTTN_ID                                      /* 처방확인영양사ID*/
							,  a.DLYS_RCRD_CTN as DLYS_RCRD_CTN                                     /* 투석기록내용*/
							,  a.ZNLR_RSCN_DVSN_CD as ZNLR_RSCN_DVSN_CD                                 /* 소대절제구분코드*/
							,  a.IMLN_ORDR_YN as IMLN_ORDR_YN                                      /* 임플란트처방여부*/
							,  a.SSPC_SCIN_NM as SSPC_SCIN_NM                                      /* 의심상병명*/
							,  a.ORDR_CRTN_DVSN_CD as ORDR_CRTN_DVSN_CD                                 /* 처방생성구분코드*/
							,  a.ORDR_CRTN_LNKN_NO as ORDR_CRTN_LNKN_NO                                 /* 처방생성연결번호*/
			                ,  a.SPOR_BNDL_NM                                     /* 스페셜처방묶음명 */
			                ,  a.SPOR_BNDL_NO                                     /* 스페셜처방묶음번호*/                
							,  a.FRST_RGSR_ID as FRST_RGSR_ID                                      /* 최초등록자ID*/
							,  a.FRST_RGST_IP as FRST_RGST_IP                                      /* 최초등록IP*/
							,  to_char(a.FRST_RGST_DT, 'yyyymmddhh24miss') as FRST_RGST_DT         /* 최초등록일시*/
							,  a.LAST_UPDR_ID as LAST_UPDR_ID                                      /* 최종수정자ID*/
							,  a.LAST_UPDT_IP as LAST_UPDT_IP                                      /* 최종수정IP*/
							,  to_char( a.LAST_UPDT_DT, 'yyyymmddhh24miss') as LAST_UPDT_DT        /* 최종수정일시*/
							,  b.ORDR_NM as ORDR_NM                                           /* 처방명*/
							,  b.ORDR_PSBL_DVSN_CD as ORDR_PSBL_DVSN_CD                                 /* 처방가능구분코드*/
							,  c.INSR_IPDV_CD as INSR_IPDV_CD                                      /* 보험급여구분(AI041)*/
							,  c.PRTC_IPDV_CD as PRTC_IPDV_CD                                      /* 보호급여구분(AI041)*/
							,  c.INCS_IPDV_CD as INCS_IPDV_CD                                      /* 산재급여구분(AI041)*/
							,  c.TAIN_IPDV_CD as TAIN_IPDV_CD                                      /* 자보급여구분(AI041)*/
							,  c.MDFE_ITDV_CD as MDFE_ITDV_CD                                      /* 수가입력구분(AI046):처치,재료필수입력구분 */
							,  decode(c.DX_OBJC_ULTS_YN||c.INSR_IPDV_CD||c.INSR_BTTY_CD,'Y1S','Y','N') as DX_OBJC_ULTS_YN /*  진단초음파여부 */
			                ,  c.ULTS_CLSF_CD /* 초음파 분류코드 */
							,  c.INSR_EDI_CD /*보험EDI코드*/
				            ,  a.INPY_ORRE_CTN                                     /* 급여처방사유내용*/
				            ,  a.DOPP_EXMN_YN                                      /* 도플러검사여부*/
				            ,  a.MLTI_FETL_CNT                                     /* 다태아수*/
				            ,  a.HGRS_PTRT_YN                                      /* 고위험분만여부*/
				            ,  a.HGRS_PTRT_RESN_CD                                 /* 고위험분만사유코드*/
				            ,  nvl(c.HGRS_PTRT_ADIT_RT , 0) as HGRS_PTRT_ADIT_RT/* 고위험분만가산율         */
				            ,  nvl(c.OGDP_MNHT_ADIT_RT , 0) as OGDP_MNHT_ADIT_RT /* 산부인과심야가산율       */
		                    ,  nvl(c.NGHT_ADIT_RT,       0) as NGHT_ADIT_RT      /* 야간가산율 */
			                , b.CIS_INRF_YN as CIS_INRF_YN  /* CIS 인터페이스 여부  */
			                ,  c.ER_MCTE_ADDV_CD as ER_MCTE_ADDV_CD /* 응급의료가산구분코드 */
			                ,  FN_AC_CECK_ER_MCTE_ADDV_YN(a.ORDR_CD, a.ORDR_YMD, a.CODV_CD) as ER_MCTE_ADIT_YN 
			                ,  c.FDNO_CLCL_ORDR_YN as FDNO_CLCL_ORDR_YN /* 정수계산처방여부 */
			                ,  c.OPRT_MDFE_CD_YN as OPRT_MDFE_CD_YN /* 수술수가코드여부 */
			                ,  c.OPRT_INFM_ITDV_CD as OPRT_INFM_ITDV_CD /* 수술정보입력구분코드 */
			                ,  a.OPSI_DVSN_CD as OPSI_DVSN_CD
			                ,  b.INSR_ACKN_BASE_CECK_YN as INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
			                ,  a.CPRS_RT as CPRS_RT   /* 압박율 */
			                ,  a.SUB_TYPE_CD as SUB_TYPE_CD /* 부유형코드 */
			                ,  a.CRNF_SUTR_YN as CRNF_SUTR_YN 	/* 안면부봉합여부 */
			                ,  a.SCRG_INPY_ONBR_RT as SCRG_INPY_ONBR_RT	/* 선별급여본인부담율 */
			                ,  a.CNSN_RLTD_YN as CNSN_RLTD_YN /* 컨설트관련여부 */    
		                    ,  a.CNSN_RLTD_MCDP_CD as CNSN_RLTD_MCDP_CD /* 컨설트관련진료과코드 */
			                ,  a.PPAB_CNSR_OPRS_CD as PPAB_CNSR_OPRS_CD /* 임신출산능력보존수술사유코드 */    
			                ,  a.PREP_ORDR_YN      as PREP_ORDR_YN /* PREP처방여부 */
			                ,  a.CSCR_CD           as CSCR_CD	/* Case_Cart코드 */
		                    ,  KLGR_CD             as KLGR_CD   /* K-L Grading코드 */
		                    ,  KLGR_CTN            as KLGR_CTN  /* K-L Grading내용 */
						 from  MDTRTORDT a
							,  MDORDRCMT b
							,  AIMFMDFET c
							,  CCUSRDPHT u1
							,  CCUSRDPHT u2
							,  CCUSRDPHT u3
							,  CCUSRDPHT u4
							,  CCUSRDPHT u5
			                ,  APRCRPTNT rcr
						where  a.PTNO = #{ptno}
						  and  a.ORDR_YMD = to_date ( #{ordrYmd}, 'YYYYMMDD' )
						  and  a.CODV_CD  = #{codvCd}
		                  and  ( (FN_CC_GET_CNST_VL('MDP_004', 'NURS_TX_MTER_INQR_YN') = 'Y') or 
		                         (nvl(a.ORDR_CRTN_DVSN_CD, 'ZZ') not in ('47', 'S14'))
		                       )	/* 공통상수로 간호 처치/재료 조회여부 결정. 2021.04.20 obh */
			 		]]>				  
					  <if test='orocDprtCd != null and orocDprtCd != ""'>
			             and  a.OROC_DPRT_CD = #{orocDprtCd}
					  </if>    
		              <if test='codvCd == "O"'>
		                 and rcr.CNCL_DT is null
		              </if>		          
		              <if test='odkiCd != null and odkiCd != ""'>
			              and  a.ODKI_CD = #{odkiCd}
			          </if>				  
		              <if test='codvCd == "O" and chdrId != null and chdrId != ""'>
		                  and a.CHDR_ID = #{chdrId}
		              </if>
		              <choose>
			            <when test='dcDvsnCd=="T"'>
			              and  a.DC_DVSN_CD = #{dcDvsnCd}
			            </when>
			            <otherwise>
			              and  a.DC_DVSN_CD not in ( 'X' , 'F' , 'E', 'T' ) /*  취소, 실처방 전환, 임시처방 취소, 외래당일입원가처방은 조회 제외 */    
			              /*  DC_DVSN_CD 가 'N' 이거나 NULL 인 경우 전체조회 */
			              /*  DC_DVSN_CD 임시처방인 경우는 DC_DVSN_CD 'Y' 것도 같이 조회 */
			              and  'TRUE' = case when #{dcDvsnCd} = 'N' or #{dcDvsnCd} is null then 'TRUE'
			                                 else case when a.DC_DVSN_CD = #{dcDvsnCd} then 'TRUE'
			                                           when a.DC_DVSN_CD = 'Y' then 'TRUE'
			                                      end
			                            end
			            </otherwise>
			          </choose>
			 		<![CDATA[					  /*  Client logic 이동 외래일때 같은 진료과만 처리 */
						  and  'TRUE' = case when a.CODV_CD = 'O'
											 then case when a.MCDP_CD like #{mcdpCd} ||'%' /* 단독 처방 조회 기능이 있어서 like 로 처리*/
												  then 'TRUE'
												  else 'FALSE' end
											 else 'TRUE'
											 end
						  and  'TRUE' = case when a.CODV_CD <> 'O'
											 then case when a.MDRP_NO = #{mdrpNo}
												  then 'TRUE'
												  else 'FALSE'
												  end
											 else 'TRUE'
											 end
						  /*  단독 처방 조회 */
						  and   'TRUE' = case when #{ordrSno} > 0
											  then case when a.ORDR_SNO = #{ordrSno}
														then 'TRUE'
														else 'FALSE'
														end
											  else 'TRUE'
											  end
						  and  a.OPSR_ID1 = u1.USER_ID(+)
						  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between u1.APST_YMD(+) and u1.APFN_YMD (+)
						  and  a.OPSR_ID2 = u2.USER_ID(+)
						  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between u2.APST_YMD(+) and u2.APFN_YMD (+)
						  and  a.OPSR_ID3 = u3.USER_ID(+)
						  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between u3.APST_YMD(+) and u3.APFN_YMD (+)
						  and  a.ANSH_ID = u4.USER_ID(+)
						  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between u4.APST_YMD(+) and u4.APFN_YMD (+)
						  and  a.ORDR_CD  = b.ORDR_CD(+)
						  and  a.ORDR_CD  = c.MDFE_CD(+)
						  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between c.APST_YMD(+) and c.APFN_YMD(+)
						  and  a.ENDR_ID = u5.USER_ID(+)
						  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between u5.APST_YMD(+) and u5.APFN_YMD (+)
			              and  a.MDRP_NO = rcr.MDRP_NO
						order
						by     decode(a.ODKI_DETL_CD, 'Z', a.SPOR_BNDL_NO, 0)
		                    ,  a.FRST_RGST_DT
							,  a.SORT_SQNC
			                ,  a.ORDR_SNO
			 		]]>			
	</select>






    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-updateOrdrFeeOrdr (처치 처방 Update) 
        Description :                                           처방 내림한 처치 처방을 수정한다.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-updateOrdrFeeOrdr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  >
		update  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-updateOrdrFeeOrdr */
		        MDTRTORDT a
		   set  MCDP_CD = #{mcdpCd}                                            /*  진료과코드 */
		     ,  WARD_CD = #{wardCd}                                            /*  병동코드 */
		     ,  ORCL_CD = #{orclCd}                                            /*  처방분류코드 */
		     ,  ODKI_CD = #{odkiCd}                                            /*  처방종류코드 */
		     ,  ODKI_DETL_CD = #{odkiDetlCd}                                   /*  처방종류상세코드(신규) */
		     ,  ORDR_CLTY_CD = #{ordrCltyCd}                               /*  처방분류유형코드 */
		     ,  ORFR_CD = #{orfrCd}                                                /*  처방형태코드 */
		     ,  SLIP_CD = #{slipCd}                                                /*  SLIP 코드 */
		     ,  CHDR_ID = #{chdrId}                                                /*  지정의사ID */
		     ,  GNDR_ID = #{gndrId}                                                /*  주치의사ID */
		     ,  OPSR_ID1 = #{opsrId1}                                          /*  집도의사ID1 */
		     ,  OPSR_RA1 = #{opsrRa1}                                          /*  집도의사비율1 */
		     ,  OPSR_ID2 = #{opsrId2}                                          /*  집도의사ID2 */
		     ,  OPSR_RA2 = #{opsrRa2}                                          /*  집도의사비율2 */
		     ,  OPSR_ID3 = #{opsrId3}                                          /*  집도의사ID3 */
		     ,  OPSR_RA3 = #{opsrRa3}                                          /*  집도의사비율3 */
		     ,  ANSH_ID = #{anshId}                                                /*  마취의사ID */
		     ,  CPDR_ID = #{cpdrId}                                                /*  협진의사ID */
		     ,  FRNS_DPRT_CD = #{frnsDprtCd}                               /*  환자가야할장소코드 */
		     ,  ORDR_LCDV_CD = #{ordrLcdvCd}                               /*  처방위치구분코드 */
		     ,  OPRM_CD = #{oprmCd}                                            /*  수술실코드 */
		     ,  OPRT_ADIT_RT = #{oprtAditRt}                                   /*  수술가산율 */
		     ,  ORDR_NTM_QTY = #{ordrNtmQty}                           /*  처방횟수량 */
		     ,  ANST_O2_ADMN_MI = #{anstO2AdmnMi}                  /*  마취산소투여시간분 */
		     ,  ANST_STRT_DT = to_date ( #{anstStrtDt}, 'YYYYMMDDhh24miss' )       /*  마취시작일시 */
		     ,  ANST_FNSH_DT = to_date ( #{anstFnshDt}, 'YYYYMMDDhh24miss' )   /*  마취종료일시 */
		     ,  ENFR_PRRN_YMD = to_date (#{enfrPrrnYmd},'yyyymmdd') /*  시행예정일자 */
		     ,  ENFR_DT = to_date (#{enfrDt},'YYYYMMDDhh24miss')                /*  시행일자 */	 
		     ,  ADTN_ORDV_CD = #{adtnOrdvCd}                           /*  추가처방구분코드 */
		     ,  MAIN_OPDV_CD = #{mainOpdvCd}                           /*  주수술구분코드 */
		     ,  RE_OPDV_CD = #{reOpdvCd}                                   /*  재수술구분코드 */
		     ,  ER_ORFR_CD = #{erOrfrCd}                                       /*  응급처방형태코드 */
		     ,  DADV_CD = #{dadvCd}                                            /*  주야구분코드 */
		     ,  ACTN_MTER_DVSN_CD = #{actnMterDvsnCd}              /*  액팅재료구분코드 */
		     ,  HGRS_ANST_DVSN_CD = #{hgrsAnstDvsnCd}              /*  고위험마취구분코드 */
		     ,  ORDR_UNSL_CTN = #{ordrUnslCtn}                             /*  처방특이내용 */
		     ,  UPLT_RWTT_VL = #{upltRwttVl}                                   /*  상좌치열값 */
		     ,  UPRG_RWTT_VL = #{uprgRwttVl}                               /*  상우치열값 */
		     ,  LWLF_RWTT_VL = #{lwlfRwttVl}                                   /*  하좌치열값 */
		     ,  LWRG_RWTT_VL = #{lwrgRwttVl}                               /*  하우치열값 */
		     ,  ORDR_IPDV_CD = #{ordrIpdvCd}                               /*  처방급여구분코드 */
		     ,  PTAD_IPDV_CD = #{ptadIpdvCd}                               /*  원무급여구분코드 */
		     ,  PTAD_CLBA_YMD = to_date(#{ptadClbaYmd}, 'YYYYMMDDhh24miss')        /*  원무계산기준일자 */
		     ,  CLRS_PRJC_CD = #{clrsPrjcCd}                                   /*  임상연구과제코드 */
		     ,  CLRS_PRJC_DR_ID = #{clrsPrjcDrId}                          /*  임상연구과제의사ID */
		     ,  ATHN_ID = #{athnId}                                               /*  인증자ID */
		     ,  CRTF_IP = #{crtfIp}                                                   /*  인증IP */
		     ,  CRTF_DT = to_date ( #{crtfDt}, 'YYYYMMDDhh24miss' )/*  인증일시 */
		     ,  ENDR_ID = #{endrId}                                                /*  임상연구과제코드 */
		     ,  VAT_TRGT_YN = #{vatTrgtYn}                                     /*  부가세대상여부 */
		     ,  ITRN_BSDV_CD = #{itrnBsdvCd}                               /*  인턴업무구분코드 */
		     ,  ZNLR_RSCN_DVSN_CD = #{znlrRscnDvsnCd}              /*  소대절제구분코드 */
		     ,  PTAD_CODV_CD = #{ptadCodvCd}
		     ,  PTAD_MDRP_NO = #{ptadMdrpNo}
		     ,  IMLN_ORDR_YN = #{imlnOrdrYn}
		     ,  SSPC_SCIN_NM = #{sspcScinNm}
		     ,  SPOR_BNDL_NM = #{sporBndlNm}                                    /* 스페셜처방묶음명 */
		     ,  SPOR_BNDL_NO = #{sporBndlNo}                                    /* 스페셜처방묶음번호*/                       
		     ,  LAST_UPDR_ID = #{gvUserId}                                     /*  최종수정자ID */
		     ,  LAST_UPDT_IP = #{gvUserIp}                                     /*  최종수정IP */
		     ,  LAST_UPDT_DT = sysdate                                         /*  최종수정일시  */
		     ,  LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}           /*  최종수정SMC클라이언트프로그램ID */
		     ,  LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}           /*  최종수정SMC서버프로그램ID      */
		     ,  ORDR_UPDT_DT = sysdate                                 /*  처방수정일시*/
		     ,  ORDR_UPDR_ID  = #{gvUserId}                                /*  처방수정자ID*/
		     ,  NTRT_CNSL_OPNN_CTN = #{ntrtCnslOpnnCtn}
		     ,  CARE_STTS_CD = #{careSttsCd}
		     ,  MTRI_FRNS_YN = #{mtriFrnsYn}                                 /* 자재불출여부 */
		     ,  MTRI_FRNS_DT = to_date(#{mtriFrnsDt}, 'YYYYMMDDhh24miss')    /* 자재불출일시 */
		     ,  MTRI_FRPR_ID = #{mtriFrprId}                                 /* 자재불출자ID */
		     ,  INDR_ID1 = #{indrId1}
		     ,  INTR_DT = #{intrDt}
		     ,  RPRT_DT = #{rprtDt}
		     ,  HGRS_PTRT_YN = #{hgrsPtrtYn}                             /* 고위험분만여부 */
		     ,  HGRS_PTRT_RESN_CD = #{hgrsPtrtResnCd}             /* 고위험분만사유(요건)*/
		     ,  OPSI_DVSN_CD = #{opsiDvsnCd}	/* 수술부위구분코드 */
		     ,  CPRS_RT = #{cprsRt}	/* 압박율 */
		     ,  SUB_TYPE_CD = #{subTypeCd}	/* 부유형코드 */
		     ,  CRNF_SUTR_YN = #{crnfSutrYn}	/* 안면부봉합여부 */
		     ,  SCRG_INPY_ONBR_RT = #{scrgInpyOnbrRt}	/* 선별급여본인부담율 */
		     ,  CNSN_RLTD_YN      = #{cnsnRltdYn}	/* 컨설트관련여부 */
		     ,  CNSN_RLTD_MCDP_CD = case when (#{cnsnRltdYn} = 'Y') and (Trim(#{cnsnRltdMcdpCd}) = '' or #{cnsnRltdMcdpCd} is null)
		                                 then (select MDCR_DPRT_CD from CCUSRDPHT where USER_ID = a.ODDR_ID)
		                                 else #{cnsnRltdMcdpCd}
		                             end /* 컨설트관련진료과코드 */
		     ,  PPAB_CNSR_OPRS_CD = #{ppabCnsrOprsCd} /* 임신출산능력보존수술사유코드 */
		     ,  PREP_ORDR_YN      = #{prepOrdrYn}
		     ,  CSCR_CD           = #{cscrCd}
		     ,  KLGR_CD           = #{klgrCd}     /* K-L Grading코드 */
		     ,  KLGR_CTN          = #{klgrCtn}    /* K-L Grading내용 */
		 where  PTNO            = #{ptno}                                       /*  환자번호 */
		   and  ORDR_YMD        = to_date(#{ordrYmd}, 'YYYYMMDD')               /*  처방일자 */
		   and  ORDR_SNO        = #{ordrSno}
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-updateOrdrFeeOrdrDc (처방료처방 DC 및 취소) 
        Description :                                           처방 내림한 처방료처방을 DC 및 취소 처리한다.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-updateOrdrFeeOrdrDc"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  >
		 update  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-updateOrdrFeeOrdrDc */
		             MDTRTORDT
		       set  DC_DVSN_CD = #{dcDvsnCd}
		           ,  DC_ODDR_ID = #{dcOddrId}
		           ,  DC_CNNU_ID = case when #{dcCnnuId} is not null 
		                                           then #{dcCnnuId}
		                                           else DC_CNNU_ID end
		           ,  DC_ORDR_DT = to_date ( #{dcOrdrDt}, 'YYYYMMDDhh24miss' )
		           ,  PACS_TRDV_CD = decode( PACS_ACCS_NO, null, null, 'Y', null, 'C' )            /*  PACS i/f */
		           ,  RTRN_STTS_CD = NVL ( #{rtrnSttsCd}, RTRN_STTS_CD )
		           ,  RTRN_RQST_DT = NVL ( to_date(#{rtrnRqstDt}, 'YYYYMMDDhh24miss'), RTRN_RQST_DT )
		           ,  RTRN_RQPR_ID = NVL ( #{rtrnRqprId}, RTRN_RQPR_ID )
		           ,  LAST_UPDR_ID = #{gvUserId}                                                   /*  최종수정자ID                  */
		           ,  LAST_UPDT_IP = #{gvUserIp}                                                   /*  최종수정IP                    */
		           ,  LAST_UPDT_DT = to_date ( #{dcOrdrDt}, 'YYYYMMDDhh24miss' )                   /*  최종수정일시                  */
		           ,  LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}                                     /*  최종수정SMC클라이언트프로그램ID */
		           ,  LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}                                     /*  최종수정SMC서버프로그램ID      */
		  where  PTNO = #{ptno}
		     and  ORDR_YMD = to_date ( #{ordrYmd}, 'YYYYMMDD' )                                 /* 처방일자 */
		     and  ORDR_SNO = #{ordrSno}                                                         /* 처방일련번호 */
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-insertOrdrFeeOrdr (처방료 처방 저장) 
        Description :                                           환자 치료를 위한 처방 내림 중 처방료 처방을 저장한다.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
    -->	
	<insert id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-insertOrdrFeeOrdr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  >
				<![CDATA[		
		           insert /*+ SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-insertOrdrFeeOrdr */
				   into  MDTRTORDT
				   (
						   PTNO                     /* 환자번호*/
						   ,  ORDR_YMD              /* 처방일자*/
						   ,  ORDR_SNO              /* 처방일련번호*/
						   ,  MDRP_NO               /* 진료접수번호*/
						   ,  PTAD_MDRP_NO          /* 원무진료접수번호*/
						   ,  ORDR_CD               /* 처방코드*/
						   ,  MCDP_CD               /* 진료과코드*/
						   ,  ODDR_ID               /* 처방의사ID*/
						   ,  CHDR_ID               /* 지정의사ID*/
						   ,  GNDR_ID               /* 주치의사ID*/
						   ,  CODV_CD               /* 내원구분코드*/
						   ,  PTAD_CODV_CD          /* 원무내원구분코드*/
						   ,  ORDR_CLTY_CD          /* 처방분류유형코드*/
						   ,  ORCL_CD               /* 처방분류코드*/
						   ,  ODKI_CD               /* 처방종류코드*/
						   ,  ODKI_DETL_CD          /* 처방종류상세코드*/
						   ,  ORFR_CD               /* 처방형태코드*/
						   ,  HSLC_DVSN_CD          /* 위치구분코드*/
						   ,  MCCN_CD               /* 진료센터코드*/
						   ,  WARD_CD               /* 병동코드*/
						   ,  OROC_DPRT_CD          /* 처방발생원코드*/
						   ,  FRNS_DPRT_CD          /* 불출부서코드*/
						   ,  SLIP_CD               /* SLIP코드*/
						   ,  CARE_STTS_CD          /* 간호상태코드*/
						   ,  RTRN_STTS_CD          /* 반납상태코드*/
						   ,  RTRN_RQST_DT          /* 반납요청일시*/
						   ,  RTRN_RQPR_ID          /* 반납요청자ID*/
						   ,  ADTN_ORDV_CD          /* 추가처방구분코드*/
						   ,  RGOR_FNDR_ID          /* 정규처방완료의사ID*/
						   ,  RGOR_FINS_DT          /* 정규처방완료일시*/
						   ,  ORCN_NURS_ID          /* 처방확인간호사ID*/
						   ,  ORCN_DT               /* 처방확인일시*/
						   ,  TMPR_ORDR_YN          /* 임시처방여부*/
						   ,  DC_DVSN_CD            /* DC구분코드*/
						   ,  DC_ODDR_ID            /* DC처방의사ID*/
						   ,  DC_ORDR_DT            /* DC처방일시*/
						   ,  DC_CNNU_ID            /* DC확인간호사ID*/
						   ,  DC_CNFR_DT            /* DC확인일시*/
						   ,  SORT_SQNC             /* 정렬순서*/
						   ,  ORDR_UNSL_CTN         /* 처방특이내용*/
						   ,  INPT_USER_DVSN_CD     /* 입력사용자구분코드*/
						   ,  CRTF_DVSN_CD          /* 인증구분코드*/
						   ,  ATHN_ID               /* 인증자ID*/
						   ,  CRTF_IP               /* 인증IP*/
						   ,  CRTF_DT               /* 인증일시*/
						   ,  CLRS_PRJC_CD          /* 임상연구과제코드*/
						   ,  CLRS_PRJC_DR_ID       /* 임상연구과제의사ID*/
						   ,  OPRT_YMD              /* 수술일자*/
						   ,  OPRT_SNO              /* 수술일련번호*/
						   ,  ITRN_BSDV_CD          /* 인턴업무구분코드*/
						   ,  SRRQ_CMNT_CTN         /* SR커멘트내용*/
						   ,  OPRM_CD               /* 수술실코드*/
						   ,  ORDR_IPDV_CD          /* 처방급여구분코드*/
						   ,  PTAD_IPDV_CD          /* 원무급여구분코드*/
						   ,  ISTY_CD               /* 보험유형코드*/
						   ,  ISTY_ASST_CD          /* 보험유형보조코드*/
						   ,  CNPL_CD               /* 계약처코드*/
						   ,  PTAD_CLAM_YMD         /* 원무청구일자*/
						   ,  PTAD_CLBA_YMD         /* 원무계산기준일자*/
						   ,  RPNT_ID               /* 수납자ID*/
						   ,  RCPC_DT               /* 수납일시*/
						   ,  RCST_CD               /* 수납상태코드*/
						   ,  VIA_ADMS_RCST_CD      /* 경유입원수납상태코드*/
						   ,  IMPL_YMD              /* 실시일자*/
						   ,  ABC_ENFR_YMD          /* ABC시행일자*/
						   ,  ABC_MCDP_CD           /* ABC진료과코드*/
						   ,  ABC_EFDP_CD           /* ABC시행부서코드*/
						   ,  ABC_ODDR_ID           /* ABC처방의사ID*/
						   ,  ABC_ENDR_ID           /* ABC시행의사ID*/
						   ,  VAT_TRGT_YN           /* 부가세대상여부*/
						   ,  CNNT_ORDR_BNDL_NO     /* 동시처방묶음번호*/
						   ,  ORDR_VALD_STRT_YMD    /* 처방유효시작일자*/
						   ,  ORDR_VALD_FNSH_YMD    /* 처방유효종료일자*/
						   ,  IMPL_ORDR_PBLC_NTM    /* 실시처방발행횟수*/
						   ,  IMPL_ORDR_PBLC_LMTT_NTM /* 실시처방발행제한횟수*/
						   ,  ORGL_ORDR_YMD         /* 원처방일자*/
						   ,  ORGL_ORDR_SNO         /* 원처방일련번호*/
						   ,  OPSR_ID1              /* 집도의사ID1*/
						   ,  OPSR_RA1              /* 집도의사비율1*/
						   ,  OPSR_ID2              /* 집도의사ID2*/
						   ,  OPSR_RA2              /* 집도의사비율2*/
						   ,  OPSR_ID3              /* 집도의사ID3*/
						   ,  OPSR_RA3              /* 집도의사비율3*/
						   ,  ANSH_ID               /* 마취의사ID*/
						   ,  CPDR_ID               /* 협진의사ID*/
						   ,  ENDR_ID               /* 시행의사ID*/
						   ,  ORDR_LCDV_CD          /* 처방위치구분코드*/
						   ,  OPRT_ADIT_RT          /* 수술가산율*/
						   ,  ORDR_NTM_QTY          /* 처방횟수량*/
						   ,  ANST_O2_ADMN_MI       /* 마취산소투여시간분*/
						   ,  ANST_STRT_DT          /* 마취시작일시*/
						   ,  ANST_FNSH_DT          /* 마취종료일시*/
						   ,  ENFR_PRRN_YMD         /* 시행예정일자*/
						   ,  MAIN_OPDV_CD          /* 주수술구분코드*/
						   ,  RE_OPDV_CD            /* 재수술구분코드*/
						   ,  ER_ORFR_CD            /* 응급구분코드*/
						   ,  DADV_CD               /* 주야구분코드*/
						   ,  ACTN_MTER_DVSN_CD     /* 액팅재료구분코드*/
						   ,  HGRS_ANST_DVSN_CD     /* 고위험마취구분코드*/
						   ,  UPLT_RWTT_VL          /* 상좌치열값*/
						   ,  UPRG_RWTT_VL          /* 상우치열값*/
						   ,  LWLF_RWTT_VL          /* 하좌치열값*/
						   ,  LWRG_RWTT_VL          /* 하우치열값*/
						   ,  ACTN_NTM              /* 액팅횟수*/
						   ,  RTRN_CQY              /* 반납수량*/
						   ,  WRLS_PRIN_YN          /* 작업목록출력여부*/
						   ,  NTRT_CNSL_OPNN_CTN    /* 영양상담소견내용*/
						   ,  PACS_TRDV_CD          /* PACS송신구분코드*/
						   ,  PACS_ACCS_NO          /* PACS접근번호*/
						   ,  PACS_TRNM_DT          /* PACS송신일시*/
						   ,  PACS_TRNM_STTS_CD     /* PACS송신상태코드*/
						   ,  INDR_ID1              /* 판독의사ID1*/
						   ,  INDR_ID3              /* 판독의사ID3*/
						   ,  INTR_DT               /* 판독일시*/
						   ,  RPRT_DT               /* 보고일시*/
						   ,  EXRM_RPTN_DT          /* 검사실접수일시*/
						   ,  ENFR_DT               /* 시행일시*/
						   ,  ORCN_EDCT_DR_ID       /* 처방확인교육의사ID*/
						   ,  ORCN_DTTN_ID          /* 처방확인영양사ID*/
						   ,  DLYS_RCRD_CTN         /* 투석기록내용*/
						   ,  ZNLR_RSCN_DVSN_CD     /* 소대절제구분코드*/
						   ,  IMLN_ORDR_YN          /* 임플란트처방여부*/
						   ,  SSPC_SCIN_NM          /* 의심상병명*/
						   ,  ORDR_CRTN_DVSN_CD     /* 처방생성구분코드*/
						   ,  ORDR_CRTN_LNKN_NO     /* 처방생성연결번호*/
		                   ,  SPOR_BNDL_NM             /* 스페셜처방묶음명 */
		                   ,  SPOR_BNDL_NO             /* 스페셜처방묶음번호*/                             
						   ,  FRST_RGSR_ID          /* 최초등록자ID*/
						   ,  FRST_RGST_IP          /* 최초등록IP*/
						   ,  FRST_RGST_DT          /* 최초등록일시*/
						   ,  FRST_RGST_CLNT_PRGM_ID     /* 최초등록SMC클라이언트프로그램ID*/
						   ,  FRST_RGST_SRVR_PRGM_ID     /* 최초등록SMC서버프로그램ID*/
						   ,  LAST_UPDR_ID          /* 최종수정자ID*/
						   ,  LAST_UPDT_IP          /* 최종수정IP*/
						   ,  LAST_UPDT_DT          /* 최종수정일시*/
						   ,  LAST_UPDT_CLNT_PRGM_ID     /* 최종수정SMC클라이언트프로그램ID*/
						   ,  LAST_UPDT_SRVR_PRGM_ID     /* 최종수정SMC서버프로그램ID*/
						   ,  ORDR_UPDT_DT          /* 처방수정일시*/
						   ,  ORDR_UPDR_ID          /* 처방수정자ID*/
		                   ,  HGRS_PTRT_YN          /* 고위험분만여부 */
		                   ,  HGRS_PTRT_RESN_CD /* 고위험분만사유(요건)*/
		                   ,  OPSI_DVSN_CD         /* 수술부위구분코드 */
		                   ,  CPRS_RT                  /* 압박율 */
		                   ,  SUB_TYPE_CD			/* 부유형코드 */
		                   ,  CRNF_SUTR_YN         /* 안면부봉합여부 */
		                   ,  SCRG_INPY_ONBR_RT /* 선별급여본인부담율 */
		                   ,  RDEX_CD           /* 감면코드 */
		                   ,  CNSN_RLTD_YN      /* 컨설트관련여부 */
		                   ,  CNSN_RLTD_MCDP_CD /* 컨설트관련진료과코드 */
		                   ,  PPAB_CNSR_OPRS_CD /* 임신출산능력보존수술사유코드 */
		                   ,  PREP_ORDR_YN      /* PREP처방여부 */
		                   ,  CSCR_CD           /* Case_Cart코드 */
		                   ,  KLGR_CD           /* K-L Grading코드 */
		                   ,  KLGR_CTN          /* K-L Grading내용 */
				   )
				   values  (
						   #{ptno}                               /* 환자번호*/
							,  to_date ( #{ordrYmd}, 'YYYYMMDD' )/* 처방일자*/
							,  #{ordrSno}                        /* 처방일련번호*/
							,  #{mdrpNo}                         /* 진료접수번호*/
							,  #{ptadMdrpNo}                     /* 원무진료접수번호*/
							,  #{ordrCd}                         /* 처방코드*/
							,  #{mcdpCd}                         /* 진료과코드*/
							,  #{oddrId}                         /* 처방의사ID*/
							,  #{chdrId}                         /* 지정의사ID*/
							,  #{gndrId}                         /* 주치의사ID*/
							,  #{codvCd}                         /* 내원구분코드 [D: DSC, E:응급, G: 건진, H:가정간호, I:입원, O:외래 - ASIS(AP025)]*/
							,  #{ptadCodvCd}                     /* 원무내원구분코드*/
							,  #{ordrCltyCd}                     /* 처방분류유형코드 [주사약, 외용약, 검체검사, 환자검사 인지를 구별하는 코드로 처방 분류(AI048)의 상위개념으로 볼 수 있다. *. 수가 테이블에 있는 정보를 가져옴. ASIS(MM182)]*/
							,  #{orclCd}                         /* 처방분류코드*/
							,  #{odkiCd}                         /* 처방종류코드*/
							,  #{odkiDetlCd}                     /* 처방종류상세코드*/
							,  #{orfrCd}                         /* 처방형태코드*/
							,  #{hslcDvsnCd}                     /* 위치구분코드*/
							,  #{mccnCd}                         /* 진료센터코드*/
							,  #{wardCd}                         /* 병동코드*/
							,  #{orocDprtCd}                         /* 처방발생원코드*/
							,  #{frnsDprtCd}                     /* 불출부서코드*/
							,  #{slipCd}                         /* slip코드*/
							,  #{careSttsCd}                     /* 간호상태코드*/
							,  #{rtrnSttsCd}                     /* 반납상태코드*/
							,  to_date ( #{rtrnRqstDt}, 'YYYYMMDDhh24miss') /* 반납요청일시*/
							,  #{rtrnRqprId}                     /* 반납요청자id*/
							,  #{adtnOrdvCd}                     /* 추가처방구분코드*/
							,  #{rgorFndrId}                     /* 정규처방완료의사id*/
							,  to_date ( #{rgorFinsDt}, 'YYYYMMDDhh24miss') /* 정규처방완료일시*/
							,  #{orcnNursId}                     /* 처방확인간호사id*/
							,  to_date ( #{orcnDt}, 'YYYYMMDDhh24miss')      /* 처방확인일시*/
							,  #{tmprOrdrYn}                     /* 임시처방여부*/
							,  #{dcDvsnCd}                       /* dc구분코드*/
							,  #{dcOddrId}                       /* dc처방의사id*/
							,  to_date ( #{dcOrdrDt}, 'YYYYMMDDhh24miss')   /* dc처방일시*/
							,  #{dcCnnuId}                       /* dc확인간호사id*/
							,  to_date ( #{dcCnfrDt}, 'YYYYMMDDhh24miss')   /* dc확인일시*/
							,  #{sortSqnc}                       /* 정렬순서*/
							,  #{ordrUnslCtn}                    /* 처방특이내용*/
							,  #{inptUserDvsnCd}                 /* 입력사용자구분코드*/
							,  case when #{crtfDvsnCd} is null then '0' else #{crtfDvsnCd} end  /* 인증구분코드*/
							,  #{athnId}                         /* 인증자id*/
							,  #{crtfIp}                         /* 인증ip*/
							,  to_date ( #{crtfDt}, 'YYYYMMDDhh24miss')      /* 인증일시*/
							,  #{clrsPrjcCd}                     /* 임상연구과제코드*/
							,  #{clrsPrjcDrId}                   /* 임상연구과제의사id*/
							,  to_date ( #{oprtYmd},'YYYYMMDD' ) /* 수술일자*/
							,  #{oprtSno}                        /* 수술일련번호*/
							,  #{itrnBsdvCd}                     /* 인턴업무구분코드*/
							,  #{srrqCmntCtn}                    /* sr커멘트내용*/
							,  #{oprmCd}                         /* 수술실코드*/
							,  #{ordrIpdvCd}                     /* 보험급여구분코드*/
							,  #{ptadIpdvCd}                     /* 심사급여구분코드*/
							,  #{istyCd}                         /* 보험유형코드*/
							,  #{istyAsstCd}                     /* 보험유형보조코드*/
							,  #{cnplCd}                         /* 계약처코드*/
							,  to_date ( #{ptadClamYmd},'YYYYMMDD' )   /* 원무청구일자*/
							,  to_date ( #{ptadClbaYmd},'YYYYMMDDhh24miss' )   /* 원무계산기준일자*/
							,  #{rpntId}                         /* 수납자id*/
							,  to_date ( #{rcpcDt}, 'YYYYMMDDhh24miss') /* 수납일시*/
							,  #{rcstCd}                        /* 수납상태코드*/
							,  #{viaAdmsRcstCd}                  /* 경유입원수납상태코드*/
							,  to_date ( #{implYmd},'YYYYMMDD' ) /* 실시일자*/
							,  null                              /* abc시행일자*/
							,  null                              /* abc진료과코드*/
							,  null                              /* abc시행부서코드*/
							,  null                              /* abc처방의사id*/
							,  null                              /* abc시행의사id*/
							,  #{vatTrgtYn}                      /* 부가세대상여부*/
							,  #{cnntOrdrBndlNo}                 /* 동시처방묶음번호*/
							,  to_date ( #{ordrValdStrtYmd},'YYYYMMDD' ) /* 처방유효시작일자*/
							,  to_date ( #{ordrValdFnshYmd},'YYYYMMDD' ) /* 처방유효종료일자*/
							,  #{implOrdrPblcNtm}                /* 실시처방발행횟수*/
							,  #{implOrdrPblcLmttNtm}            /* 실시처방발행제한횟수*/
							,  to_date ( #{orglOrdrYmd},'YYYYMMDD' ) /* 원처방일자*/
							,  #{orglOrdrSno}                    /* 원처방일련번호*/
							,  #{opsrId1}                        /* 집도의사id1*/
							,  #{opsrRa1}                        /* 집도의사비율1*/
							,  #{opsrId2}                        /* 집도의사id2*/
							,  #{opsrRa2}                        /* 집도의사비율2*/
							,  #{opsrId3}                        /* 집도의사id3*/
							,  #{opsrRa3}                        /* 집도의사비율3*/
							,  #{anshId}                         /* 마취의사id*/
							,  #{cpdrId}                         /* 협진의사id*/
							,  #{endrId}                         /* 시행의사id*/
							,  #{ordrLcdvCd}                     /* 처방위치구분코드*/
							,  #{oprtAditRt}                     /* 수술가산율*/
							,  #{ordrNtmQty}                     /* 처방횟수량*/
							,  #{anstO2AdmnMi}                   /* 마취산소투여시간분*/
							,  to_date ( #{anstStrtDt}, 'YYYYMMDDhh24miss') /* 마취시작일시*/
							,  to_date ( #{anstFnshDt}, 'YYYYMMDDhh24miss') /* 마취종료일시*/
							,  decode ( #{codvCd}, 'O', decode ( #{ordrCltyCd}, 'D3', to_date (#{ordrYmd} , 'yyyymmdd') ,  to_date (#{enfrPrrnYmd},'yyyymmdd'))
		 											  , to_date( #{enfrPrrnYmd}, 'yyyymmdd' ) ) /*  시행예정일자 */
							,  #{mainOpdvCd}                    /* 주수술구분코드*/
							,  #{reOpdvCd}                      /* 재수술구분코드*/
							,  #{erOrfrCd}                      /* 응급구분코드*/
							,  #{dadvCd}                        /* 주야구분코드*/
							,  #{actnMterDvsnCd}                /* 액팅재료구분코드*/
							,  #{hgrsAnstDvsnCd}                /* 고위험마취구분코드*/
							,  #{upltRwttVl}                    /* 상좌치열값*/
							,  #{uprgRwttVl}                    /* 상우치열값*/
							,  #{lwlfRwttVl}                    /* 하좌치열값*/
							,  #{lwrgRwttVl}                    /* 하우치열값*/
							,  #{actnNtm}                       /* 액팅횟수*/
							,  #{rtrnCqy}                       /* 반납수량*/
							,  #{wrlsPrinYn}                    /* 작업목록출력여부*/
							,  #{ntrtCnslOpnnCtn}               /* 영양상담소견내용*/
							,  #{pacsTrdvCd}                    /* pacs송신구분코드*/
							,  #{pacsAccsNo}                    /* pacs접근번호*/
							,  to_date ( #{pacsTrnmDt}, 'YYYYMMDDhh24miss') /* pacs송신일시*/
							,  #{pacsTrnmSttsCd}                /* pacs송신상태코드*/
							,  #{indrId1}                       /* 판독의사id1*/
							,  #{indrId3}                       /* 판독의사id3*/
							,  to_date ( #{intrDt}, 'YYYYMMDDhh24miss') /* 판독일시*/
							,  to_date ( #{rprtDt}, 'YYYYMMDDhh24miss') /* 보고일시*/
							,  to_date ( #{exrmRptnDt}, 'YYYYMMDDhh24miss') /* 검사실접수일시*/
							,  to_date ( #{enfrDt}, 'YYYYMMDDhh24miss') /* 시행일시*/
							,  #{orcnEdctDrId}                  /* 처방확인교육의사id*/
							,  #{orcnDttnId}                    /* 처방확인영양사id*/
							,  #{dlysRcrdCtn}                   /* 투석기록내용*/
							,  #{znlrRscnDvsnCd}                /* 소대절제구분코드*/
							,  #{imlnOrdrYn}                    /* 임플란트처방여부*/
							,  #{sspcScinNm}                    /* 의심상병명*/
							,  #{ordrCrtnDvsnCd}                /* 처방생성구분코드*/
							,  #{ordrCrtnLnknNo}                /* 처방생성연결번호*/
		                    ,  #{sporBndlNm}                     /* 스페셜처방묶음명 */
		                    ,  #{sporBndlNo}                     /* 스페셜처방묶음번호 */                           
							,  #{gvUserId}                      /* 최초등록자ID*/
							,  #{gvUserIp}                      /* 최초등록IP*/
							,  to_date ( #{frstRgstDt}, 'YYYYMMDDhh24miss') /* 최초등록일시*/
							,  #{gvClntPrgmId}                  /* 최초등록SMC클라이언트프로그램ID*/
							,  #{gvSrvrPrgmId}                  /* 최초등록SMC서버프로그램ID*/
							,  #{gvUserId}                      /* 최종수정자ID*/
							,  #{gvUserIp}                      /* 최종수정IP*/
							,  to_date ( #{frstRgstDt}, 'YYYYMMDDhh24miss') /* 최종수정일시*/
							,  #{gvClntPrgmId}                  /* 최종수정SMC클라이언트프로그램ID*/
							,  #{gvSrvrPrgmId}                  /* 최종수정SMC서버프로그램ID*/
							,  to_date ( #{frstRgstDt}, 'YYYYMMDDhh24miss') /* 처방수정일시*/
							,  #{gvUserId}                      /* 처방수정자ID*/
		                    ,  #{hgrsPtrtYn}                   /* 고위험분만여부 */
		                    ,  #{hgrsPtrtResnCd}            /* 고위험분만사유(요건)*/
		                    ,  #{opsiDvsnCd}
		                    ,  #{cprsRt}
		                    ,  #{subTypeCd}
		                    ,  #{crnfSutrYn}
		                    ,  #{scrgInpyOnbrRt}
		                    ,  #{rdexCd}
		                    ,  #{cnsnRltdYn}
		                    ,  case when (#{cnsnRltdYn} = 'Y') and (Trim(#{cnsnRltdMcdpCd}) = '' or #{cnsnRltdMcdpCd} is null)
		                            then (select MDCR_DPRT_CD from CCUSRDPHT where USER_ID = #{oddrId})
		                            else #{cnsnRltdMcdpCd}
		                        end
		                    ,  #{ppabCnsrOprsCd}
		                    ,  #{prepOrdrYn}
		                    ,  #{cscrCd}           /* Case_Cart코드 */
		                    ,  #{klgrCd}           /* K-L Grading코드 */
		                    ,  #{klgrCtn}          /* K-L Grading내용 */
				   )
					]]>
	</insert>


	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneMdtrtordt-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ordrSno" column="ORDR_SNO"/>
		<result property="ptadMdrpNo" column="PTAD_MDRP_NO"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="mcdpCd" column="MCDP_CD"/>
		<result property="oddrId" column="ODDR_ID"/>
		<result property="chdrId" column="CHDR_ID"/>
		<result property="gndrId" column="GNDR_ID"/>
		<result property="codvCd" column="CODV_CD"/>
		<result property="ptadCodvCd" column="PTAD_CODV_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="odkiCd" column="ODKI_CD"/>
		<result property="odkiDetlCd" column="ODKI_DETL_CD"/>
		<result property="orfrCd" column="ORFR_CD"/>
		<result property="hslcDvsnCd" column="HSLC_DVSN_CD"/>
		<result property="mccnCd" column="MCCN_CD"/>
		<result property="wardCd" column="WARD_CD"/>
		<result property="orocCdOld" column="OROC_CD_OLD"/>
		<result property="frnsDprtCd" column="FRNS_DPRT_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="careSttsCd" column="CARE_STTS_CD"/>
		<result property="rtrnSttsCd" column="RTRN_STTS_CD"/>
		<result property="rtrnRqstDt" column="RTRN_RQST_DT"/>
		<result property="rtrnRqprId" column="RTRN_RQPR_ID"/>
		<result property="rtrnCqy" column="RTRN_CQY"/>
		<result property="ordrHoldDvsnCd" column="ORDR_HOLD_DVSN_CD"/>
		<result property="ordrHoldRgstDt" column="ORDR_HOLD_RGST_DT"/>
		<result property="ordrHoldRgsrId" column="ORDR_HOLD_RGSR_ID"/>
		<result property="adtnOrdvCd" column="ADTN_ORDV_CD"/>
		<result property="rgorFndrId" column="RGOR_FNDR_ID"/>
		<result property="rgorFinsDt" column="RGOR_FINS_DT"/>
		<result property="orcnNursId" column="ORCN_NURS_ID"/>
		<result property="mdrpNo" column="MDRP_NO"/>
		<result property="orcnDt" column="ORCN_DT"/>
		<result property="tmprOrdrYn" column="TMPR_ORDR_YN"/>
		<result property="dcDvsnCd" column="DC_DVSN_CD"/>
		<result property="dcOddrId" column="DC_ODDR_ID"/>
		<result property="dcOrdrDt" column="DC_ORDR_DT"/>
		<result property="dcCnnuId" column="DC_CNNU_ID"/>
		<result property="dcCnfrDt" column="DC_CNFR_DT"/>
		<result property="sortSqnc" column="SORT_SQNC"/>
		<result property="ordrUnslCtn" column="ORDR_UNSL_CTN"/>
		<result property="inptUserDvsnCd" column="INPT_USER_DVSN_CD"/>
		<result property="crtfDvsnCd" column="CRTF_DVSN_CD"/>
		<result property="athnId" column="ATHN_ID"/>
		<result property="crtfIp" column="CRTF_IP"/>
		<result property="crtfDt" column="CRTF_DT"/>
		<result property="clrsPrjcCd" column="CLRS_PRJC_CD"/>
		<result property="clrsPrjcDrId" column="CLRS_PRJC_DR_ID"/>
		<result property="oprtYmd" column="OPRT_YMD"/>
		<result property="oprtSno" column="OPRT_SNO"/>
		<result property="itrnBsdvCd" column="ITRN_BSDV_CD"/>
		<result property="srrqCmntCtn" column="SRRQ_CMNT_CTN"/>
		<result property="oprmCd" column="OPRM_CD"/>
		<result property="ordrIpdvCd" column="ORDR_IPDV_CD"/>
		<result property="ptadIpdvCd" column="PTAD_IPDV_CD"/>
		<result property="istyCd" column="ISTY_CD"/>
		<result property="istyAsstCd" column="ISTY_ASST_CD"/>
		<result property="cnplCd" column="CNPL_CD"/>
		<result property="ptadClamYmd" column="PTAD_CLAM_YMD"/>
		<result property="ptadClbaYmd" column="PTAD_CLBA_YMD"/>
		<result property="rcstCd" column="RCST_CD"/>
		<result property="rpntId" column="RPNT_ID"/>
		<result property="rcpcDt" column="RCPC_DT"/>
		<result property="viaAdmsRcstCd" column="VIA_ADMS_RCST_CD"/>
		<result property="rdexCd" column="RDEX_CD"/>
		<result property="implYmd" column="IMPL_YMD"/>
		<result property="abcEnfrYmd" column="ABC_ENFR_YMD"/>
		<result property="abcMcdpCd" column="ABC_MCDP_CD"/>
		<result property="abcEfdpCd" column="ABC_EFDP_CD"/>
		<result property="abcOddrId" column="ABC_ODDR_ID"/>
		<result property="abcEndrId" column="ABC_ENDR_ID"/>
		<result property="vatTrgtYn" column="VAT_TRGT_YN"/>
		<result property="cnntOrdrBndlNo" column="CNNT_ORDR_BNDL_NO"/>
		<result property="ordrValdStrtYmd" column="ORDR_VALD_STRT_YMD"/>
		<result property="ordrValdFnshYmd" column="ORDR_VALD_FNSH_YMD"/>
		<result property="implOrdrPblcNtm" column="IMPL_ORDR_PBLC_NTM"/>
		<result property="implOrdrPblcLmttNtm" column="IMPL_ORDR_PBLC_LMTT_NTM"/>
		<result property="orglOrdrYmd" column="ORGL_ORDR_YMD"/>
		<result property="orglOrdrSno" column="ORGL_ORDR_SNO"/>
		<result property="opsrId1" column="OPSR_ID1"/>
		<result property="opsrRa1" column="OPSR_RA1"/>
		<result property="opsrId2" column="OPSR_ID2"/>
		<result property="opsrRa2" column="OPSR_RA2"/>
		<result property="opsrId3" column="OPSR_ID3"/>
		<result property="opsrRa3" column="OPSR_RA3"/>
		<result property="anshId" column="ANSH_ID"/>
		<result property="cpdrId" column="CPDR_ID"/>
		<result property="endrId" column="ENDR_ID"/>
		<result property="ordrLcdvCd" column="ORDR_LCDV_CD"/>
		<result property="oprtAditRt" column="OPRT_ADIT_RT"/>
		<result property="orglNtm" column="ORGL_NTM"/>
		<result property="ordrNtmQty" column="ORDR_NTM_QTY"/>
		<result property="anstO2AdmnMi" column="ANST_O2_ADMN_MI"/>
		<result property="anstStrtDt" column="ANST_STRT_DT"/>
		<result property="anstFnshDt" column="ANST_FNSH_DT"/>
		<result property="enfrPrrnYmd" column="ENFR_PRRN_YMD"/>
		<result property="mainOpdvCd" column="MAIN_OPDV_CD"/>
		<result property="ptadMainOpdvCd" column="PTAD_MAIN_OPDV_CD"/>
		<result property="reOpdvCd" column="RE_OPDV_CD"/>
		<result property="ptadReMainOpdvCd" column="PTAD_RE_MAIN_OPDV_CD"/>
		<result property="erOrfrCd" column="ER_ORFR_CD"/>
		<result property="dadvCd" column="DADV_CD"/>
		<result property="actnMterDvsnCd" column="ACTN_MTER_DVSN_CD"/>
		<result property="hgrsAnstDvsnCd" column="HGRS_ANST_DVSN_CD"/>
		<result property="upltRwttVl" column="UPLT_RWTT_VL"/>
		<result property="uprgRwttVl" column="UPRG_RWTT_VL"/>
		<result property="lwlfRwttVl" column="LWLF_RWTT_VL"/>
		<result property="lwrgRwttVl" column="LWRG_RWTT_VL"/>
		<result property="actnNtm" column="ACTN_NTM"/>
		<result property="wrlsPrinYn" column="WRLS_PRIN_YN"/>
		<result property="hhcrOrdrVistYmd" column="HHCR_ORDR_VIST_YMD"/>
		<result property="hhcrOrdrNursId" column="HHCR_ORDR_NURS_ID"/>
		<result property="ntrtCnslOpnnCtn" column="NTRT_CNSL_OPNN_CTN"/>
		<result property="pacsTrdvCd" column="PACS_TRDV_CD"/>
		<result property="pacsAccsNo" column="PACS_ACCS_NO"/>
		<result property="pacsTrnmDt" column="PACS_TRNM_DT"/>
		<result property="pacsTrnmSttsCd" column="PACS_TRNM_STTS_CD"/>
		<result property="mdfeAplyYmd" column="MDFE_APLY_YMD"/>
		<result property="exrmRptnDt" column="EXRM_RPTN_DT"/>
		<result property="enfrDt" column="ENFR_DT"/>
		<result property="intrDt" column="INTR_DT"/>
		<result property="rprtDt" column="RPRT_DT"/>
		<result property="indrId1" column="INDR_ID1"/>
		<result property="indrId3" column="INDR_ID3"/>
		<result property="orcnEdctDrId" column="ORCN_EDCT_DR_ID"/>
		<result property="orcnDttnId" column="ORCN_DTTN_ID"/>
		<result property="dlysRcrdCtn" column="DLYS_RCRD_CTN"/>
		<result property="znlrRscnDvsnCd" column="ZNLR_RSCN_DVSN_CD"/>
		<result property="mtriFrnsYn" column="MTRI_FRNS_YN"/>
		<result property="mtriFrnsDt" column="MTRI_FRNS_DT"/>
		<result property="mtriFrprId" column="MTRI_FRPR_ID"/>
		<result property="erFrnsRqstYn" column="ER_FRNS_RQST_YN"/>
		<result property="imlnOrdrYn" column="IMLN_ORDR_YN"/>
		<result property="sspcScinNm" column="SSPC_SCIN_NM"/>
		<result property="ordrCrtnDvsnCd" column="ORDR_CRTN_DVSN_CD"/>
		<result property="ordrCrtnLnknNo" column="ORDR_CRTN_LNKN_NO"/>
		<result property="ordrUpdtDt" column="ORDR_UPDT_DT"/>
		<result property="ordrUpdrId" column="ORDR_UPDR_ID"/>
		<result property="hgrsPtrtResnCd" column="HGRS_PTRT_RESN_CD"/>
		<result property="hgrsPtrtYn" column="HGRS_PTRT_YN"/>
		<result property="mltiFetlCnt" column="MLTI_FETL_CNT"/>
		<result property="doppExmnYn" column="DOPP_EXMN_YN"/>
		<result property="inpyOrreCtn" column="INPY_ORRE_CTN"/>
		<result property="orocDprtCd" column="OROC_DPRT_CD"/>
		<result property="sporBndlNm" column="SPOR_BNDL_NM"/>
		<result property="sporBndlNo" column="SPOR_BNDL_NO"/>
		<result property="subTypeCd" column="SUB_TYPE_CD"/>
		<result property="opsiDvsnCd" column="OPSI_DVSN_CD"/>
		<result property="cprsRt" column="CPRS_RT"/>
		<result property="crnfSutrYn" column="CRNF_SUTR_YN"/>
		<result property="scrgInpyOnbrRt" column="SCRG_INPY_ONBR_RT"/>
		<result property="cnsnRltdYn" column="CNSN_RLTD_YN"/>
		<result property="cnsnRltdMcdpCd" column="CNSN_RLTD_MCDP_CD"/>
		<result property="ppabCnsrOprsCd" column="PPAB_CNSR_OPRS_CD"/>
		<result property="cscrCd" column="CSCR_CD"/>
		<result property="klgrCd" column="KLGR_CD"/>
		<result property="klgrCtn" column="KLGR_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneMdtrtordt (MDTRTORDT 처방KEY를 이용한 전체컬럼 조회) 
        Description :                                           MDTRTORDT 처방KEY를 이용한 전체컬럼 조회
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneMdtrtordt-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneMdtrtordt"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrOrdrFeeMngmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneMdtrtordt-result" useCache="true" flushCache="false">
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrOrdrFeeMngmDAO-selectOneMdtrtordt */
		        PTNO                    as PTNO                   
		     ,  ORDR_SNO                as ORDR_SNO               
		     ,  PTAD_MDRP_NO            as PTAD_MDRP_NO           
		     ,  ORDR_CD                 as ORDR_CD                
		     ,  to_char(ORDR_YMD,'YYYYMMDD') as ORDR_YMD               
		     ,  MCDP_CD                 as MCDP_CD                
		     ,  ODDR_ID                 as ODDR_ID                
		     ,  CHDR_ID                 as CHDR_ID                
		     ,  GNDR_ID                 as GNDR_ID                
		     ,  CODV_CD                 as CODV_CD                
		     ,  PTAD_CODV_CD            as PTAD_CODV_CD           
		     ,  ORDR_CLTY_CD            as ORDR_CLTY_CD           
		     ,  ORCL_CD                 as ORCL_CD                
		     ,  ODKI_CD                 as ODKI_CD                
		     ,  ODKI_DETL_CD            as ODKI_DETL_CD           
		     ,  ORFR_CD                 as ORFR_CD                
		     ,  HSLC_DVSN_CD            as HSLC_DVSN_CD           
		     ,  MCCN_CD                 as MCCN_CD                
		     ,  WARD_CD                 as WARD_CD                
		     ,  OROC_CD_OLD             as OROC_CD_OLD            
		     ,  FRNS_DPRT_CD            as FRNS_DPRT_CD           
		     ,  SLIP_CD                 as SLIP_CD                
		     ,  CARE_STTS_CD            as CARE_STTS_CD           
		     ,  RTRN_STTS_CD            as RTRN_STTS_CD           
		     ,  to_char (RTRN_RQST_DT, 'YYYYMMDDhh24miss') as RTRN_RQST_DT           
		     ,  RTRN_RQPR_ID            as RTRN_RQPR_ID           
		     ,  RTRN_CQY                as RTRN_CQY               
		     ,  ORDR_HOLD_DVSN_CD       as ORDR_HOLD_DVSN_CD      
		     ,  to_char (ORDR_HOLD_RGST_DT, 'YYYYMMDDhh24miss') as ORDR_HOLD_RGST_DT      
		     ,  ORDR_HOLD_RGSR_ID       as ORDR_HOLD_RGSR_ID      
		     ,  ADTN_ORDV_CD            as ADTN_ORDV_CD           
		     ,  RGOR_FNDR_ID            as RGOR_FNDR_ID           
		     ,  to_char (RGOR_FINS_DT, 'YYYYMMDDhh24miss') as RGOR_FINS_DT           
		     ,  ORCN_NURS_ID            as ORCN_NURS_ID           
		     ,  MDRP_NO                 as MDRP_NO                
		     ,  to_char (ORCN_DT, 'YYYYMMDDhh24miss') as ORCN_DT                
		     ,  TMPR_ORDR_YN            as TMPR_ORDR_YN           
		     ,  DC_DVSN_CD              as DC_DVSN_CD             
		     ,  DC_ODDR_ID              as DC_ODDR_ID             
		     ,  to_char (DC_ORDR_DT, 'YYYYMMDDhh24miss') as DC_ORDR_DT             
		     ,  DC_CNNU_ID              as DC_CNNU_ID             
		     ,  to_char (DC_CNFR_DT, 'YYYYMMDDhh24miss') as DC_CNFR_DT             
		     ,  SORT_SQNC               as SORT_SQNC              
		     ,  ORDR_UNSL_CTN           as ORDR_UNSL_CTN          
		     ,  INPT_USER_DVSN_CD       as INPT_USER_DVSN_CD      
		     ,  CRTF_DVSN_CD            as CRTF_DVSN_CD           
		     ,  ATHN_ID                 as ATHN_ID                
		     ,  CRTF_IP                 as CRTF_IP                
		     ,  to_char (CRTF_DT, 'YYYYMMDDhh24miss') as CRTF_DT                
		     ,  CLRS_PRJC_CD            as CLRS_PRJC_CD           
		     ,  CLRS_PRJC_DR_ID         as CLRS_PRJC_DR_ID        
		     ,  to_char(OPRT_YMD,'YYYYMMDD') as OPRT_YMD               
		     ,  OPRT_SNO                as OPRT_SNO               
		     ,  ITRN_BSDV_CD            as ITRN_BSDV_CD           
		     ,  SRRQ_CMNT_CTN           as SRRQ_CMNT_CTN          
		     ,  OPRM_CD                 as OPRM_CD                
		     ,  ORDR_IPDV_CD            as ORDR_IPDV_CD           
		     ,  PTAD_IPDV_CD            as PTAD_IPDV_CD           
		     ,  ISTY_CD                 as ISTY_CD                
		     ,  ISTY_ASST_CD            as ISTY_ASST_CD           
		     ,  CNPL_CD                 as CNPL_CD                
		     ,  to_char(PTAD_CLAM_YMD,'YYYYMMDD') as PTAD_CLAM_YMD          
		     ,  to_char(PTAD_CLBA_YMD,'YYYYMMDD') as PTAD_CLBA_YMD          
		     ,  RCST_CD                 as RCST_CD                
		     ,  RPNT_ID                 as RPNT_ID                
		     ,  to_char (RCPC_DT, 'YYYYMMDDhh24miss') as RCPC_DT                
		     ,  VIA_ADMS_RCST_CD        as VIA_ADMS_RCST_CD       
		     ,  RDEX_CD                 as RDEX_CD                
		     ,  to_char(IMPL_YMD,'YYYYMMDD') as IMPL_YMD               
		     ,  to_char(ABC_ENFR_YMD,'YYYYMMDD') as ABC_ENFR_YMD           
		     ,  ABC_MCDP_CD             as ABC_MCDP_CD            
		     ,  ABC_EFDP_CD             as ABC_EFDP_CD            
		     ,  ABC_ODDR_ID             as ABC_ODDR_ID            
		     ,  ABC_ENDR_ID             as ABC_ENDR_ID            
		     ,  VAT_TRGT_YN             as VAT_TRGT_YN            
		     ,  CNNT_ORDR_BNDL_NO       as CNNT_ORDR_BNDL_NO      
		     ,  to_char(ORDR_VALD_STRT_YMD,'YYYYMMDD') as ORDR_VALD_STRT_YMD     
		     ,  to_char(ORDR_VALD_FNSH_YMD,'YYYYMMDD') as ORDR_VALD_FNSH_YMD     
		     ,  IMPL_ORDR_PBLC_NTM      as IMPL_ORDR_PBLC_NTM     
		     ,  IMPL_ORDR_PBLC_LMTT_NTM as IMPL_ORDR_PBLC_LMTT_NTM
		     ,  to_char(ORGL_ORDR_YMD,'YYYYMMDD') as ORGL_ORDR_YMD          
		     ,  ORGL_ORDR_SNO           as ORGL_ORDR_SNO          
		     ,  OPSR_ID1                as OPSR_ID1               
		     ,  OPSR_RA1                as OPSR_RA1               
		     ,  OPSR_ID2                as OPSR_ID2               
		     ,  OPSR_RA2                as OPSR_RA2               
		     ,  OPSR_ID3                as OPSR_ID3               
		     ,  OPSR_RA3                as OPSR_RA3               
		     ,  ANSH_ID                 as ANSH_ID                
		     ,  CPDR_ID                 as CPDR_ID                
		     ,  ENDR_ID                 as ENDR_ID                
		     ,  ORDR_LCDV_CD            as ORDR_LCDV_CD           
		     ,  OPRT_ADIT_RT as OPRT_ADIT_RT           
		     ,  ORGL_NTM                as ORGL_NTM               
		     ,  ORDR_NTM_QTY            as ORDR_NTM_QTY           
		     ,  ANST_O2_ADMN_MI         as ANST_O2_ADMN_MI        
		     ,  to_char (ANST_STRT_DT, 'YYYYMMDDhh24miss') as ANST_STRT_DT           
		     ,  to_char (ANST_FNSH_DT, 'YYYYMMDDhh24miss') as ANST_FNSH_DT           
		     ,  to_char(ENFR_PRRN_YMD,'YYYYMMDD') as ENFR_PRRN_YMD          
		     ,  MAIN_OPDV_CD            as MAIN_OPDV_CD           
		     ,  PTAD_MAIN_OPDV_CD       as PTAD_MAIN_OPDV_CD      
		     ,  RE_OPDV_CD              as RE_OPDV_CD             
		     ,  PTAD_RE_MAIN_OPDV_CD    as PTAD_RE_MAIN_OPDV_CD   
		     ,  ER_ORFR_CD              as ER_ORFR_CD             
		     ,  DADV_CD                 as DADV_CD                
		     ,  ACTN_MTER_DVSN_CD       as ACTN_MTER_DVSN_CD      
		     ,  HGRS_ANST_DVSN_CD       as HGRS_ANST_DVSN_CD      
		     ,  UPLT_RWTT_VL            as UPLT_RWTT_VL           
		     ,  UPRG_RWTT_VL            as UPRG_RWTT_VL           
		     ,  LWLF_RWTT_VL            as LWLF_RWTT_VL           
		     ,  LWRG_RWTT_VL            as LWRG_RWTT_VL           
		     ,  ACTN_NTM                as ACTN_NTM               
		     ,  WRLS_PRIN_YN            as WRLS_PRIN_YN           
		     ,  to_char(HHCR_ORDR_VIST_YMD,'YYYYMMDD') as HHCR_ORDR_VIST_YMD     
		     ,  HHCR_ORDR_NURS_ID       as HHCR_ORDR_NURS_ID      
		     ,  NTRT_CNSL_OPNN_CTN      as NTRT_CNSL_OPNN_CTN     
		     ,  PACS_TRDV_CD            as PACS_TRDV_CD           
		     ,  PACS_ACCS_NO            as PACS_ACCS_NO           
		     ,  to_char (PACS_TRNM_DT, 'YYYYMMDDhh24miss') as PACS_TRNM_DT           
		     ,  PACS_TRNM_STTS_CD       as PACS_TRNM_STTS_CD      
		     ,  to_char(MDFE_APLY_YMD,'YYYYMMDD') as MDFE_APLY_YMD          
		     ,  to_char (EXRM_RPTN_DT, 'YYYYMMDDhh24miss') as EXRM_RPTN_DT           
		     ,  to_char (ENFR_DT, 'YYYYMMDDhh24miss') as ENFR_DT                
		     ,  to_char (INTR_DT, 'YYYYMMDDhh24miss') as INTR_DT                
		     ,  to_char (RPRT_DT, 'YYYYMMDDhh24miss') as RPRT_DT                
		     ,  INDR_ID1                as INDR_ID1               
		     ,  INDR_ID3                as INDR_ID3               
		     ,  ORCN_EDCT_DR_ID         as ORCN_EDCT_DR_ID        
		     ,  ORCN_DTTN_ID            as ORCN_DTTN_ID           
		     ,  DLYS_RCRD_CTN           as DLYS_RCRD_CTN          
		     ,  ZNLR_RSCN_DVSN_CD       as ZNLR_RSCN_DVSN_CD      
		     ,  MTRI_FRNS_YN            as MTRI_FRNS_YN           
		     ,  to_char (MTRI_FRNS_DT, 'YYYYMMDDhh24miss') as MTRI_FRNS_DT           
		     ,  MTRI_FRPR_ID            as MTRI_FRPR_ID           
		     ,  ER_FRNS_RQST_YN         as ER_FRNS_RQST_YN        
		     ,  IMLN_ORDR_YN            as IMLN_ORDR_YN           
		     ,  SSPC_SCIN_NM            as SSPC_SCIN_NM           
		     ,  ORDR_CRTN_DVSN_CD       as ORDR_CRTN_DVSN_CD      
		     ,  ORDR_CRTN_LNKN_NO       as ORDR_CRTN_LNKN_NO      
		     ,  to_char (ORDR_UPDT_DT, 'YYYYMMDDhh24miss') as ORDR_UPDT_DT           
		     ,  ORDR_UPDR_ID            as ORDR_UPDR_ID           
		     ,  HGRS_PTRT_RESN_CD       as HGRS_PTRT_RESN_CD      
		     ,  HGRS_PTRT_YN            as HGRS_PTRT_YN           
		     ,  MLTI_FETL_CNT           as MLTI_FETL_CNT          
		     ,  DOPP_EXMN_YN            as DOPP_EXMN_YN           
		     ,  INPY_ORRE_CTN           as INPY_ORRE_CTN          
		     ,  OROC_DPRT_CD            as OROC_DPRT_CD
		     ,  SPOR_BNDL_NM            as SPOR_BNDL_NM
		     ,  SPOR_BNDL_NO         as SPOR_BNDL_NO
		     ,  SUB_TYPE_CD            as SUB_TYPE_CD
		     ,  OPSI_DVSN_CD         as OPSI_DVSN_CD
		     ,  CPRS_RT                   as CPRS_RT
		     ,  CRNF_SUTR_YN          as CRNF_SUTR_YN
		     ,  SCRG_INPY_ONBR_RT  as SCRG_INPY_ONBR_RT
		     ,  CNSN_RLTD_YN       as CNSN_RLTD_YN
		     ,  CNSN_RLTD_MCDP_CD  as CNSN_RLTD_MCDP_CD
		     ,  PPAB_CNSR_OPRS_CD  as PPAB_CNSR_OPRS_CD
		     ,  CSCR_CD            as CSCR_CD
		     ,  KLGR_CD            as KLGR_CD /* K-L Grading코드 */
		     ,  KLGR_CTN           as KLGR_CTN /* K-L Grading내용 */
		  from  MDTRTORDT
		 where  PTNO = #{ptno}
		   and  ORDR_YMD = to_date (#{ordrYmd},'YYYYMMDD')
		   and  ORDR_SNO = #{ordrSno}    
	</select>



</mapper>