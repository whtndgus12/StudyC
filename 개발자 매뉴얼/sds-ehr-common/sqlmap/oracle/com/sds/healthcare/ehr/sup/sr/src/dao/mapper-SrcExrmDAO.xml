<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    SQL File Name : mapper_SrcExrmDAO_sql.xml 
    Description :                                      SrcExrmDAO 클래스
                  -->
<mapper namespace="SrcExrmDAO">


	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList2-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="userNm" column="USER_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList2 () 
        Description :                                           검사실리스트 Select
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList2-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList2"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList2-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList2*/
				<![CDATA[
		   select /*+ srd_szroomc_l01$S01_검사실리스트 Select */
				  a.EXRM_CD as EXRM_CD,			                        /*  검사실코드   */
				  a.EXRM_NM as EXRM_NM,			                        /*  검사실명     */
				  to_char(a.LAST_UPDT_DT,'yyyy-mm-dd') as LAST_UPDT_DT,		  /*  수정일시     */
				  b.USER_NM as USER_NM	                     /*  수정자        */
			 from SZROOMCMT a,
				  CCUSRDPHT b
			where a.EXRM_CD = a.EXRM_CD
			  and a.EXCF_CD  = #{excfCd}
			  and a.INTR_SCTN_DVSN_CD   = #{sctnDvsnCd}
			  and a.LAST_UPDR_ID   = b.USER_ID(+)
		   order by
		         a.SCRN_SORT_SQNC  ,a.EXRM_CD
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList3-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="colrCd" column="COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm" column="USER_NM"/>
		<result property="tlno" column="TLNO"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="sctnDvsnCd" column="SCTN_DVSN_CD"/>
		<result property="exctDprtCd2" column="EXCT_DPRT_CD_2"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exrmLcdvCd" column="EXRM_LCDV_CD"/>
		<result property="exctDprtCd3" column="EXCT_DPRT_CD_3"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList3 () 
        Description :                                           검사실리스트 M Select
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList3-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList3"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList3-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList3*/
		<![CDATA[
		   select   /*+ srd_szroomc_l05$S01_검사실리스트 M Select  */
			   					a.EXCF_CD as EXCF_CD                                                       /*  검사분류             */
			   				 ,  rpad(a.EXRM_CD, 10, '          ') as EXRM_CD		                          /*  검사실코드           */
			   				 ,  a.EXRM_NM as EXRM_NM                                                       /*  검사실명             */
			   				 ,  a.EXRM_COLR_CD as COLR_CD                                                      /*  COLOR                */
			   				 ,  a.EXRM_DVSN_CD as EXRM_DVSN_CD                                                  /*  검사실구분           */
			   				 ,  a.EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                                             /*  검사장비관리여부     */
			   				 ,  nvl(a.APNT_FRMT_CD, 'N') as APNT_FRMT_CD                                        /*  예약형태             */
			   				 ,  a.CHIE_ENGN_ID as CHIE_ENGN_ID                                                  /*  주임기사             */
			   				 ,  b.USER_NM as USER_NM		                                                 /*  주임기사명           */
			   				 ,  a.TLNO as TLNO                                                          /*  전화번호             */
			   				 ,  a.EXCT_DPRT_CD as EXCT_DPRT_CD                                                  /*  의료원검사실분류코드 */
			   				 ,  a.SCRN_SORT_SQNC as SCRN_SORT_SQNC                                                /*  표시순서             */
			   				 ,  a.INTR_SCTN_DVSN_CD as SCTN_DVSN_CD                          /*  SECTION 구분         */
			   				 ,  '' as EXCT_DPRT_CD_2                                            /*  스케줄타입   a.SCHDTYP_ASIS         */
			   				 ,  a.EXRM_LCTN_NM as EXRM_LCTN_NM                                                  /*  검사실IP             */
			   				 ,  to_char(a.FRST_RGST_DT, 'yyyymmddhh24miss') as FRST_RGST_DT                     /*  등록일자             */
			   				 ,  a.LAST_UPDR_ID as LAST_UPDR_ID                                                  /*  수정자ID             */
			   				 ,  c.USER_NM as USER_NM_1                                       /*  수정자명             */
			   				 ,  a.LAST_UPDT_IP as LAST_UPDT_IP                                                  /*  수정자IP             */
			   				 ,  to_char(a.LAST_UPDT_DT, 'yyyymmddhh24miss') as LAST_UPDT_DT                     /*  수정일시             */
			   				 ,  to_char(a.FNSH_DT, 'yyyymmddhh24miss') as FNSH_DT                          /*  종료일시             */
			   				 ,  nvl(a.USE_FNSH_YN, 'N') as USE_FNSH_YN                                         /*  검사실폐쇄여부       */
			   				 ,  a.EXRM_HSDV_CD as EXRM_LCDV_CD
			   				 ,  ( select  ABRV_DPRT_CD from HZDEPTMMT where DPRT_CD = a.EXCT_DPRT_CD group by ABRV_DPRT_CD ) as EXCT_DPRT_CD_3
					 from
						   SZROOMCMT a
						,  CCUSRDPHT b
						,  CCUSRDPHT c
					where
						   a.EXRM_CD       like #{exrmCd} ||'%'
					  and  a.EXCF_CD       = #{excfCd}
					  /*  영상의학(SR)과 생리학(SS)일때는 조건절에서 사용하지 않는다. 2016.06.23 */
			   /*              and  a.DTLS_EXCF_CD  is null */
					  and  (
								 ( #{excfCd} in ('SR', 'SM', 'SS') )
							 or  ( #{excfCd} not in ('SR', 'SM', 'SS') and a.DTLS_EXCF_CD  is null )
						   )
					  and  b.USER_ID(+)    = a.CHIE_ENGN_ID
					  and  c.USER_ID(+)    = a.LAST_UPDR_ID
					  and  ( (a.EXCF_CD = 'SR') or ( a.EXCF_CD <> 'SR' and ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate)) ) )
					order
					   by  a.SCRN_SORT_SQNC  ,a.EXRM_CD
			]]>
	</select>






    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmUPdaTE () 
        Description :                                           검사실 Update
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmUPdaTE"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  >
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmUPdaTE*/
		<![CDATA[
		   update  /*+ srd_szroomc_u01$I01_검사실 Update  */
				   SZROOMCMT
			  set
			   			 INTR_SCTN_DVSN_CD    = #{intrSctnDvsnCd},            /*  Section Type */
			   			LAST_UPDR_ID    = #{gvLginId},                       /*  수정자ID     */
			   			LAST_UPDT_IP    = #{gvUserIp},                       /*  수정자IP     */
			   			LAST_UPDT_DT    = sysdate ,                           /*  수정일시      */
			   			LAST_UPDT_CLNT_PRGM_ID =#{gvClntPrgmId},
			   			FRST_RGST_SRVR_PRGM_ID =#{gvSrvrPrgmId}
			where
				   EXRM_CD   = #{exrmCd}            /*  검사실코드   */
			  and  EXCF_CD   = #{excfCd}            /*  검사분류     */
			]]>
	</update>


	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm1-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm1 () 
        Description :                                           검사실정보 조회
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm1-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm1"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm1-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm1*/
		<![CDATA[
		   select  /*+ swd_roomcmt_l01$S01_검사실정보 조회 */
				  a.EXCF_CD as EXCF_CD                                     /*  검사분류             */
			   		 , rpad(a.EXRM_CD,10,'          ') as EXRM_CD               /*  검사실코드           */
		             , a.EXRM_CD  as EXRM_CD_1                            /*  검사실코드 공백제거   */
			   		 , a.EXRM_NM as EXRM_NM                                     /*  검사실명             */
			   		 , a.EXRM_COLR_CD as EXRM_COLR_CD                                /*  COLOR             */
			   		 , a.EXRM_DVSN_CD as EXRM_DVSN_CD                                /*  검사실구분           */
			   		 , a.EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                           /*  검사장비관리여부     */
			   		 , nvl(a.APNT_FRMT_CD,'N') as APNT_FRMT_CD                       /*  예약형태             */
			   		 , a.CHIE_ENGN_ID as CHIE_ENGN_ID                                /*  주임기사             */
			   		 , b.USER_NM as USER_NM_1                                     /*  주임기사명           */
			   		 , a.TLNO as TLNO                                        /*  전화번호             */
			   		 , nvl(a.SCRN_SORT_SQNC,0) as SCRN_SORT_SQNC                       /*  표시순서             */
			   		 , a.SCHD_TYPE_CD as SCHD_TYP_CD                                /*  스케줄타입           */
			   		 , a.HGRN_EXRM_CD as HGRN_EXRM_CD                                /*  상위검사실코드       */
				, a.EXMN_SCTN_CD as EXMN_SCTN_CD                                /*  검사섹션코드         */
			   		 , a.INTR_SCTN_DVSN_CD as INTR_SCTN_DVSN_CD                           /*  SECTION 구분        */
			   		 , a.EXRM_LCTN_NM as EXRM_LCTN_NM                                /*  검사실IP           */
			   		 , a.FRST_RGST_DT as FRST_RGST_DT                                /*  등록일자             */
			   		 , a.LAST_UPDR_ID as LAST_UPDR_ID                                /*  수정자ID           */
			   		 , c.USER_NM as USER_NM_2                                     /*  수정자명             */
			   		 , a.LAST_UPDT_IP as LAST_UPDT_IP                                /*  수정자IP           */
			   		 , a.LAST_UPDT_DT as LAST_UPDT_DT                                /*  수정일시             */
			   		 , a.FNSH_DT as FNSH_DT                                     /*  종료일시             */
			   		 , nvl(a.USE_FNSH_YN,'N') as USE_FNSH_YN                        /*  검사실폐쇄여부       */
				, a.EXCT_DPRT_CD as EXCT_DPRT_CD                                /*  의료원검사실분류코드 */
				, a.EXRM_HSDV_CD as EXRM_HSDV_CD                                /*  검사실병원구분코드   */
			 from
				  SZROOMCMT a       /*  검사실*/
				, CCUSRDPHT b       /*  사용자진료조직관계이력*/
				, CCUSRDPHT c
			where
				  a.EXRM_NM      like #{exrmNm}||'%'
			  and a.EXCF_CD      = #{excfCd}
			  and nvl(a.EXMN_SCTN_CD, '*') like #{exmnSctnCd} || '%'
			  and b.USER_ID(+)   = a.CHIE_ENGN_ID
			  and c.USER_ID(+)   = a.LAST_UPDR_ID
			  and ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate))
		      and nvl(a.CLSR_YN, 'N') = 'N'
			order by
				 a.SCRN_SORT_SQNC  ,a.EXRM_CD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm7-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm7 () 
        Description :                                           검사실정보 조회2
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm7-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm7"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm7-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm7*/
		<![CDATA[
		   select  /*+ swd_roomcmt_l02$S01_검사실정보 조회2 */
			a.EXCF_CD as EXCF_CD                                     /*  검사분류             */
			, rpad(a.EXRM_CD,10,'          ') as EXRM_CD               /*  검사실코드           */
		    , a.EXRM_CD as EXRM_CD_1                                    /*  검사실코드           */
			, a.EXRM_NM as EXRM_NM                                     /*  검사실명             */
			, a.EXRM_COLR_CD as EXRM_COLR_CD                                /*  COLOR             */
			, a.EXRM_DVSN_CD as EXRM_DVSN_CD                                /*  검사실구분           */
			, a.EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                           /*  검사장비관리여부     */
			, nvl(a.APNT_FRMT_CD,'N') as APNT_FRMT_CD                       /*  예약형태             */
			, a.CHIE_ENGN_ID as CHIE_ENGN_ID                                /*  주임기사             */
			, b.USER_NM as USER_NM_1                                     /*  주임기사명           */
			, a.TLNO as TLNO                                        /*  전화번호             */
			, a.SCRN_SORT_SQNC as SCRN_SORT_SQNC                              /*  표시순서             */
			, a.SCHD_TYPE_CD as SCHD_TYP_CD                                /*  스케줄타입           */
			, a.HGRN_EXRM_CD as HGRN_EXRM_CD                                /*  상위검사실코드       */
			, a.EXMN_SCTN_CD as EXMN_SCTN_CD                                /*  검사섹션코드         */
			, a.INTR_SCTN_DVSN_CD as INTR_SCTN_DVSN_CD                           /*  SECTION 구분        */
			, a.EXRM_LCTN_NM as EXRM_LCTN_NM                                /*  검사실IP           */
			, a.FRST_RGST_DT as FRST_RGST_DT                                /*  등록일자             */
			, a.LAST_UPDR_ID as LAST_UPDR_ID                                /*  수정자ID           */
			, c.USER_NM as USER_NM_2                                     /*  수정자명             */
			, a.LAST_UPDT_IP as LAST_UPDT_IP                                /*  수정자IP           */
			, a.LAST_UPDT_DT as LAST_UPDT_DT                                /*  수정일시             */
			, a.FNSH_DT as FNSH_DT                                     /*  종료일시             */
			, nvl(a.USE_FNSH_YN,'N') as USE_FNSH_YN                        /*  검사실폐쇄여부       */
			, a.EXCT_DPRT_CD as EXCT_DPRT_CD                                /*  의료원검사실분류코드 */
			, a.EXRM_HSDV_CD as EXRM_HSDV_CD                                /*  검사실병원구분코드   */
			 from
				  SZROOMCMT a               /*  검사실 */
				, (select /*+ INDEX(SWSCHDCT SWSCHDCT_PK) */
			   				   F_A.SCHD_TYP_CD
			   			  from swschtypt F_A
			   			 where F_A.SCHD_DTLS_TYP_CD = 'WD'
			   			   and F_A.EXCF_CD   = #{excfCd}
			   			   and nvl(F_A.SCHD_DTLS_TYP_CD_USE_YN,'Y') = 'Y'
			   			 group
			   				by  F_A.SCHD_TYP_CD
			   		   ) d
			   		 , CCUSRDPHT b               /*  사용자진료조직관계이력*/
			   		 , CCUSRDPHT c
			   	 where
			   		   a.EXRM_CD      like #{exrmCd}||'%'
			   	   and a.EXCF_CD      = #{excfCd}
			       and nvl(a.EXMN_SCTN_CD, '*') like #{exmnSctnCd} || '%'
			   	   and d.SCHD_TYP_CD  = a.EXRM_CD
			       and b.USER_ID(+)   = a.CHIE_ENGN_ID
			       and c.USER_ID(+)   = a.LAST_UPDR_ID
			   	   and ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate))
		           and nvl(a.CLSR_YN, 'N') = 'N'
			   	 order by
			       		a.SCRN_SORT_SQNC  ,a.EXRM_CD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm2-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm2 () 
        Description :                                           검사실정보 조회3
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm2-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm2"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm2-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm2*/
		<![CDATA[
		   select  /*+ swd_roomcmt_l03$S01_검사실정보 조회3 */
				  a.EXCF_CD                        as EXCF_CD            /*  검사분류             */
			   		 , rpad(a.EXRM_CD,10,'          ')  as EXRM_CD            /*  검사실코드           */
		             , a.EXRM_CD as EXRM_CD_1            /*  검사실코드           */
			   		 , a.EXRM_NM                        as EXRM_NM            /*  검사실명             */
			   		 , a.EXRM_COLR_CD                   as EXRM_COLR_CD       /*  COLOR             */
			   		 , a.EXRM_DVSN_CD                   as EXRM_DVSN_CD       /*  검사실구분           */
			   		 , a.EXMN_EQPM_MNGM_YN              as EXMN_EQPM_MNGM_YN  /*  검사장비관리여부     */
			   		 , nvl(a.APNT_FRMT_CD,'N')          as APNT_FRMT_CD       /*  예약형태             */
			   		 , a.CHIE_ENGN_ID                   as CHIE_ENGN_ID       /*  주임기사             */
			   		 , b.USER_NM                        as USER_NM_1          /*  주임기사명           */
			   		 , a.TLNO                           as TLNO               /*  전화번호             */
			   		 , a.SCRN_SORT_SQNC                 as SCRN_SORT_SQNC     /*  표시순서             */
			   		 , a.SCHD_TYPE_CD                   as SCHD_TYP_CD        /*  스케줄타입           */
			   		 , a.HGRN_EXRM_CD                   as HGRN_EXRM_CD       /*  상위검사실코드       */
			   		 , a.DTLS_EXCF_CD                   as EXMN_SCTN_CD       /*  검사섹션코드         */
			   		 , a.INTR_SCTN_DVSN_CD              as INTR_SCTN_DVSN_CD  /*  SECTION 구분        */
			   		 , a.EXRM_LCTN_NM                   as EXRM_LCTN_NM       /*  검사실IP           */
			   		 , a.FRST_RGST_DT                   as FRST_RGST_DT       /*  등록일자             */
			   		 , a.LAST_UPDR_ID                   as LAST_UPDR_ID       /*  수정자ID           */
			   		 , c.USER_NM                        as USER_NM_2          /*  수정자명             */
			   		 , a.LAST_UPDT_IP                   as LAST_UPDT_IP       /*  수정자IP           */
			   		 , a.LAST_UPDT_DT                   as LAST_UPDT_DT       /*  수정일시             */
			   		 , a.FNSH_DT                        as FNSH_DT            /*  종료일시             */
			   		 , nvl(a.USE_FNSH_YN,'N')           as USE_FNSH_YN        /*  검사실폐쇄여부       */
				, a.EXCT_DPRT_CD                   as EXCT_DPRT_CD       /*  의료원검사실분류코드 */
				, a.EXRM_HSDV_CD                   as EXRM_HSDV_CD       /*  검사실병원구분코드   */
			 from
				  SZROOMCMT a       /*  검사실*/
				, CCUSRDPHT b       /*  사용자진료조직관계이력*/
				, CCUSRDPHT c
			where
				  a.EXRM_CD  like #{exrmCd}||'%'
			  and a.EXCF_CD      = #{excfCd}
			  and ( ( #{dtlsExcfCd} is null )
			   			 or ( a.DTLS_EXCF_CD = #{dtlsExcfCd} ) )
			  and  nvl(a.EXMN_SCTN_CD, '*')  like #{exmnSctnCd} || '%'
			  and  b.USER_ID(+)    = a.CHIE_ENGN_ID
			  and  c.USER_ID(+)    = a.LAST_UPDR_ID
			  and  ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate))
		      and  nvl(a.CLSR_YN, 'N') = 'N'
		    order
			  by  a.SCRN_SORT_SQNC , a.EXRM_CD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm3-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm3 () 
        Description :                                           검사실정보 조회4
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm3-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm3"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm3-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm3*/
		<![CDATA[
		   select  /*+ swd_roomcmt_l04$S01_검사실정보 조회4 */
			   		   x.EXAMTYP        as EXCF_CD
			   		 , x.ROOMCODE       as EXRM_CD
		             , x.ROOMCODE1       as EXRM_CD_1
			   		 , x.ROOMNAME       as EXRM_NM
			   		 , x.COLORCD        as EXRM_COLR_CD
			   		 , x.ROOMSECT       as EXRM_DVSN_CD
			   		 , x.EQUSEYN        as EXMN_EQPM_MNGM_YN
			   		 , x.RSVTYP         as APNT_FRMT_CD
			   		 , x.CHIFTECH       as CHIE_ENGN_ID
			   		 , x.USERNAME1      as USER_NM_1
			   		 , x.TELNO          as TLNO
			   		 , x.SEQNO          as SCRN_SORT_SQNC
			   		 , x.SCHDTYP        as SCHD_TYP_CD
			   		 , x.GDEPTCD        as HGRN_EXRM_CD
			   		 , x.EXMN_SCTN_CD   as EXMN_SCTN_CD
			   		 , x.SECTYP         as INTR_SCTN_DVSN_CD
			   		 , x.ROOMIP         as EXRM_LCTN_NM
			   		 , x.REGTIME        as FRST_RGST_DT
			   		 , x.EDITID         as LAST_UPDR_ID
			   		 , x.USERNAME2      as USER_NM_2
			   		 , x.EDITIP         as LAST_UPDT_IP
			   		 , x.EDITTIME       as LAST_UPDT_DT
			   		 , x.ENDTIME        as FNSH_DT
			   		 , x.CLOSEYN        as USE_FNSH_YN
			   		 , x.DEPTCODE       as EXCT_DPRT_CD
			   		 , x.LOCATFG        as EXRM_HSDV_CD
			from (
				   select
			   				   a.EXCF_CD                         EXAMTYP     /*  검사분류             */
			   				 , rpad(a.EXRM_CD,10,'          ')   ROOMCODE    /*  검사실코드           */
		                     , a.EXRM_CD  ROOMCODE1                            /*  검사실코드 공백제거   */
			   				 , a.EXRM_NM                         ROOMNAME    /*  검사실명             */
			   				 , a.EXRM_COLR_CD                    COLORCD     /*  COLOR             */
			   				 , a.EXRM_DVSN_CD                    ROOMSECT    /*  검사실구분           */
			   				 , a.EXMN_EQPM_MNGM_YN               EQUSEYN     /*  검사장비관리여부     */
			   				 , nvl(a.APNT_FRMT_CD,'N')           RSVTYP      /*  예약형태             */
			   				 , a.CHIE_ENGN_ID                    CHIFTECH    /*  주임기사             */
			   				 , b.USER_NM                         USERNAME1   /*  주임기사명           */
			   				 , a.TLNO                            TELNO       /*  전화번호             */
			   				 , a.SCRN_SORT_SQNC                  SEQNO       /*  표시순서             */
			   				 , a.SCHD_TYPE_CD                    SCHDTYP     /*  스케줄타입           */
			   				 , a.HGRN_EXRM_CD                    GDEPTCD     /*  상위검사실코드       */
			   				 , a.EXMN_SCTN_CD                    EXMN_SCTN_CD /*  검사섹션코드         */
			   				 , a.INTR_SCTN_DVSN_CD               SECTYP      /*  SECTION 구분        */
			   				 , a.EXRM_LCTN_NM                    ROOMIP      /*  검사실IP           */
			   				 , a.FRST_RGST_DT                    REGTIME     /*  등록일자             */
			   				 , a.LAST_UPDR_ID                    EDITID      /*  수정자ID           */
			   				 , c.USER_NM                         USERNAME2   /*  수정자명             */
			   				 , a.LAST_UPDT_IP                    EDITIP      /*  수정자IP           */
			   				 , a.LAST_UPDT_DT                    EDITTIME    /*  수정일시             */
			   				 , a.FNSH_DT                         ENDTIME     /*  종료일시             */
			   				 , nvl(a.USE_FNSH_YN,'N')            CLOSEYN     /*  검사실폐쇄여부       */
			   				 , a.EXCT_DPRT_CD                    DEPTCODE
			   				 , a.EXRM_HSDV_CD                    LOCATFG
			   			  from
			   				   SZROOMCMT a       /*  검사실*/
			   				 , CCUSRDPHT b       /*  사용자진료조직관계이력*/
			   				 , CCUSRDPHT c
			   			 where
			   				   a.EXRM_CD  like #{exrmCd}||'%'
			   			   and a.EXCF_CD      = #{excfCd}
			   			   and (( #{dtlsExcfCd} is null )
			   					or ( a.DTLS_EXCF_CD = #{dtlsExcfCd} ) )
			   			   and nvl(a.EXMN_SCTN_CD, '*')  like #{exmnSctnCd} || '%'
			   			   and b.USER_ID(+)    = a.CHIE_ENGN_ID
			   			   and c.USER_ID(+)    = a.LAST_UPDR_ID
			   			   and (
			   					 (a.EXCF_CD = 'SR')   /*    영상은 종료된 검사실도 조회 */
			   					  or
			   					 (
							   a.EXCF_CD != 'SR'
			   						and
			   					   ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate))
			   					  )
			   				   )
		                   and nvl(a.CLSR_YN, 'N') = 'N'
			   			 union all
			   			select
			   				   a.EXCF_CD                         EXAMTYP     /*  검사분류             */
			   				 , rpad(a.EXRM_CD,10,'          ')   ROOMCODE    /*  검사실코드           */
		                     , a.EXRM_CD  ROOMCODE1                            /*  검사실코드 공백제거   */
			   				 , a.EXRM_NM                         ROOMNAME    /*  검사실명             */
			   				 , a.EXRM_COLR_CD                    COLORCD     /*  COLOR             */
			   				 , a.EXRM_DVSN_CD                    ROOMSECT    /*  검사실구분           */
			   				 , a.EXMN_EQPM_MNGM_YN               EQUSEYN     /*  검사장비관리여부     */
			   				 , nvl(a.APNT_FRMT_CD,'N')           RSVTYP      /*  예약형태             */
			   				 , a.CHIE_ENGN_ID                    CHIFTECH    /*  주임기사             */
			   				 , b.USER_NM                         USERNAME1   /*  주임기사명           */
			   				 , a.TLNO                            TELNO       /*  전화번호             */
			   				 , a.SCRN_SORT_SQNC                  SEQNO       /*  표시순서             */
			   				 , a.SCHD_TYPE_CD                    SCHDTYP     /*  스케줄타입           */
			   				 , a.HGRN_EXRM_CD                    GDEPTCD     /*  상위검사실코드       */
						, a.EXMN_SCTN_CD                    EXMN_SCTN_CD /*  검사섹션코드         */
			   				 , a.INTR_SCTN_DVSN_CD               SECTYP      /*  SECTION 구분        */
			   				 , a.EXRM_LCTN_NM                    ROOMIP      /*  검사실IP           */
			   				 , a.FRST_RGST_DT                    REGTIME     /*  등록일자             */
			   				 , a.LAST_UPDR_ID                    EDITID      /*  수정자ID           */
			   				 , c.USER_NM                         USERNAME2   /*  수정자명             */
			   				 , a.LAST_UPDT_IP                    EDITIP      /*  수정자IP           */
			   				 , a.LAST_UPDT_DT                    EDITTIME    /*  수정일시             */
			   				 , a.FNSH_DT                         ENDTIME     /*  종료일시             */
			   				 , nvl(a.USE_FNSH_YN,'N')            CLOSEYN     /*  검사실폐쇄여부       */
			   				 , a.EXCT_DPRT_CD                    DEPTCODE
			   				 , a.EXRM_HSDV_CD                    LOCATFG     /*  의료원검사실분류코드 */
			   			  from
			   				   SZROOMCMT a       /*  검사실*/
			   				 , CCUSRDPHT b       /*  사용자진료조직관계이력*/
			   				 , CCUSRDPHT c
			   			 where
			   				   a.EXRM_CD = 'EN7'
			   			   and #{excfCd} = 'SS'
			   			   and a.EXCF_CD      = 'SO'
			   			   and (( #{dtlsExcfCd} is null )
			   					  or ( a.DTLS_EXCF_CD = #{dtlsExcfCd} ) )
			   			   and nvl(a.EXMN_SCTN_CD, '*')  like #{exmnSctnCd} || '%'
			   			   and b.USER_ID(+)    = a.CHIE_ENGN_ID
			   			   and c.USER_ID(+)    = a.LAST_UPDR_ID
			   			   and ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate))
		                   and nvl(a.CLSR_YN, 'N') = 'N'
			   		  ) x
			 order by
			   			SCRN_SORT_SQNC  ,EXRM_CD 
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm4-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm4 () 
        Description :                                           검사실정보 조회5
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm4-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm4"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm4-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm4*/
		<![CDATA[
		   select  /*+ swd_roomcmt_l05$S01_검사실정보 조회5 */
			   		   a.EXCF_CD as EXCF_CD                          /*  검사분류             */
			   		 , rpad(a.EXRM_CD,10,'          ') as EXRM_CD    /*  검사실코드           */
		             ,a.EXRM_CD as EXRM_CD_1    /*  검사실코드           */
			   		 , a.EXRM_NM as EXRM_NM                          /*  검사실명             */
			   		 , a.EXRM_COLR_CD as EXRM_COLR_CD                     /*  COLOR             */
			   		 , a.EXRM_DVSN_CD as EXRM_DVSN_CD                     /*  검사실구분           */
			   		 , a.EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                /*  검사장비관리여부     */
			   		 , nvl(a.APNT_FRMT_CD,'N') as APNT_FRMT_CD            /*  예약형태             */
			   		 , a.CHIE_ENGN_ID as CHIE_ENGN_ID                     /*  주임기사             */
			   		 , b.USER_NM as USER_NM_1                /*  주임기사명           */
			   		 , a.TLNO as TLNO                             /*  전화번호             */
			   		 , a.SCRN_SORT_SQNC as SCRN_SORT_SQNC                   /*  표시순서             */
			   		 , a.SCHD_TYPE_CD as SCHD_TYP_CD                     /*  스케줄타입           */
			   		 , a.HGRN_EXRM_CD as HGRN_EXRM_CD                     /*  상위검사실코드       */
			   		 , a.EXMN_SCTN_CD as EXMN_SCTN_CD                     /*  검사섹션코드         */
			   		 , a.INTR_SCTN_DVSN_CD as INTR_SCTN_DVSN_CD                /*  SECTION 구분        */
			   		 , a.EXRM_LCTN_NM as EXRM_LCTN_NM                     /*  검사실IP           */
			   		 , a.FRST_RGST_DT as FRST_RGST_DT                     /*  등록일자             */
			   		 , a.LAST_UPDR_ID as LAST_UPDR_ID                     /*  수정자ID           */
			   		 , c.USER_NM as USER_NM_2                /*  수정자명             */
			   		 , a.LAST_UPDT_IP as LAST_UPDT_IP                     /*  수정자IP           */
			   		 , a.LAST_UPDT_DT as LAST_UPDT_DT                     /*  수정일시             */
			   		 , a.FNSH_DT as FNSH_DT                          /*  종료일시             */
			   		 , nvl(a.USE_FNSH_YN,'N') as USE_FNSH_YN             /*  검사실폐쇄여부       */
			   		 , a.EXCT_DPRT_CD as EXCT_DPRT_CD                     /*  의료원검사실분류코드 */
			   		 , a.EXRM_HSDV_CD as EXRM_HSDV_CD                     /*  검사실병원구분코드   */
			   	 from
			   		   SZROOMCMT a   /*  검사실*/
			   		 , CCUSRDPHT b   /*  사용자진료조직관계이력*/
			   		 , CCUSRDPHT c
		   where
			   		  a.EXRM_CD  like #{exrmCd}||'%'
			   	  and ( ( #{excfCd} ='SW') or ( #{excfCd} <> 'SW'   and a.EXCF_CD  = #{excfCd}) )
			   	  and (( #{dtlsExcfCd} is null )
			   			or ( a.DTLS_EXCF_CD = #{dtlsExcfCd} ) )
			   	  and nvl(a.EXMN_SCTN_CD, '*')  like #{exmnSctnCd} || '%'
			   	  and b.USER_ID(+)    = a.CHIE_ENGN_ID
			   	  and c.USER_ID(+)    = a.LAST_UPDR_ID
			   	  and (
			   			(a.EXCF_CD = 'SR')   /*    영상은 종료된 검사실도 조회 */
			   			or
			   			(
			   			  a.EXCF_CD != 'SR'
			   			  and
			   			  ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate))
			   			)
			   		  )
		          and nvl(a.CLSR_YN, 'N') = 'N'
			order by
			   		  SCRN_SORT_SQNC  ,EXRM_CD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmFnshYn-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="cct" column="CCT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmFnshYn () 
        Description :                                           검사실종료여부 및 대기인원조회
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmFnshYn-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmFnshYn"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmFnshYn-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmFnshYn*/
		<![CDATA[
		   select  /*+ swd_roomcmt_l07$S01_검사실종료여부 및 대기인원조회 */
			   			a.EXRM_CD as EXRM_CD
			   		 ,  nvl(a.USE_FNSH_YN, 'N') as USE_FNSH_YN
			   		 ,  count(b.PTNO) as CCT
			   	  from
			   			SZROOMCMT a          /* 검사실*/
			   		 ,  SWWORKMMT b          /* 환자검사작업관리*/
			   	 where  a.EXRM_CD >= 'G01'
			   	   and  a.EXRM_CD <= 'G09'
			   	   and  a.EXCF_CD  = 'SR'
			   	   and  b.RPTN_DT(+) >= trunc(sysdate)
			   	   and  b.RPTN_DT(+) <  trunc(sysdate)+1
			   	   and  b.EXCF_CD(+) = 'SR'
			   	   and  b.EXRM_CD(+) = a.EXRM_CD
			   	   and  b.EXMN_STTS_CD(+) = 'C'
			   	 group  by
			   			a.EXRM_CD
			   		 ,  nvl(a.USE_FNSH_YN, 'N')
			   	 order by 1
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm5-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm5 () 
        Description :                                           검사실정보 조회 in 제어코드
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm5-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm5"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm5-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm5*/
				<![CDATA[
				   select  /*+ swd_roomcmt_l08$S01_검사실정보 조회 in 제어코드 */
			   b.EXCF_CD                         as EXCF_CD
			,  rpad(b.EXRM_CD,10,'          ')   as EXRM_CD
		    ,  b.EXRM_CD   as EXRM_CD_1
			,  a.EXMN_DTLS_CTRL_NM               as EXRM_NM
			,  b.EXRM_COLR_CD                    as EXRM_COLR_CD
			,  b.EXRM_DVSN_CD                    as EXRM_DVSN_CD
			,  b.EXMN_EQPM_MNGM_YN               as EXMN_EQPM_MNGM_YN
			,  nvl(b.APNT_FRMT_CD,'N')           as APNT_FRMT_CD
			,  b.CHIE_ENGN_ID                    as CHIE_ENGN_ID
			,  c.USER_NM                         as USER_NM_1
			,  b.TLNO                            as TLNO
			,  a.CTRL_SORT_SQNC                  as SCRN_SORT_SQNC
			,  b.SCHD_TYPE_CD                    as SCHD_TYP_CD
			,  b.HGRN_EXRM_CD                    as HGRN_EXRM_CD
			,  b.EXMN_SCTN_CD                    as EXMN_SCTN_CD
			,  b.INTR_SCTN_DVSN_CD               as INTR_SCTN_DVSN_CD
			,  b.EXRM_LCTN_NM                    as EXRM_LCTN_NM
			,  b.FRST_RGST_DT                    as FRST_RGST_DT
			,  b.LAST_UPDR_ID                    as LAST_UPDR_ID
			,  d.USER_NM                         as USER_NM_2
			,  b.LAST_UPDT_IP                    as LAST_UPDT_IP
			,  b.LAST_UPDT_DT                    as LAST_UPDT_DT
			,  b.FNSH_DT                         as FNSH_DT
			,  nvl(b.USE_FNSH_YN,'N')            as USE_FNSH_YN
			,  b.EXCT_DPRT_CD                    as EXCT_DPRT_CD
			,  b.EXRM_HSDV_CD                    as EXRM_HSDV_CD
		 from  SZCTRLMMT a
			,  SZROOMCMT b
			,  CCUSRDPHT c
			,  CCUSRDPHT d
		where  a.EXMN_CTRL_CD           = #{exrmCd}
		  and  trunc(sysdate)           between nvl(a.APST_YMD, trunc(sysdate))
											and nvl(a.APFN_YMD, trunc(sysdate)) + 0.99999
		  and  b.EXRM_CD                = a.EXMN_DTLS_CTRL_CD
		  and  b.EXCF_CD                = #{excfCd}
		  and  (
			   (#{dtlsExcfCd}           is null )
		   or  (b.DTLS_EXCF_CD          = #{dtlsExcfCd} )
			   )
		  and  nvl(b.EXMN_SCTN_CD, '*') like #{exmnSctnCd} || '%'
		  and  (
			   (b.FNSH_DT               is null)
		   or  (b.FNSH_DT               > sysdate)
			   )
		  and  c.USER_ID(+)        = b.CHIE_ENGN_ID
		  and  d.USER_ID(+)        = b.LAST_UPDR_ID
		  and nvl(b.CLSR_YN, 'N') = 'N' 
		order
		   by  SCRN_SORT_SQNC  ,EXRM_CD
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfmExmnSctn-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfmExmnSctn () 
        Description :                                           검사실정보조회_입력검사실과동일검사섹션
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfmExmnSctn-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfmExmnSctn"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfmExmnSctn-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfmExmnSctn*/
				<![CDATA[
				   select  /*+ swd_roomcmt_l09$S01_검사실정보조회_입력검사실과동일검사섹션 */
			   a.EXCF_CD                        as EXCF_CD            /*  검사분류             */
			,  rpad(a.EXRM_CD,10,'          ')  as EXRM_CD            /*  검사실코드           */
			,  a.EXRM_NM                        as EXRM_NM            /*  검사실명             */
			,  a.EXRM_COLR_CD                   as EXRM_COLR_CD       /*  COLOR             */
			,  a.EXRM_DVSN_CD                   as EXRM_DVSN_CD       /*  검사실구분           */
			,  a.EXMN_EQPM_MNGM_YN              as EXMN_EQPM_MNGM_YN  /*  검사장비관리여부     */
			,  nvl(a.APNT_FRMT_CD,'N')          as APNT_FRMT_CD       /*  예약형태             */
			,  a.CHIE_ENGN_ID                   as CHIE_ENGN_ID       /*  주임기사             */
			,  b.USER_NM                        as USER_NM_1          /*  주임기사명           */
			,  a.TLNO                           as TLNO               /*  전화번호             */
			,  a.SCRN_SORT_SQNC                 as SCRN_SORT_SQNC     /*  표시순서             */
			,  a.SCHD_TYPE_CD                   as SCHD_TYP_CD        /*  스케줄타입           */
			,  a.HGRN_EXRM_CD                   as HGRN_EXRM_CD       /*  상위검사실코드       */
			,  a.EXMN_SCTN_CD                   as EXMN_SCTN_CD       /*  검사섹션코드         */
			,  a.INTR_SCTN_DVSN_CD              as INTR_SCTN_DVSN_CD  /*  SECTION 구분        */
			,  a.EXRM_LCTN_NM                   as EXRM_LCTN_NM       /*  검사실IP           */
			,  a.FRST_RGST_DT                   as FRST_RGST_DT       /*  등록일자             */
			,  a.LAST_UPDR_ID                   as LAST_UPDR_ID       /*  수정자ID           */
			,  c.USER_NM                        as USER_NM_2          /*  수정자명             */
			,  a.LAST_UPDT_IP                   as LAST_UPDT_IP       /*  수정자IP           */
			,  a.LAST_UPDT_DT                   as LAST_UPDT_DT       /*  수정일시             */
			,  a.FNSH_DT                        as FNSH_DT            /*  종료일시             */
			,  nvl(a.USE_FNSH_YN,'N')           as USE_FNSH_YN        /*  검사실폐쇄여부       */
			,  a.EXCT_DPRT_CD                   as EXCT_DPRT_CD       /*  의료원검사실분류코드 */
			,  a.EXRM_HSDV_CD                   as EXRM_HSDV_CD       /*  검사실병원구분코드   */
		 from  SZROOMCMT z
			,  SZROOMCMT a
			,  CCUSRDPHT b
			,  CCUSRDPHT c
		where  z.EXRM_CD      = #{exrmCd}
		  and  z.EXCF_CD      = #{excfCd}
		  and  a.EXCF_CD      = z.EXCF_CD
		  and  a.DTLS_EXCF_CD = z.DTLS_EXCF_CD
		  and  b.USER_ID(+)    = a.CHIE_ENGN_ID
		  and  c.USER_ID(+)    = a.LAST_UPDR_ID
		  and  (
			   (a.FNSH_DT is null)
		   or  (a.FNSH_DT > sysdate)
			   )
		  and nvl(z.CLSR_YN, 'N') = 'N'
		order
		   by  a.SCRN_SORT_SQNC
			,  a.EXRM_CD
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm6-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm6 () 
        Description :                                           검사실정보 조회10
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm6-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm6"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm6-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm6*/
				<![CDATA[
				   select  /*+ swd_roomcmt_l10$S01_검사실정보 조회5 */
			 EXCF_CD as EXCF_CD                          /*  검사분류             */
		   , EXRM_CD as EXRM_CD   /*  검사실코드           */
		   , EXRM_CD_1 as EXRM_CD_1   /*  검사실코드           */
		   , EXRM_NM as EXRM_NM                          /*  검사실명             */
		   , EXRM_COLR_CD as EXRM_COLR_CD                     /*  COLOR             */
		   , EXRM_DVSN_CD as EXRM_DVSN_CD                     /*  검사실구분           */
		   , EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                /*  검사장비관리여부     */
		   , APNT_FRMT_CD as APNT_FRMT_CD          /*  예약형태             */
		   , CHIE_ENGN_ID as CHIE_ENGN_ID                     /*  주임기사             */
		   , USER_NM_1 as USER_NM_1                /*  주임기사명           */
		   , TLNO as TLNO                             /*  전화번호             */
		   , SCRN_SORT_SQNC as SCRN_SORT_SQNC                   /*  표시순서             */
		   , SCHD_TYPE_CD as SCHD_TYP_CD                     /*  스케줄타입           */
		   , HGRN_EXRM_CD as HGRN_EXRM_CD                     /*  상위검사실코드       */
		   , EXMN_SCTN_CD as EXMN_SCTN_CD                     /*  검사섹션코드         */
		   , INTR_SCTN_DVSN_CD as INTR_SCTN_DVSN_CD                /*  SECTION 구분        */
		   , EXRM_LCTN_NM as EXRM_LCTN_NM                     /*  검사실IP           */
		   , FRST_RGST_DT as FRST_RGST_DT                     /*  등록일자             */
		   , LAST_UPDR_ID as LAST_UPDR_ID                     /*  수정자ID           */
		   , USER_NM_2 as USER_NM_2                /*  수정자명             */
		   , LAST_UPDT_IP as LAST_UPDT_IP                     /*  수정자IP           */
		   , LAST_UPDT_DT as LAST_UPDT_DT                     /*  수정일시             */
		   , FNSH_DT as FNSH_DT                          /*  종료일시             */
		   , USE_FNSH_YN as USE_FNSH_YN            /*  검사실폐쇄여부       */
		   , EXCT_DPRT_CD as EXCT_DPRT_CD                     /*  의료원검사실분류코드 */
		   , EXRM_HSDV_CD as EXRM_HSDV_CD                     /*  검사실병원구분코드   */
				   from
				   (
		  select
			   a.EXCF_CD                          /*  검사분류             */
				, rpad(a.EXRM_CD,10,'          ') EXRM_CD   /*  검사실코드           */
		        , a.EXRM_CD as EXRM_CD_1     /*  검사실코드  공백제거 */
				, a.EXRM_NM                          /*  검사실명             */
				, a.EXRM_COLR_CD                     /*  COLOR             */
				, a.EXRM_DVSN_CD                     /*  검사실구분           */
				, a.EXMN_EQPM_MNGM_YN                /*  검사장비관리여부     */
				, nvl(a.APNT_FRMT_CD,'N')  APNT_FRMT_CD          /*  예약형태             */
				, a.CHIE_ENGN_ID                     /*  주임기사             */
				, b.USER_NM USER_NM_1                /*  주임기사명           */
				, a.TLNO                             /*  전화번호             */
				, a.SCRN_SORT_SQNC                   /*  표시순서             */
				, a.SCHD_TYPE_CD                     /*  스케줄타입           */
				, a.HGRN_EXRM_CD                     /*  상위검사실코드       */
				, a.EXMN_SCTN_CD                     /*  검사섹션코드         */
				, a.INTR_SCTN_DVSN_CD                /*  SECTION 구분        */
				, a.EXRM_LCTN_NM                     /*  검사실IP           */
				, a.FRST_RGST_DT                     /*  등록일자             */
				, a.LAST_UPDR_ID                     /*  수정자ID           */
				, c.USER_NM USER_NM_2                /*  수정자명             */
				, a.LAST_UPDT_IP                     /*  수정자IP           */
				, a.LAST_UPDT_DT                     /*  수정일시             */
				, a.FNSH_DT                          /*  종료일시             */
				, nvl(a.USE_FNSH_YN,'N') USE_FNSH_YN            /*  검사실폐쇄여부       */
				, a.EXCT_DPRT_CD                     /*  의료원검사실분류코드 */
				, a.EXRM_HSDV_CD                     /*  검사실병원구분코드   */
			from
				  SZROOMCMT a   /*  검사실*/
				, CCUSRDPHT b   /*  사용자진료조직관계이력*/
				, CCUSRDPHT c
		   where
				 a.EXRM_CD  like #{exrmCd}||'%'
			 and a.EXCF_CD      = #{excfCd}
			 and (( #{dtlsExcfCd} is null )
				   or ( a.DTLS_EXCF_CD = #{dtlsExcfCd} ) )
			 and nvl(a.EXMN_SCTN_CD, '*')  like #{exmnSctnCd} || '%'
			 and b.USER_ID(+)    = a.CHIE_ENGN_ID
			 and c.USER_ID(+)    = a.LAST_UPDR_ID
		     and nvl(a.CLSR_YN, 'N') = 'N'
			 order by
					decode(a.EXCF_CD,'SS',decode(a.EXRM_CD,'BS2P','BS21-1',a.EXRM_CD),a.EXRM_CD)
				   )
				   union all
				   select
			'SR'                          /*  검사분류             */
		  , rpad(c.COMN_DTLS_CD,10,'          ')  as EXRM_CD    /*  검사실코드           */
		  , c.COMN_DTLS_CD as EXRM_CD_1  /*  검사실코드           */
		  , c.DETL_CD_NM as EXRM_NM                             /*  검사실명             */
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
		  , null
				   from
			CCCMCDDMT c
				   where
			c.comn_grp_cd = 'SR960'
		and length(comn_dtls_cd) = 2
		]]>
	</select>






    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmInfm () 
        Description :                                           검사실정보수정
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmInfm"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  >
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmInfm*/
				<![CDATA[
				   update  /*+ swd_roomcmt_u01$U01_검사실정보수정 */
			   SZROOMCMT
		  set  EXRM_NM            = #{exrmNm}
			,  CHIE_ENGN_ID       = #{chieEngnId}
			,  TLNO               = decode( nvl(instr(#{tlno} ,'**'), 0), 0, #{tlno}, TLNO)
			,  SCHD_TYPE_CD       = #{schdTypeCd}
			,  INTR_SCTN_DVSN_CD  = #{intrSctnDvsnCd}
			,  EXMN_EQPM_MNGM_YN  = #{exmnEqpmMngmYn}
			,  APNT_FRMT_CD       = #{apntFrmtCd}
			,  FNSH_DT            = to_date(#{fnshDt}, 'yyyyMMdd')
			,  EXRM_LCTN_NM       = #{exrmLctnNm}
			,  EXRM_HSDV_CD       = #{exrmHsdvCd}
			,  EXCT_DPRT_CD      = #{exctDprtCd}
			,  LAST_UPDR_ID      = #{gvLginId}
			,  LAST_UPDT_IP      = #{gvUserIp}
			,  LAST_UPDT_DT      = sysdate
			,  LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
			,  FRST_RGST_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		where  EXRM_CD  = #{exrmCd}
		  and  EXCF_CD  = #{excfCd}
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmClsrUse () 
        Description :                                           검사실폐쇄사용수정
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmClsrUse"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  >
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrmClsrUse*/
				<![CDATA[
				   update  /*+ swd_roomcmt_u02$U01_검사실폐쇄사용수정 */
			   SZROOMCMT
		  set  USE_FNSH_YN       = #{useFnshYn}
			,  LAST_UPDR_ID      = #{gvLginId}
			,  LAST_UPDT_IP      = #{gvUserIp}
			,  LAST_UPDT_DT      = sysdate
			,  LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
			,  FRST_RGST_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		where  EXRM_CD = #{exrmCd}  /*  검사실코드 */
		  and  EXCF_CD = #{excfCd}                 /*  검사분류   */
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-deleteExrm () 
        Description :                                           검사실 삭제
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
    -->	
	<delete id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-deleteExrm"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  >
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-deleteExrm*/
				<![CDATA[
				   delete  /*+ swd_szroomc_d01$I01_검사실관리화면_검사실_삭제처리_DAM */
		 from SZROOMCMT
		where EXCF_CD = #{excfCd}
		  and EXRM_CD = #{exrmCd}
		]]>
	</delete>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-insertExrm () 
        Description :                                           검사실 등록
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
    -->	
	<insert id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-insertExrm"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  >
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-insertExrm*/
				<![CDATA[
				   insert  /*+ swd_szroomc_i01$I01_검사실입력수정화면_저장버튼_등록처리 */
				   into SZROOMCMT
		  (
		   EXCF_CD
		  ,  EXRM_CD
		  ,  EXRM_NM
		  ,  CHIE_ENGN_ID
		  ,  TLNO
		  ,  SCHD_TYPE_CD
		  ,  INTR_SCTN_DVSN_CD
		  ,  EXMN_EQPM_MNGM_YN
		  ,  APNT_FRMT_CD
		  ,  FNSH_DT
		  ,  EXRM_LCTN_NM
		  ,  EXRM_HSDV_CD
		  ,  EXCT_DPRT_CD
		  ,  DTLS_EXCF_CD
		  ,  CLSR_YN
		  ,  FRST_RGSR_ID
		  ,  FRST_RGST_IP
		  ,  FRST_RGST_DT
		  ,  FRST_RGST_CLNT_PRGM_ID
		  ,  FRST_RGST_SRVR_PRGM_ID
		  ,  LAST_UPDR_ID
		  ,  LAST_UPDT_IP
		  ,  LAST_UPDT_DT
		  ,  LAST_UPDT_CLNT_PRGM_ID
		  ,  LAST_UPDT_SRVR_PRGM_ID
		  )
				  values
		  (
		  #{excfCd}
		   , #{exrmCd}
		   , #{exrmNm}
		   , #{chieEngnId}
		   , decode( nvl(instr(#{tlno}     ,'**'), 0), 0, #{tlno}     ,  '')/* :sws_szroomc_009[0].tlno */
		   , #{schdTypeCd}
		   , #{intrSctnDvsnCd}
		   , #{exmnEqpmMngmYn}
		   , #{apntFrmtCd}
		   , to_date(#{fnshDt}, 'YYYYMMDD')
		   , #{exrmLctnNm}
		   , #{exrmHsdvCd}
		   , (select DPRT_CD from HZDEPTMMT b where ABRV_DPRT_CD = #{exctDprtCd})
		   , #{dtlsExcfCd}
		   , #{clsrYn}
		   , #{gvLginId}                                /*  최초등록자ID                  */
		   , #{gvUserIp}                                     /*  최초등록IP                    */
		   , sysdate                                         /*  최초등록일시                     */
		   , #{gvClntPrgmId}                                    /*  최초등록SMC클라이언트프로그램ID */
		   , #{gvSrvrPrgmId}                                    /*  최초등록SMC서버프로그램ID      */
		   , #{gvLginId}                                /*  최종수정자ID                  */
		   , #{gvUserIp}                                     /*  최종수정IP                    */
		   , sysdate                                         /*  최종수정일시                     */
		   , #{gvClntPrgmId}                                    /*  최종등록SMC클라이언트프로그램ID */
		   , #{gvSrvrPrgmId}                                    /*  최종등록SMC서버프로그램ID      */
		  )
		]]>
	</insert>


	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrm-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm" column="USER_NM"/>
		<result property="tlno" column="TLNO"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="afiExctDprtNm" column="AFI_EXCT_DPRT_NM"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
		<result property="clsrYn" column="CLSR_YN"/>
		<result property="dtlsExcfCd" column="DTLS_EXCF_CD"/>
		<result property="exmnDtlsCtrlNm" column="EXMN_DTLS_CTRL_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrm () 
        Description :                                           검사실 조회
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrm-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrm"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrm-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrm*/
		<![CDATA[
		   select  /*+ swd_szroomc_l01$S01_검사실 관리화면_조회버튼클릭 다건조회 */
			   			a.EXCF_CD as EXCF_CD                                                                 /*  검사분류             */
			   		 ,  a.EXRM_CD as EXRM_CD                            /*  검사실코드           */
			   		 ,  a.EXRM_NM as EXRM_NM                                                                /*  검사실명             */
			   		 ,  a.EXRM_COLR_CD as EXRM_COLR_CD                                                                 /*  COLOR                */
			   		 ,  a.EXRM_DVSN_CD as EXRM_DVSN_CD                                                                /*  검사실구분           */
			   		 ,  a.EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                                                                 /*  검사장비관리여부     */
			   		 ,  nvl(a.APNT_FRMT_CD, 'N') as APNT_FRMT_CD                                     /*  예약형태             */
			   		 ,  a.CHIE_ENGN_ID as CHIE_ENGN_ID                                                                /*  주임기사             */
			   		 ,  b.USER_NM as USER_NM                                                                /*  주임기사명           */
			   		 ,  a.TLNO as TLNO                                                                   /*  전화번호             */
			   		  , ( select F_A.ABRV_DPRT_CD
			   			   from HZDEPTMMT F_A
			   			  where F_A.DPRT_CD = a.EXCT_DPRT_CD
			   			  group by F_A.ABRV_DPRT_CD ) as EXCT_DPRT_CD   /*  실행부서코드 */
			   		  ,  ( select F_A.KORN_DPRT_NM
			   			   from HZDEPTMMT F_A
			   			  where F_A.DPRT_CD = a.EXCT_DPRT_CD
			   			  group by F_A.KORN_DPRT_NM ) as AFI_EXCT_DPRT_NM
			   		 ,  a.SCRN_SORT_SQNC as SCRN_SORT_SQNC                                                                   /*  표시순서             */
			   		 ,  a.SCHD_TYPE_CD as SCHD_TYP_CD                                                /*  스케줄타입           */
			   		 ,  a.INTR_SCTN_DVSN_CD as INTR_SCTN_DVSN_CD                                                                  /*  SECTION 구분         */
			   		 ,  a.EXRM_LCTN_NM as EXRM_LCTN_NM                                                                  /*  검사실IP             */
			   		 ,  to_char(a.FRST_RGST_DT, 'yyyymmddhh24miss') as FRST_RGST_DT                /*  등록일자             */
			   		 ,  a.LAST_UPDR_ID as LAST_UPDR_ID                                                                  /*  수정자ID             */
			   		 ,  a.LAST_UPDT_IP as LAST_UPDT_IP                                                                  /*  수정자IP             */
			   		 ,  to_char(a.LAST_UPDT_DT, 'yyyymmddhh24miss') as LAST_UPDT_DT                /*  수정일시             */
			   		 ,  to_char(a.FNSH_DT, 'yyyymmddhh24miss') as FNSH_DT                          /*  종료일시             */
			   		 ,  a.EXRM_HSDV_CD as EXRM_HSDV_CD    /*  검사실위치, 검사실병원구분 코드 */
		             ,  a.CLSR_YN
		             ,  a.DTLS_EXCF_CD
		             ,  d.EXMN_DTLS_CTRL_NM
			 from
				   SZROOMCMT a                                                          /* 검사실*/
				,  CCUSRDPHT b                                                          /* 사용자진료조직관계이력*/
				,  CCUSRDPHT c
		        ,  SZCTRLMMT d
			   	 where  a.EXRM_CD  like #{exrmCd}||'%'
			   	   and  a.EXCF_CD     = #{excfCd}
			   	   and  ( ( #{dtlsExcfCd} is null )
			   					  or ( a.DTLS_EXCF_CD = #{dtlsExcfCd} ) )
			   	   and  b.USER_ID(+)    = a.CHIE_ENGN_ID
			   	   and  c.USER_ID(+)    = a.LAST_UPDR_ID
		           and  (
		                     ( #{dvsnVl} is null ) or  
		                      (#{dvsnVl} is not null and ( (a.FNSH_DT is null) or (a.FNSH_DT > trunc(sysdate))))
		                   )
		           and  d.EXMN_CTRL_CD      = 'SZ001'
		           and  d.APLY_PART_CD      = a.EXCF_CD
		           and  d.EXMN_DTLS_CTRL_CD = a.DTLS_EXCF_CD
			order  by  a.SCRN_SORT_SQNC,a.EXRM_CD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList1-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm" column="USER_NM"/>
		<result property="tlno" column="TLNO"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypeCd" column="SCHD_TYPE_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
		<result property="exctDprtCd2" column="EXCT_DPRT_CD_2"/>
		<result property="dtlsExcfCd" column="DTLS_EXCF_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList1 () 
        Description :                                           검사실 콤보박스
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList1-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList1"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList1-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmList1*/
				<![CDATA[
				   select  /*+ swd_szroomc_l04$S01_검사실 콤보박스 */
			  a.EXCF_CD as EXCF_CD                                             /* 검사분류             */
		   ,  rpad(a.EXRM_CD, 10, '          ') as EXRM_CD                     /* 검사실코드           */
		   ,  a.EXRM_NM as EXRM_NM                                             /* 검사실명             */
		   ,  a.EXRM_COLR_CD as EXRM_COLR_CD                                        /* COLOR                */
		   ,  a.EXRM_DVSN_CD as EXRM_DVSN_CD                                        /* 검사실구분           */
		   ,  a.EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                                   /* 검사장비관리여부     */
		   ,  nvl(a.APNT_FRMT_CD, 'N') as APNT_FRMT_CD                              /* 예약형태             */
		   ,  a.CHIE_ENGN_ID as CHIE_ENGN_ID                                        /* 주임기사             */
		   ,  b.USER_NM as USER_NM                                             /* 주임기사명           */
		   ,  a.TLNO as TLNO                                                /* 전화번호             */
		   ,  a.EXCT_DPRT_CD as EXCT_DPRT_CD                                        /* 의료원검사실분류코드 */
		   ,  a.SCRN_SORT_SQNC as SCRN_SORT_SQNC                                      /* 표시순서             */
		   ,  a.SCHD_TYPE_CD as SCHD_TYPE_CD                                        /* 스케줄타입           */
		   ,  a.INTR_SCTN_DVSN_CD as INTR_SCTN_DVSN_CD                                   /* SECTION 구분         */
		   ,  a.EXRM_LCTN_NM as EXRM_LCTN_NM                                        /* 검사실IP             */
		   ,  to_char(a.FRST_RGST_DT, 'yyyymmddhh24miss') as FRST_RGST_DT      /* 등록일자             */
		   ,  a.LAST_UPDR_ID as LAST_UPDR_ID                                        /* 수정자ID             */
		   ,  c.USER_NM as USER_NM_2                                             /* 수정자명             */
		   ,  a.LAST_UPDT_IP as LAST_UPDT_IP                                        /* 수정자IP             */
		   ,  to_char(a.LAST_UPDT_DT, 'yyyymmddhh24miss') as LAST_UPDT_DT      /* 수정일시             */
		   ,  to_char(a.FNSH_DT, 'yyyymmddhh24miss') as FNSH_DT           /* 종료일시             */
		   ,  nvl(a.USE_FNSH_YN, 'N') as USE_FNSH_YN                               /* 검사실폐쇄여부       */
		   ,  a.EXRM_HSDV_CD as EXRM_HSDV_CD
		   ,  a.EXCT_DPRT_CD as EXCT_DPRT_CD_2
		   ,  a.DTLS_EXCF_CD
		from  SZROOMCMT a
		   ,  CCUSRDPHT b
		   ,  CCUSRDPHT c
				   where   /*  a.EXRM_CD     like :sws_szroomc_005[0].exrm_cd||'%' and */
			  a.EXCF_CD  like #{excfCd} || '%'
		 and  nvl(a.FNSH_DT, to_date('29991231', 'yyyyMMdd')) >= sysdate
		 and  b.USER_ID(+)  = a.CHIE_ENGN_ID
		 and  c.USER_ID(+)  = a.LAST_UPDR_ID
		 order by  a.SCRN_SORT_SQNC  ,a.EXRM_CD
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-selectOneExrmNmSrch-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="tlno" column="TLNO"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-selectOneExrmNmSrch () 
        Description :                                           검사실명 검색
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-selectOneExrmNmSrch-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-selectOneExrmNmSrch"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-selectOneExrmNmSrch-result" useCache="true" flushCache="false">
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-selectOneExrmNmSrch*/
				<![CDATA[
				   select  /*+ swd_szroomc_s21$S01_검사실명 검색 */
			   EXRM_NM as EXRM_NM
			 , EXRM_LCTN_NM as EXRM_LCTN_NM
			 , TLNO as TLNO
		 from
			   SZROOMCMT
		where
			   EXRM_CD =   #{exrmCd}
		  and  EXCF_CD like   #{excfCd} || '%'
		]]>
	</select>






    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrm () 
        Description :                                           검사실 수정
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrm"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  >
		      /*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-updateExrm*/
		<![CDATA[
		   update  /*+ swd_szroomc_u01$I01_검사실입력수정화면_저장버튼_수정처리 */
				SZROOMCMT
		   set
				EXRM_NM            = #{exrmNm}               /*  검사실명         */
			 ,  CHIE_ENGN_ID       = #{chieEngnId}          /*  주임기사         */
			 ,  TLNO               = decode( nvl(instr(#{tlno}     ,'**'), 0), 0, #{tlno}     ,  TLNO)/* :sws_szroomc_009[0].tlno                  /*  전화번호         */
			 ,  SCHD_TYPE_CD       = #{schdTypeCd}           /*  스케줄타입       */
			 ,  INTR_SCTN_DVSN_CD  = #{intrSctnDvsnCd}     /*  SECTION 구분     */
			 ,  EXMN_EQPM_MNGM_YN  = #{exmnEqpmMngmYn}     /*  검사장비관리여부 */
			 ,  APNT_FRMT_CD       = #{apntFrmtCd}          /*  예약형태         */
			 ,  FNSH_DT            = to_date(#{fnshDt}, 'yyyy-mm-dd')           /*  종료일자         */
			 ,  EXRM_LCTN_NM       = #{exrmLctnNm}
			 ,  EXRM_HSDV_CD       = #{exrmHsdvCd}
			 ,  EXCT_DPRT_CD       = #{exctDprtCd}
		     ,  CLSR_YN            = #{clsrYn}
			 ,  LAST_UPDR_ID       = #{gvLginId}                                 /*  수정자ID         */
			 ,  LAST_UPDT_IP       = #{gvUserIp}                                 /*  수정자IP         */
			 ,  LAST_UPDT_DT       = sysdate                                   /*  수정일시         */
			 ,  LAST_UPDT_CLNT_PRGM_ID  = #{gvClntPrgmId}
			 ,  LAST_UPDT_SRVR_PRGM_ID  = #{gvSrvrPrgmId}
		 where  EXCF_CD = #{excfCd}                                 /*  검사분류         */
			  	and  EXRM_CD = #{exrmCd}                               /*  검사실코드       */
			]]>
	</update>


	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listLctnClbyExrm-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm" column="USER_NM"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="tlno" column="TLNO"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="useYn" column="USE_YN"/>
		<result property="mdteRqrdMi" column="MDTE_RQRD_MI"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
		<result property="detlCdNm" column="DETL_CD_NM"/>
		<result property="kornDprtNm" column="KORN_DPRT_NM"/>
		<result property="dprtCd" column="DPRT_CD"/>
		<result property="exrmNm1" column="EXRM_NM_1"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listLctnClbyExrm (위치별 검사실 조회) 
        Description :                                           위치별 검사실 조회
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listLctnClbyExrm-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listLctnClbyExrm"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listLctnClbyExrm-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listLctnClbyExrm */
		<![CDATA[
		     select  /*+ szd_roomcmt_l08$S01_위치별 검사실 다건조회 */
		             a.EXRM_CD                                                           EXRM_CD            /* 검사실코드         */
		          ,  a.EXRM_NM                                                           EXRM_NM            /* 검사실명           */
		          ,  a.CHIE_ENGN_ID                                                      CHIE_ENGN_ID       /* 주임기사ID        */
		          ,  ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = a.CHIE_ENGN_ID )
		                                                                                 USER_NM            /* 담당자이름         */
		          ,  a.EXCT_DPRT_CD                                                      EXCT_DPRT_CD       /* 실행부서코드       */
		          ,  a.TLNO                                                              TLNO               /* 전화번호           */
		          ,  a.EXRM_LCTN_NM                                                      EXRM_LCTN_NM       /* 검사실위치명       */
		          ,  decode(a.FNSH_DT, null, 'N', 'Y')                                   USE_YN             /* 사용여부           */
		          ,  a.MDTE_RQRD_MI                                                      MDTE_RQRD_MI       /* 치료소요시간분     */
		          ,  a.EXRM_HSDV_CD                                                      EXRM_HSDV_CD       /* 검사실위치구분코드 */
		          ,  (
		              select nvl(F_B.DETL_CD_NM, F_A.DETL_CD_NM)
		                from CCCMCDDMT F_A, CCCMCDDLT F_B
		               where F_A.COMN_GRP_CD = F_B.COMN_GRP_CD(+)
		                 and F_A.COMN_DTLS_CD = F_B.COMN_DTLS_CD(+)
		                 and F_A.COMN_GRP_CD = 'AP085'
		                 and F_A.COMN_DTLS_CD =  a.EXRM_HSDV_CD
		                 and F_B.LNGG_CD(+) = nvl( '', '*')
		             )                                                                   DETL_CD_NM         /* 검사실위치구분명 */
		          ,  ( select F_A.KORN_DPRT_NM from HZDEPTMMT F_A where F_A.DPRT_CD = a.EXCT_DPRT_CD group by F_A.KORN_DPRT_NM )
		                                                                                 KORN_DPRT_NM
		          ,  ( select F_A.ABRV_DPRT_CD from HZDEPTMMT F_A where F_A.DPRT_CD = a.EXCT_DPRT_CD group by F_A.ABRV_DPRT_CD )
		                                                                                 DPRT_CD
		          ,  a.EXRM_CD || ' ' || a.EXRM_NM                            as EXRM_NM_1
		       from  SZROOMCMT a                                     /* 검사실마스터         */
		      where  a.EXRM_CD like #{exrmCd} || '%'
		        and  a.EXRM_NM like #{exrmNm} || '%'
		        and  a.EXCF_CD    = #{excfCd}
		        and  a.EXRM_HSDV_CD = decode(#{exrmHsdvCd}, 'A', a.EXRM_HSDV_CD, #{exrmHsdvCd}) /* 검사실병원구분코드 */
		        and  decode(nvl(#{dltnYn}, 'N'), 'A' , to_date('29991231', 'YYYYMMDD')
		                                                         , nvl(a.FNSH_DT, to_date('29991231', 'YYYYMMDD'))
		                   ) > sysdate
		        and  nvl(#{hgrnExrmCd}, ' ') <> 'SM'  /* 입력된 상위검사실 코드가 건진이 아닌경우 */
		    union all
		    select  /*+ szd_roomcmt_l08$S01_위치별 검사실 다건조회 */
		           a.EXRM_CD                                                           EXRM_CD            /* 검사실코드         */
		        ,  a.EXRM_NM                                                           EXRM_NM            /* 검사실명           */
		        ,  a.CHIE_ENGN_ID                                                      CHIE_ENGN_ID       /* 주임기사ID        */
		        ,  ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = a.CHIE_ENGN_ID )
		                                                                               USER_NM            /* 담당자이름         */
		        ,  a.EXCT_DPRT_CD                                                      EXCT_DPRT_CD       /* 실행부서코드       */
		        ,  a.TLNO                                                              TLNO               /* 전화번호           */
		        ,  a.EXRM_LCTN_NM                                                      EXRM_LCTN_NM       /* 검사실위치명       */
		        ,  decode(a.FNSH_DT, null, 'N', 'Y')                                   USE_YN             /* 사용여부           */
		        ,  a.MDTE_RQRD_MI                                                      MDTE_RQRD_MI       /* 치료소요시간분     */
		        ,  a.EXRM_HSDV_CD                                                      EXRM_HSDV_CD       /* 검사실위치구분코드 */
		        ,  (
		            select nvl(F_B.DETL_CD_NM, F_A.DETL_CD_NM)
		              from CCCMCDDMT F_A, CCCMCDDLT F_B
		             where F_A.COMN_GRP_CD = F_B.COMN_GRP_CD(+)
		               and F_A.COMN_DTLS_CD = F_B.COMN_DTLS_CD(+)
		               and F_A.COMN_GRP_CD = 'AP085'
		               and F_A.COMN_DTLS_CD =  a.EXRM_HSDV_CD
		               and F_B.LNGG_CD(+) = nvl( '', '*')
		           )                                                                   DETL_CD_NM         /* 검사실위치구분명 */
		        ,  ( select F_A.KORN_DPRT_NM from HZDEPTMMT F_A where F_A.DPRT_CD = a.EXCT_DPRT_CD group by F_A.KORN_DPRT_NM )
		                                                                               KORN_DPRT_NM
		        ,  ( select F_A.ABRV_DPRT_CD from HZDEPTMMT F_A where F_A.DPRT_CD = a.EXCT_DPRT_CD group by F_A.ABRV_DPRT_CD )
		                                                                               DPRT_CD
		        ,  a.EXRM_CD || ' ' || a.EXRM_NM         as EXRM_NM_1
		     from  SZROOMCMT a                                     /* 검사실마스터         */
		    where  a.EXRM_CD like #{exrmCd} || '%'
		      and  a.EXRM_NM like #{exrmNm} || '%'
		      and  a.EXCF_CD    = #{excfCd}
		      and  nvl(a.HGRN_EXRM_CD, ' ') like #{hgrnExrmCd} || '%'   /* 상위검사실코드 */
		      and  a.EXRM_HSDV_CD = decode(#{exrmHsdvCd}, 'A', a.EXRM_HSDV_CD, #{exrmHsdvCd}) /* 검사실병원구분코드 */
		      and  decode(nvl(#{dltnYn}, 'N'), 'A' , to_date('29991231', 'YYYYMMDD')
		                                                       , nvl(a.FNSH_DT, to_date('29991231', 'YYYYMMDD'))
		                 ) > sysdate
		      and  a.EXRM_CD in ('XS06', 'XS07', 'XS09', 'XS10', 'XS11' ,   /*별관 검사실*/
		                         'YF06', 'YF07', 'YF08', 'YF09',            /*암병원 검사실 */
		                         'YM05', 'YM07', 'YM08', 'YM09'
		                         )
		      and  #{hgrnExrmCd} = 'SM'   /* 입력된 상위검사실 코드가 건진인 경우 */
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm8-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm8 (검사실 정보 없는 경우 가야할곳 조회) 
        Description :                                           검사실이 없는 경우 예약된 정보 기반으로 검사실 조회
                                            
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm8-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm8"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm8-result" useCache="true" flushCache="false">
		<![CDATA[
		/*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm8 */
		select  /* 검사실정보 조회   */
		       c.EXCF_CD as EXCF_CD                          /*  검사분류             */
		     , rpad(c.EXRM_CD,10,'          ') as EXRM_CD    /*  검사실코드           */
		     , c.EXRM_CD as EXRM_CD_1    /*  검사실코드           */
		     , c.EXRM_NM as EXRM_NM                          /*  검사실명             */
		     , c.EXRM_COLR_CD as EXRM_COLR_CD                     /*  COLOR             */
		     , c.EXRM_DVSN_CD as EXRM_DVSN_CD                     /*  검사실구분           */
		     , c.EXMN_EQPM_MNGM_YN as EXMN_EQPM_MNGM_YN                /*  검사장비관리여부     */
		     , nvl(c.APNT_FRMT_CD,'N') as APNT_FRMT_CD            /*  예약형태             */
		     , c.CHIE_ENGN_ID as CHIE_ENGN_ID                     /*  주임기사             */
		--     , d.USER_NM as USER_NM_1                /*  주임기사명           */
		     , c.TLNO as TLNO                             /*  전화번호             */
		     , c.SCRN_SORT_SQNC as SCRN_SORT_SQNC                   /*  표시순서             */
		     , c.SCHD_TYPE_CD as SCHD_TYP_CD                     /*  스케줄타입           */
		     , c.HGRN_EXRM_CD as HGRN_EXRM_CD                     /*  상위검사실코드       */
		     , c.EXMN_SCTN_CD as EXMN_SCTN_CD                     /*  검사섹션코드         */
		     , c.INTR_SCTN_DVSN_CD as INTR_SCTN_DVSN_CD                /*  SECTION 구분        */
		     , c.EXRM_LCTN_NM as EXRM_LCTN_NM                     /*  검사실IP           */
		     , c.FRST_RGST_DT as FRST_RGST_DT                     /*  등록일자             */
		     , c.LAST_UPDR_ID as LAST_UPDR_ID                     /*  수정자ID           */
		     , e.USER_NM as USER_NM_2                /*  수정자명             */
		     , c.LAST_UPDT_IP as LAST_UPDT_IP                     /*  수정자IP           */
		     , c.LAST_UPDT_DT as LAST_UPDT_DT                     /*  수정일시             */
		     , c.FNSH_DT as FNSH_DT                          /*  종료일시             */
		     , nvl(c.USE_FNSH_YN,'N') as USE_FNSH_YN             /*  검사실폐쇄여부       */
		     , c.EXCT_DPRT_CD as EXCT_DPRT_CD                     /*  의료원검사실분류코드 */
		     , c.EXRM_HSDV_CD as EXRM_HSDV_CD                     /*  검사실병원구분코드   */
		  from  SWWORKMMT a
		     ,  SWSCHTYPT b
		     ,  SZROOMCMT c
		     ,  CCUSRDPHT d   /*  사용자진료조직관계이력*/
		     ,  CCUSRDPHT e
		 where  1=1
		   and  a.PTNO      = #{ptno}
		   and  a.ORDR_YMD  = to_date(#{ordrYmd}, 'yyyymmdd')
		   and  a.ORDR_SNO  = #{ordrSno}
		   and  a.EXCF_CD   = #{excfCd}
		   and  a.EXMN_CD   = #{exmnCd}
		   and  b.SCHD_TYP_CD = a.SCHD_TYP_CD
		   and  b.SCHD_DTLS_TYP_CD = a.SCHD_DTLS_TYP_CD
		   and  b.EXCF_CD     = a.EXCF_CD
		   and  c.EXRM_CD     = b.EXRM_CD
		   and  d.USER_ID(+)    = c.CHIE_ENGN_ID
		   and  e.USER_ID(+)    = c.LAST_UPDR_ID
		   and  ((c.FNSH_DT is null) or (c.FNSH_DT > sysdate))
		   and  nvl(c.USE_FNSH_YN, 'N') = 'N'
		   and  nvl(c.CLSR_YN, 'N') = 'N'
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm9-result" type="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO">
	
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exrmCd" column="EXRM_CD"/>
		<result property="exrmCd1" column="EXRM_CD_1"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="exrmColrCd" column="EXRM_COLR_CD"/>
		<result property="exrmDvsnCd" column="EXRM_DVSN_CD"/>
		<result property="exmnEqpmMngmYn" column="EXMN_EQPM_MNGM_YN"/>
		<result property="apntFrmtCd" column="APNT_FRMT_CD"/>
		<result property="chieEngnId" column="CHIE_ENGN_ID"/>
		<result property="userNm1" column="USER_NM_1"/>
		<result property="tlno" column="TLNO"/>
		<result property="scrnSortSqnc" column="SCRN_SORT_SQNC"/>
		<result property="schdTypCd" column="SCHD_TYP_CD"/>
		<result property="hgrnExrmCd" column="HGRN_EXRM_CD"/>
		<result property="exmnSctnCd" column="EXMN_SCTN_CD"/>
		<result property="intrSctnDvsnCd" column="INTR_SCTN_DVSN_CD"/>
		<result property="exrmLctnNm" column="EXRM_LCTN_NM"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="userNm2" column="USER_NM_2"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="fnshDt" column="FNSH_DT"/>
		<result property="useFnshYn" column="USE_FNSH_YN"/>
		<result property="exctDprtCd" column="EXCT_DPRT_CD"/>
		<result property="exrmHsdvCd" column="EXRM_HSDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm9 () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO
		resultMap : com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm9-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm9"  parameterType="com.sds.healthcare.ehr.sup.sr.src.vo.SrcExrmDVO"  resultMap="com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm9-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-sup-sr-src-dao-SrcExrmDAO-listExrmInfm9 */
		<![CDATA[
		   select  /*+ swd_roomcmt_l03$S01_검사실정보 조회3 */
				  a.EXCF_CD                        as EXCF_CD            /*  검사분류             */
			   		 , rpad(a.EXRM_CD,10,'          ')  as EXRM_CD            /*  검사실코드           */
		             , a.EXRM_CD as EXRM_CD_1            /*  검사실코드           */
			   		 , a.EXRM_NM                        as EXRM_NM            /*  검사실명             */
			   		 , a.EXRM_COLR_CD                   as EXRM_COLR_CD       /*  COLOR             */
			   		 , a.EXRM_DVSN_CD                   as EXRM_DVSN_CD       /*  검사실구분           */
			   		 , a.EXMN_EQPM_MNGM_YN              as EXMN_EQPM_MNGM_YN  /*  검사장비관리여부     */
			   		 , nvl(a.APNT_FRMT_CD,'N')          as APNT_FRMT_CD       /*  예약형태             */
			   		 , a.CHIE_ENGN_ID                   as CHIE_ENGN_ID       /*  주임기사             */
			   		 , b.USER_NM                        as USER_NM_1          /*  주임기사명           */
			   		 , a.TLNO                           as TLNO               /*  전화번호             */
			   		 , a.SCRN_SORT_SQNC                 as SCRN_SORT_SQNC     /*  표시순서             */
			   		 , a.SCHD_TYPE_CD                   as SCHD_TYP_CD        /*  스케줄타입           */
			   		 , a.HGRN_EXRM_CD                   as HGRN_EXRM_CD       /*  상위검사실코드       */
			   		 , a.DTLS_EXCF_CD                   as EXMN_SCTN_CD       /*  검사섹션코드         */
			   		 , a.INTR_SCTN_DVSN_CD              as INTR_SCTN_DVSN_CD  /*  SECTION 구분        */
			   		 , a.EXRM_LCTN_NM                   as EXRM_LCTN_NM       /*  검사실IP           */
			   		 , a.FRST_RGST_DT                   as FRST_RGST_DT       /*  등록일자             */
			   		 , a.LAST_UPDR_ID                   as LAST_UPDR_ID       /*  수정자ID           */
			   		 , c.USER_NM                        as USER_NM_2          /*  수정자명             */
			   		 , a.LAST_UPDT_IP                   as LAST_UPDT_IP       /*  수정자IP           */
			   		 , a.LAST_UPDT_DT                   as LAST_UPDT_DT       /*  수정일시             */
			   		 , a.FNSH_DT                        as FNSH_DT            /*  종료일시             */
			   		 , nvl(a.USE_FNSH_YN,'N')           as USE_FNSH_YN        /*  검사실폐쇄여부       */
				, a.EXCT_DPRT_CD                   as EXCT_DPRT_CD       /*  의료원검사실분류코드 */
				, a.EXRM_HSDV_CD                   as EXRM_HSDV_CD       /*  검사실병원구분코드   */
			 from
				  SZROOMCMT a       /*  검사실*/
				, CCUSRDPHT b       /*  사용자진료조직관계이력*/
				, CCUSRDPHT c
				, SZCTRLMMT d
			where
				  a.EXRM_CD  like #{exrmCd}||'%'
			  and a.EXCF_CD      = #{excfCd}
			  and  a.DTLS_EXCF_CD = d.EXMN_DTLS_CTRL_CD
			  and  nvl(a.EXMN_SCTN_CD, '*')  like #{exmnSctnCd} || '%'
			  and  b.USER_ID(+)    = a.CHIE_ENGN_ID
			  and  c.USER_ID(+)    = a.LAST_UPDR_ID
			  and  ((a.FNSH_DT is null) or (a.FNSH_DT > sysdate))
		      and  nvl(a.CLSR_YN, 'N') = 'N'
		      and  nvl(d.APLY_PART_CD,'') = #{excfCd}
		      and  d.APFN_YMD >= trunc(sysdate)
		      and  d.EXMN_CTRL_CD = 'SR945'
		    order
			  by  a.SCRN_SORT_SQNC , a.EXRM_CD
			]]>
	</select>



</mapper>