<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    SQL File Name : mapper_SzxResulmtDAO_sql.xml 
    Description : -->
<mapper namespace="SzxResulmtDAO">




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-insertSzresulmt (insert SZRESULMT) 
        Description :                                           Table[SZRESULMT]'s insert method
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<insert id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-insertSzresulmt"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-insertSzresulmt */
		INSERT INTO SZRESULMT 
		(
		  PTNO		/*  */
		 ,ORDR_YMD		/*  */
		 ,ORDR_SNO		/*  */
		 ,SPCM_NO		/*  */
		 ,EXMN_CD		/*  */
		 ,RPRT_DT		/*  */
		 ,EXCF_CD		/*  */
		 ,EXMN_PRSS_CD		/*  */
		 ,EXRS_UPDT_YN		/*  */
		 ,EXRS_UPRE_CTN		/*  */
		 ,INTR_YN		/*  */
		 ,INDR_ID1		/*  */
		 ,INDR_ID2		/*  */
		 ,INDR_ID3		/*  */
		 ,RPRR_ID		/*  */
		 ,EXRS_FRMT_CD		/*  */
		 ,EXRS_UNIT_NM		/*  */
		 ,EXRS_NCVL_VL		/*  */
		 ,EXRS_CTN		/*  */
		 ,HLSC_KORN_EXRS_CTN		/*  */
		 ,ABNR_OPNN_YN		/*  */
		 ,TRNB_ID		/*  */
		 ,NRML_UPLM_NCVL_VL		/*  */
		 ,NRML_LWLM_NCVL_VL		/*  */
		 ,RPRT_UPLM_NCVL_VL		/*  */
		 ,RPRT_LWLM_NCVL_VL		/*  */
		 ,SERA_UPLM_NCVL_VL		/*  */
		 ,SERA_LWLM_NCVL_VL		/*  */
		 ,DLPN_DVSN_CD		/*  */
		 ,SPCM_IMAG_EN		/*  */
		 ,GROS_RSLT_CTN		/*  */
		 ,GROS_RSLT_INPT_DR_ID		/*  */
		 ,PCTS_EXMN_YN		/*  */
		 ,CVR_MNGN_RSLT_YN		/*  */
		 ,CVR_MNGN_RSLT_SPSB_CTN		/*  */
		 ,KRDX_YN		/*  */
		 ,CNLS_DX_CTN		/*  */
		 ,EXRS_RMRK_CTN		/*  */
		 ,UPDT_BEFR_RSLT_CTN		/*  */
		 ,RSLT_REDN_YN		/*  */
		 ,RSLT_REDR_ID		/*  */
		 ,RSLT_REDN_DT		/*  */
		 ,FRST_RGSR_ID		/*  */
		 ,FRST_RGST_IP		/*  */
		 ,FRST_RGST_DT		/*  */
		 ,FRST_RGST_CLNT_PRGM_ID		/*  */
		 ,FRST_RGST_SRVR_PRGM_ID		/*  */
		 ,LAST_UPDR_ID		/*  */
		 ,LAST_UPDT_IP		/*  */
		 ,LAST_UPDT_DT		/*  */
		 ,LAST_UPDT_CLNT_PRGM_ID		/*  */
		 ,LAST_UPDT_SRVR_PRGM_ID		/*  */
		 ,ADTN_INTR_YN		/*  */
		 ,EXRS_DTLS_FRMT_CD		/*  */
		 ,RSLT_RPRT_PRRN_YMD /*  */
		 ,FRSC_EXRS_CTN /* 동결절편검사결과내용 */
		)
		VALUES
		(
		  #{ptno}
		 ,to_date(#{ordrYmd}, 'yyyymmdd')
		 ,#{ordrSno}
		 ,#{spcmNo}
		 ,#{exmnCd}
		 ,nvl(to_date(#{rprtDt}, 'yyyymmddhh24miss'), sysdate)
		 ,#{excfCd}
		 ,#{exmnPrssCd}
		 ,#{exrsUpdtYn}
		 ,#{exrsUpreCtn}
		 ,#{intrYn}
		 ,#{indrId1}
		 ,#{indrId2}
		 ,#{indrId3}
		 ,#{rprrId}
		 ,#{exrsFrmtCd}
		 ,#{exrsUnitNm}
		 ,#{exrsNcvlVl}
		 ,#{exrsCtn}
		 ,#{hlscKornExrsCtn}
		 ,#{abnrOpnnYn}
		 ,#{trnbId}
		 ,#{nrmlUplmNcvlVl}
		 ,#{nrmlLwlmNcvlVl}
		 ,#{rprtUplmNcvlVl}
		 ,#{rprtLwlmNcvlVl}
		 ,#{seraUplmNcvlVl}
		 ,#{seraLwlmNcvlVl}
		 ,#{dlpnDvsnCd}
		 ,#{spcmImagEn}
		 ,#{grosRsltCtn}
		 ,#{grosRsltInptDrId}
		 ,#{pctsExmnYn}
		 ,#{cvrMngnRsltYn}
		 ,#{cvrMngnRsltSpsbCtn}
		 ,#{krdxYn}
		 ,#{cnlsDxCtn}
		 ,#{exrsRmrkCtn}
		 ,#{updtBefrRsltCtn}
		 ,#{rsltRednYn}
		 ,#{rsltRedrId}
		 ,to_date(#{rsltRednDt}, 'yyyymmddhh24miss')
		,#{gvUserId}
		,#{gvUserIp}
		,sysdate
		,#{gvClntPrgmId}
		,#{gvSrvrPrgmId}
		,#{gvUserId}
		,#{gvUserIp}
		,sysdate
		,#{gvClntPrgmId}
		,#{gvSrvrPrgmId}
		 ,#{adtnIntrYn}
		 ,#{exrsDtlsFrmtCd}
		 ,to_date(#{rsltRprtPrrnYmd}, 'yyyyMMdd')
		 ,#{frscExrsCtn}
		)
	</insert>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateSzresulmt (update SZRESULMT) 
        Description :                                           Table[SZRESULMT]'s update method
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateSzresulmt"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateSzresulmt */
		UPDATE  SZRESULMT
		   SET  SPCM_NO = #{spcmNo}
		     ,  RPRT_DT = to_date(#{rprtDt}, 'yyyymmddhh24miss')
		     ,  EXCF_CD = #{excfCd} 		/*  */     
				 ,  EXMN_PRSS_CD = #{exmnPrssCd} 		/*  */
				 ,  EXRS_UPDT_YN = #{exrsUpdtYn} 		/*  */
				 ,  EXRS_UPRE_CTN = #{exrsUpreCtn} 		/*  */
				 ,  INTR_YN = #{intrYn} 		/*  */
				 ,  INDR_ID1 = #{indrId1} 		/*  */
				 ,  INDR_ID2 = #{indrId2} 		/*  */
				 ,  INDR_ID3 = #{indrId3} 		/*  */
				 ,  RPRR_ID = #{rprrId} 		/*  */
				 ,  EXRS_FRMT_CD = #{exrsFrmtCd} 		/*  */
				 ,  EXRS_UNIT_NM = #{exrsUnitNm} 		/*  */
				 ,  EXRS_NCVL_VL = #{exrsNcvlVl} 		/*  */
				 ,  EXRS_CTN = #{exrsCtn} 		/*  */
				 ,  HLSC_KORN_EXRS_CTN = #{hlscKornExrsCtn} 		/*  */
				 ,  ABNR_OPNN_YN = #{abnrOpnnYn} 		/*  */
				 ,  TRNB_ID = #{trnbId} 		/*  */
				 ,  NRML_UPLM_NCVL_VL = #{nrmlUplmNcvlVl} 		/*  */
				 ,  NRML_LWLM_NCVL_VL = #{nrmlLwlmNcvlVl} 		/*  */
				 ,  RPRT_UPLM_NCVL_VL = #{rprtUplmNcvlVl} 		/*  */
				 ,  RPRT_LWLM_NCVL_VL = #{rprtLwlmNcvlVl} 		/*  */
				 ,  SERA_UPLM_NCVL_VL = #{seraUplmNcvlVl} 		/*  */
				 ,  SERA_LWLM_NCVL_VL = #{seraLwlmNcvlVl} 		/*  */
				 ,  DLPN_DVSN_CD = #{dlpnDvsnCd} 		/*  */
				 ,  SPCM_IMAG_EN = #{spcmImagEn} 		/*  */
				 ,  GROS_RSLT_CTN = #{grosRsltCtn} 		/*  */
				 ,  GROS_RSLT_INPT_DR_ID = #{grosRsltInptDrId} 		/*  */
				 ,  PCTS_EXMN_YN = #{pctsExmnYn} 		/*  */
		         , CVR_MNGN_RSLT_YN = nvl(trim(#{cvrMngnRsltYn}), CVR_MNGN_RSLT_YN)
		         , CVR_MNGN_RSLT_SPSB_CTN = nvl(trim(#{cvrMngnRsltSpsbCtn}), CVR_MNGN_RSLT_SPSB_CTN)
				 ,  KRDX_YN = #{krdxYn} 		/*  */
				 ,  CNLS_DX_CTN = #{cnlsDxCtn} 		/*  */
				 ,  EXRS_RMRK_CTN = #{exrsRmrkCtn} 		/*  */
				 ,  UPDT_BEFR_RSLT_CTN = #{updtBefrRsltCtn} 		/*  */
				 ,  RSLT_REDN_YN = #{rsltRednYn} 		/*  */
				 ,  RSLT_REDR_ID = #{rsltRedrId} 		/*  */
				 ,  RSLT_REDN_DT = to_date(#{rsltRednDt}, 'yyyymmddhh24miss') 		/*  */
		     ,  LAST_UPDR_ID = #{gvUserId} 		/*  */
		     ,  LAST_UPDT_IP = #{gvUserIp} 		/*  */
		     ,  LAST_UPDT_DT = sysdate 		/*  */
		     ,  LAST_UPDT_CLNT_PRGM_ID= #{gvClntPrgmId} 		/*  */
		     ,  LAST_UPDT_SRVR_PRGM_ID= #{gvSrvrPrgmId} 		/*  */
		     ,  ADTN_INTR_YN = #{adtnIntrYn} 		/*  */
		     ,  EXRS_DTLS_FRMT_CD = #{exrsDtlsFrmtCd} 		/*  */
		     ,  RSLT_RPRT_PRRN_YMD = to_date(#{rsltRprtPrrnYmd}, 'yyyyMMdd')  /*  */
		     ,  FRSC_EXRS_CTN = #{frscExrsCtn}
		 WHERE  PTNO = #{ptno}
			 AND  ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			 AND  ORDR_SNO = #{ordrSno}
			 AND  EXMN_CD = #{exmnCd}
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-deleteSzresulmt (delete SZRESULMT) 
        Description :                                           Table[SZRESULMT]'s delete method
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<delete id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-deleteSzresulmt"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-deleteSzresulmt */
		DELETE  FROM SZRESULMT
		 WHERE PTNO = #{ptno}
			AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			AND ORDR_SNO = #{ordrSno}
			AND EXMN_CD = #{exmnCd}
	</delete>


	<resultMap id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneSzresulmt-result" type="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="ordrSno" column="ORDR_SNO"/>
		<result property="spcmNo" column="SPCM_NO"/>
		<result property="exmnCd" column="EXMN_CD"/>
		<result property="rprtDt" column="RPRT_DT"/>
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exmnPrssCd" column="EXMN_PRSS_CD"/>
		<result property="exrsUpdtYn" column="EXRS_UPDT_YN"/>
		<result property="exrsUpreCtn" column="EXRS_UPRE_CTN"/>
		<result property="intrYn" column="INTR_YN"/>
		<result property="indrId1" column="INDR_ID1"/>
		<result property="indrId2" column="INDR_ID2"/>
		<result property="indrId3" column="INDR_ID3"/>
		<result property="rprrId" column="RPRR_ID"/>
		<result property="exrsFrmtCd" column="EXRS_FRMT_CD"/>
		<result property="exrsUnitNm" column="EXRS_UNIT_NM"/>
		<result property="exrsNcvlVl" column="EXRS_NCVL_VL"/>
		<result property="exrsCtn" column="EXRS_CTN"/>
		<result property="hlscKornExrsCtn" column="HLSC_KORN_EXRS_CTN"/>
		<result property="abnrOpnnYn" column="ABNR_OPNN_YN"/>
		<result property="trnbId" column="TRNB_ID"/>
		<result property="nrmlUplmNcvlVl" column="NRML_UPLM_NCVL_VL"/>
		<result property="nrmlLwlmNcvlVl" column="NRML_LWLM_NCVL_VL"/>
		<result property="rprtUplmNcvlVl" column="RPRT_UPLM_NCVL_VL"/>
		<result property="rprtLwlmNcvlVl" column="RPRT_LWLM_NCVL_VL"/>
		<result property="seraUplmNcvlVl" column="SERA_UPLM_NCVL_VL"/>
		<result property="seraLwlmNcvlVl" column="SERA_LWLM_NCVL_VL"/>
		<result property="dlpnDvsnCd" column="DLPN_DVSN_CD"/>
		<result property="spcmImagEn" column="SPCM_IMAG_EN"/>
		<result property="grosRsltCtn" column="GROS_RSLT_CTN"/>
		<result property="grosRsltInptDrId" column="GROS_RSLT_INPT_DR_ID"/>
		<result property="pctsExmnYn" column="PCTS_EXMN_YN"/>
		<result property="cvrMngnRsltYn" column="CVR_MNGN_RSLT_YN"/>
		<result property="cvrMngnRsltSpsbCtn" column="CVR_MNGN_RSLT_SPSB_CTN"/>
		<result property="krdxYn" column="KRDX_YN"/>
		<result property="cnlsDxCtn" column="CNLS_DX_CTN"/>
		<result property="exrsRmrkCtn" column="EXRS_RMRK_CTN"/>
		<result property="updtBefrRsltCtn" column="UPDT_BEFR_RSLT_CTN"/>
		<result property="rsltRednYn" column="RSLT_REDN_YN"/>
		<result property="rsltRedrId" column="RSLT_REDR_ID"/>
		<result property="rsltRednDt" column="RSLT_REDN_DT"/>
		<result property="adtnIntrYn" column="ADTN_INTR_YN"/>
		<result property="exrsDtlsFrmtCd" column="EXRS_DTLS_FRMT_CD"/>
		<result property="rsltRprtPrrnYmd" column="RSLT_RPRT_PRRN_YMD"/>
		<result property="frscExrsCtn" column="FRSC_EXRS_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneSzresulmt (selectOne SZRESULMT) 
        Description :                                           Table[SZRESULMT]'s selectOne method
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
		resultMap : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneSzresulmt-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneSzresulmt"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  resultMap="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneSzresulmt-result" useCache="true" flushCache="false">
		SELECT /*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneSzresulmt */ 
		       PTNO        /*  */
		      ,to_char(ORDR_YMD, 'yyyymmdd') as ORDR_YMD        /*  */
		      ,ORDR_SNO        /*  */
		      ,SPCM_NO        /*  */
		      ,EXMN_CD        /*  */
		      ,to_char(RPRT_DT, 'yyyymmddhh24miss') as RPRT_DT        /*  */
		      ,EXCF_CD        /*  */
		      ,EXMN_PRSS_CD        /*  */
		      ,EXRS_UPDT_YN        /*  */
		      ,EXRS_UPRE_CTN        /*  */
		      ,INTR_YN        /*  */
		      ,INDR_ID1        /*  */
		      ,INDR_ID2        /*  */
		      ,INDR_ID3        /*  */
		      ,RPRR_ID        /*  */
		      ,EXRS_FRMT_CD        /*  */
		      ,EXRS_UNIT_NM        /*  */
		      ,EXRS_NCVL_VL        /*  */
		      ,EXRS_CTN        /*  */
		      ,HLSC_KORN_EXRS_CTN        /*  */
		      ,ABNR_OPNN_YN        /*  */
		      ,TRNB_ID        /*  */
		      ,NRML_UPLM_NCVL_VL        /*  */
		      ,NRML_LWLM_NCVL_VL        /*  */
		      ,RPRT_UPLM_NCVL_VL        /*  */
		      ,RPRT_LWLM_NCVL_VL        /*  */
		      ,SERA_UPLM_NCVL_VL        /*  */
		      ,SERA_LWLM_NCVL_VL        /*  */
		      ,DLPN_DVSN_CD        /*  */
		      ,SPCM_IMAG_EN        /*  */
		      ,GROS_RSLT_CTN        /*  */
		      ,GROS_RSLT_INPT_DR_ID        /*  */
		      ,PCTS_EXMN_YN        /*  */
		      ,CVR_MNGN_RSLT_YN        /*  */
		      ,CVR_MNGN_RSLT_SPSB_CTN        /*  */
		      ,KRDX_YN        /*  */
		      ,CNLS_DX_CTN        /*  */
		      ,EXRS_RMRK_CTN        /*  */
		      ,UPDT_BEFR_RSLT_CTN        /*  */
		      ,RSLT_REDN_YN        /*  */
		      ,RSLT_REDR_ID        /*  */
		      ,to_char(RSLT_REDN_DT, 'yyyymmddhh24miss') as RSLT_REDN_DT        /*  */
		      ,ADTN_INTR_YN        /*  */
		      ,EXRS_DTLS_FRMT_CD        /*  */
		      ,to_char(RSLT_RPRT_PRRN_YMD, 'yyyyMMdd') as RSLT_RPRT_PRRN_YMD /*  */
		      ,FRSC_EXRS_CTN
		  FROM SZRESULMT
		 WHERE PTNO = #{ptno}
		    AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		    AND ORDR_SNO = #{ordrSno}
		    AND EXMN_CD = #{exmnCd}
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzresulmt-result" type="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="ordrSno" column="ORDR_SNO"/>
		<result property="spcmNo" column="SPCM_NO"/>
		<result property="exmnCd" column="EXMN_CD"/>
		<result property="rprtDt" column="RPRT_DT"/>
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exmnPrssCd" column="EXMN_PRSS_CD"/>
		<result property="exrsUpdtYn" column="EXRS_UPDT_YN"/>
		<result property="exrsUpreCtn" column="EXRS_UPRE_CTN"/>
		<result property="intrYn" column="INTR_YN"/>
		<result property="indrId1" column="INDR_ID1"/>
		<result property="indrId2" column="INDR_ID2"/>
		<result property="indrId3" column="INDR_ID3"/>
		<result property="rprrId" column="RPRR_ID"/>
		<result property="exrsFrmtCd" column="EXRS_FRMT_CD"/>
		<result property="exrsUnitNm" column="EXRS_UNIT_NM"/>
		<result property="exrsNcvlVl" column="EXRS_NCVL_VL"/>
		<result property="exrsCtn" column="EXRS_CTN"/>
		<result property="hlscKornExrsCtn" column="HLSC_KORN_EXRS_CTN"/>
		<result property="abnrOpnnYn" column="ABNR_OPNN_YN"/>
		<result property="trnbId" column="TRNB_ID"/>
		<result property="nrmlUplmNcvlVl" column="NRML_UPLM_NCVL_VL"/>
		<result property="nrmlLwlmNcvlVl" column="NRML_LWLM_NCVL_VL"/>
		<result property="rprtUplmNcvlVl" column="RPRT_UPLM_NCVL_VL"/>
		<result property="rprtLwlmNcvlVl" column="RPRT_LWLM_NCVL_VL"/>
		<result property="seraUplmNcvlVl" column="SERA_UPLM_NCVL_VL"/>
		<result property="seraLwlmNcvlVl" column="SERA_LWLM_NCVL_VL"/>
		<result property="dlpnDvsnCd" column="DLPN_DVSN_CD"/>
		<result property="spcmImagEn" column="SPCM_IMAG_EN"/>
		<result property="grosRsltCtn" column="GROS_RSLT_CTN"/>
		<result property="grosRsltInptDrId" column="GROS_RSLT_INPT_DR_ID"/>
		<result property="pctsExmnYn" column="PCTS_EXMN_YN"/>
		<result property="cvrMngnRsltYn" column="CVR_MNGN_RSLT_YN"/>
		<result property="cvrMngnRsltSpsbCtn" column="CVR_MNGN_RSLT_SPSB_CTN"/>
		<result property="krdxYn" column="KRDX_YN"/>
		<result property="cnlsDxCtn" column="CNLS_DX_CTN"/>
		<result property="exrsRmrkCtn" column="EXRS_RMRK_CTN"/>
		<result property="updtBefrRsltCtn" column="UPDT_BEFR_RSLT_CTN"/>
		<result property="rsltRednYn" column="RSLT_REDN_YN"/>
		<result property="rsltRedrId" column="RSLT_REDR_ID"/>
		<result property="rsltRednDt" column="RSLT_REDN_DT"/>
		<result property="adtnIntrYn" column="ADTN_INTR_YN"/>
		<result property="exrsDtlsFrmtCd" column="EXRS_DTLS_FRMT_CD"/>
		<result property="frscExrsCtn" column="FRSC_EXRS_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzresulmt (list SZRESULMT) 
        Description :                                           Table[SZRESULMT]'s list method
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
		resultMap : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzresulmt-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzresulmt"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  resultMap="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzresulmt-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzresulmt */
		SELECT	PTNO		/*  */
					,to_char(ORDR_YMD, 'yyyymmdd') as ORDR_YMD		/*  */
					,ORDR_SNO		/*  */
					,SPCM_NO		/*  */
					,EXMN_CD		/*  */
					,to_char(RPRT_DT, 'yyyymmddhh24miss') as RPRT_DT		/*  */
					,EXCF_CD		/*  */
					,EXMN_PRSS_CD		/*  */
					,EXRS_UPDT_YN		/*  */
					,EXRS_UPRE_CTN		/*  */
					,INTR_YN		/*  */
					,INDR_ID1		/*  */
					,INDR_ID2		/*  */
					,INDR_ID3		/*  */
					,RPRR_ID		/*  */
					,EXRS_FRMT_CD		/*  */
					,EXRS_UNIT_NM		/*  */
					,EXRS_NCVL_VL		/*  */
					,EXRS_CTN		/*  */
					,HLSC_KORN_EXRS_CTN		/*  */
					,ABNR_OPNN_YN		/*  */
					,TRNB_ID		/*  */
					,NRML_UPLM_NCVL_VL		/*  */
					,NRML_LWLM_NCVL_VL		/*  */
					,RPRT_UPLM_NCVL_VL		/*  */
					,RPRT_LWLM_NCVL_VL		/*  */
					,SERA_UPLM_NCVL_VL		/*  */
					,SERA_LWLM_NCVL_VL		/*  */
					,DLPN_DVSN_CD		/*  */
					,SPCM_IMAG_EN		/*  */
					,GROS_RSLT_CTN		/*  */
					,GROS_RSLT_INPT_DR_ID		/*  */
					,PCTS_EXMN_YN		/*  */
					,CVR_MNGN_RSLT_YN		/*  */
					,CVR_MNGN_RSLT_SPSB_CTN		/*  */
					,KRDX_YN		/*  */
					,CNLS_DX_CTN		/*  */
					,EXRS_RMRK_CTN		/*  */
					,UPDT_BEFR_RSLT_CTN		/*  */
					,RSLT_REDN_YN		/*  */
					,RSLT_REDR_ID		/*  */
					,to_char(RSLT_REDN_DT, 'yyyymmddhh24miss') as RSLT_REDN_DT		/*  */
					,ADTN_INTR_YN		/*  */
					,EXRS_DTLS_FRMT_CD		/*  */
		            ,FRSC_EXRS_CTN
		  FROM	SZRESULMT
		 WHERE 1=1
		<choose>
		    <when test='afiPrsgNm == "ptno_ordrYmd_ordrSno_exmnCd"'>
		<!-- #{afiPrsgNm} -->
			AND PTNO = #{ptno}
			AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			AND ORDR_SNO = #{ordrSno}
			AND EXMN_CD = #{exmnCd}
		    --AND nvl(EXRS_UPDT_YN, 'N') = 'N'
		    </when>
		    <when test='afiPrsgNm == "ptno_ordrYmd_ordrSno"'>
			AND PTNO = #{ptno}
			AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			AND ORDR_SNO = #{ordrSno}
		    </when>
		    <when test='afiPrsgNm == "ptno_exmnCd"'>
			AND PTNO = #{ptno}
			AND EXMN_CD = #{exmnCd}
		    </when>
		    <otherwise>
			AND PTNO = #{ptno}
			AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			AND ORDR_SNO = #{ordrSno}
			AND EXMN_CD = #{exmnCd}
		    </otherwise>
		</choose>
	</select>




	<resultMap id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneDummy-result" type="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO">
	
		<result property="evntTypCd" column="EVNT_TYP_CD"/>
		<result property="rprrId" column="RPRR_ID"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="tlclDt" column="TLCL_DT"/>
		<result property="rplyYn" column="RPLY_YN"/>
		<result property="cvrCmntCtn" column="CVR_CMNT_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneDummy (selectOneDummy) 
        Description :                                           selectOneDummy
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
		resultMap : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneDummy-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneDummy"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  resultMap="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneDummy-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-selectOneDummy */
		select  'U'         as EVNT_TYP_CD          -- 이벤트타입코드
		        , '' as RPRR_ID
		        , '' as RMRK_CTN
		        , '' as TLCL_DT
		        , '' as RPLY_YN
		        , '' as CVR_CMNT_CTN /*CVR커멘트내용*/
		  from  dual
	</select>






    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateGnrlExmnMngm (일반검사관리) 
        Description :                                           일반검사관리
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateGnrlExmnMngm"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		  /*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateGnrlExmnMngm */
		UPDATE SZRESULMT  
		       SET EXCF_CD = #{excfCd} 		/*  */
					,EXMN_PRSS_CD = #{exmnPrssCd} 		/*  */
					,EXRS_UPDT_YN = #{exrsUpdtYn} 		/*  */
					,EXRS_UPRE_CTN = #{exrsUpreCtn} 		/*  */
					,INTR_YN = #{intrYn} 		/*  */
					,INDR_ID1 = #{indrId1} 		/*  */
					,INDR_ID2 = #{indrId2} 		/*  */
					,INDR_ID3 = #{indrId3} 		/*  */
					,RPRR_ID = #{rprrId} 		/*  */
					,EXRS_FRMT_CD = #{exrsFrmtCd} 		/*  */
					,EXRS_UNIT_NM = #{exrsUnitNm} 		/*  */
					,EXRS_NCVL_VL = #{exrsNcvlVl} 		/*  */
					,EXRS_CTN = #{exrsCtn} 		/*  */
					,HLSC_KORN_EXRS_CTN = #{hlscKornExrsCtn} 		/*  */
					,ABNR_OPNN_YN = #{abnrOpnnYn} 		/*  */
					,TRNB_ID = #{trnbId} 		/*  */
					,NRML_UPLM_NCVL_VL = #{nrmlUplmNcvlVl} 		/*  */
					,NRML_LWLM_NCVL_VL = #{nrmlLwlmNcvlVl} 		/*  */
					,RPRT_UPLM_NCVL_VL = #{rprtUplmNcvlVl} 		/*  */
					,RPRT_LWLM_NCVL_VL = #{rprtLwlmNcvlVl} 		/*  */
					,SERA_UPLM_NCVL_VL = #{seraUplmNcvlVl} 		/*  */
					,SERA_LWLM_NCVL_VL = #{seraLwlmNcvlVl} 		/*  */
					,DLPN_DVSN_CD = #{dlpnDvsnCd} 		/*  */
					,SPCM_IMAG_EN = #{spcmImagEn} 		/*  */
					,GROS_RSLT_CTN = #{grosRsltCtn} 		/*  */
					,GROS_RSLT_INPT_DR_ID = #{grosRsltInptDrId} 		/*  */
					,PCTS_EXMN_YN = #{pctsExmnYn} 		/*  */
		            , CVR_MNGN_RSLT_YN = nvl(trim(#{cvrMngnRsltYn}), CVR_MNGN_RSLT_YN)
		            , CVR_MNGN_RSLT_SPSB_CTN = nvl(trim(#{cvrMngnRsltSpsbCtn}), CVR_MNGN_RSLT_SPSB_CTN)
					,KRDX_YN = #{krdxYn} 		/*  */
					,CNLS_DX_CTN = #{cnlsDxCtn} 		/*  */
					,EXRS_RMRK_CTN = #{exrsRmrkCtn} 		/*  */
					,UPDT_BEFR_RSLT_CTN = #{updtBefrRsltCtn} 		/*  */
					,RSLT_REDN_YN = #{rsltRednYn} 		/*  */
					,RSLT_REDR_ID = #{rsltRedrId} 		/*  */
					,RSLT_REDN_DT = to_date(#{rsltRednDt}, 'yyyymmddhh24miss') 		/*  */
		            ,LAST_UPDR_ID = #{gvUserId} 		/*  */
		            ,LAST_UPDT_IP = #{gvUserIp} 		/*  */
		            ,LAST_UPDT_DT = sysdate 		/*  */
		            ,LAST_UPDT_CLNT_PRGM_ID= #{gvClntPrgmId} 		/*  */
		            ,LAST_UPDT_SRVR_PRGM_ID= #{gvSrvrPrgmId} 		/*  */
					,ADTN_INTR_YN = #{adtnIntrYn} 		/*  */
					,EXRS_DTLS_FRMT_CD = #{exrsDtlsFrmtCd} 		/*  */	
		 where PTNO = #{ptno}
			and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			and ORDR_SNO = #{ordrSno} 
			and EXMN_CD = #{exmnCd}
		    and  EXMN_PRSS_CD = #{exmnPrssCd1}
		    and  #{exrsUpdtYn1} =#{exrsUpdtYn1} 
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-insertIntgExrsHx () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<insert id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-insertIntgExrsHx"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-insertIntgExrsHx */
		<![CDATA[
			insert
			  into SZRESULHT
				 (
				   PTNO
				 , ORDR_YMD
				 , ORDR_SNO
				 , EXMN_CD
				 , EXRS_SNO
				 , SPCM_NO
				 , RPRT_DT
				 , EXCF_CD
				 , EXMN_PRSS_CD
				 , EXRS_UPRE_CTN
				 , INTR_YN
				 , INDR_ID1
				 , INDR_ID2
				 , INDR_ID3
				 , RPRR_ID
				 , EXRS_FRMT_CD
				 , EXRS_UNIT_NM
				 , EXRS_NCVL_VL
				 , EXRS_CTN
				 , HLSC_KORN_EXRS_CTN
				 , ABNR_OPNN_YN, TRNB_ID
				 , NRML_UPLM_NCVL_VL
				 , NRML_LWLM_NCVL_VL
				 , RPRT_UPLM_NCVL_VL
				 , RPRT_LWLM_NCVL_VL
				 , SERA_UPLM_NCVL_VL
				 , SERA_LWLM_NCVL_VL
				 , DLPN_DVSN_CD
				 , SPCM_IMAG_EN
				 , GROS_RSLT_CTN
				 , GROS_RSLT_INPT_DR_ID
				 , PCTS_EXMN_YN
				 , CVR_MNGN_RSLT_YN
				 , CVR_MNGN_RSLT_SPSB_CTN
				 , KRDX_YN
				 , CNLS_DX_CTN
				 , EXRS_RMRK_CTN
				 , UPDT_BEFR_RSLT_CTN
				 , RSLT_REDN_YN
				 , RSLT_REDR_ID
				 , RSLT_REDN_DT
				 , ADTN_INTR_YN
				 , EXRS_DTLS_FRMT_CD
		         , RSLT_RPRT_PRRN_YMD
		         , FRSC_EXRS_CTN
				 , FRST_RGSR_ID
				 , FRST_RGST_IP
				 , FRST_RGST_DT
				 , FRST_RGST_CLNT_PRGM_ID
				 , FRST_RGST_SRVR_PRGM_ID
				 , LAST_UPDR_ID
				 , LAST_UPDT_IP
				 , LAST_UPDT_DT
				 , LAST_UPDT_CLNT_PRGM_ID
				 , LAST_UPDT_SRVR_PRGM_ID
				 )     
			select PTNO
				 , ORDR_YMD
				 , ORDR_SNO
				 , EXMN_CD
				 , (select nvl(max(EXRS_SNO), 0) + 1
					  from SZRESULHT
					 where PTNO     = #{ptno}
					   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyyMMdd')
					   and ORDR_SNO = #{ordrSno}
					   and EXMN_CD  = #{exmnCd}) as EXRS_SNO
				 , SPCM_NO
				 , RPRT_DT
				 , EXCF_CD
				 , EXMN_PRSS_CD
				 , EXRS_UPRE_CTN
				 , INTR_YN
				 , INDR_ID1
				 , INDR_ID2
				 , INDR_ID3
				 , RPRR_ID
				 , EXRS_FRMT_CD
				 , EXRS_UNIT_NM
				 , EXRS_NCVL_VL
				 , EXRS_CTN
				 , HLSC_KORN_EXRS_CTN
				 , ABNR_OPNN_YN, TRNB_ID
				 , NRML_UPLM_NCVL_VL
				 , NRML_LWLM_NCVL_VL
				 , RPRT_UPLM_NCVL_VL
				 , RPRT_LWLM_NCVL_VL
				 , SERA_UPLM_NCVL_VL
				 , SERA_LWLM_NCVL_VL
				 , DLPN_DVSN_CD
				 , SPCM_IMAG_EN
				 , GROS_RSLT_CTN
				 , GROS_RSLT_INPT_DR_ID
				 , PCTS_EXMN_YN
				 , CVR_MNGN_RSLT_YN
				 , CVR_MNGN_RSLT_SPSB_CTN
				 , KRDX_YN
				 , CNLS_DX_CTN
				 , EXRS_RMRK_CTN
				 , UPDT_BEFR_RSLT_CTN
				 , RSLT_REDN_YN
				 , RSLT_REDR_ID
				 , RSLT_REDN_DT
				 , ADTN_INTR_YN
				 , EXRS_DTLS_FRMT_CD
		         , RSLT_RPRT_PRRN_YMD
		         , FRSC_EXRS_CTN
				 , FRST_RGSR_ID
				 , FRST_RGST_IP
				 , FRST_RGST_DT
				 , FRST_RGST_CLNT_PRGM_ID
				 , FRST_RGST_SRVR_PRGM_ID
				 , LAST_UPDR_ID
				 , LAST_UPDT_IP
				 , LAST_UPDT_DT
				 , LAST_UPDT_CLNT_PRGM_ID
				 , LAST_UPDT_SRVR_PRGM_ID
			  from SZRESULMT
			 where PTNO     = #{ptno}
			   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyyMMdd')
			   and ORDR_SNO = #{ordrSno}
			   and EXMN_CD  = #{exmnCd}
		]]>
	</insert>


	<resultMap id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht-result" type="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO">
	
		<result property="ctn" column="CTN"/>
		<result property="ptno" column="PTNO"/>
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="ordrSno" column="ORDR_SNO"/>
		<result property="exmnCd" column="EXMN_CD"/>
		<result property="exrsSno" column="EXRS_SNO"/>
		<result property="spcmNo" column="SPCM_NO"/>
		<result property="rprtDt" column="RPRT_DT"/>
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exmnPrssCd" column="EXMN_PRSS_CD"/>
		<result property="exrsUpreCtn" column="EXRS_UPRE_CTN"/>
		<result property="intrYn" column="INTR_YN"/>
		<result property="indrId1" column="INDR_ID1"/>
		<result property="indrId2" column="INDR_ID2"/>
		<result property="indrId3" column="INDR_ID3"/>
		<result property="rprrId" column="RPRR_ID"/>
		<result property="exrsFrmtCd" column="EXRS_FRMT_CD"/>
		<result property="exrsUnitNm" column="EXRS_UNIT_NM"/>
		<result property="exrsNcvlVl" column="EXRS_NCVL_VL"/>
		<result property="exrsCtn" column="EXRS_CTN"/>
		<result property="hlscKornExrsCtn" column="HLSC_KORN_EXRS_CTN"/>
		<result property="abnrOpnnYn" column="ABNR_OPNN_YN"/>
		<result property="trnbId" column="TRNB_ID"/>
		<result property="nrmlUplmNcvlVl" column="NRML_UPLM_NCVL_VL"/>
		<result property="nrmlLwlmNcvlVl" column="NRML_LWLM_NCVL_VL"/>
		<result property="rprtUplmNcvlVl" column="RPRT_UPLM_NCVL_VL"/>
		<result property="rprtLwlmNcvlVl" column="RPRT_LWLM_NCVL_VL"/>
		<result property="seraUplmNcvlVl" column="SERA_UPLM_NCVL_VL"/>
		<result property="seraLwlmNcvlVl" column="SERA_LWLM_NCVL_VL"/>
		<result property="dlpnDvsnCd" column="DLPN_DVSN_CD"/>
		<result property="spcmImagEn" column="SPCM_IMAG_EN"/>
		<result property="grosRsltCtn" column="GROS_RSLT_CTN"/>
		<result property="grosRsltInptDrId" column="GROS_RSLT_INPT_DR_ID"/>
		<result property="pctsExmnYn" column="PCTS_EXMN_YN"/>
		<result property="cvrMngnRsltYn" column="CVR_MNGN_RSLT_YN"/>
		<result property="cvrMngnRsltSpsbCtn" column="CVR_MNGN_RSLT_SPSB_CTN"/>
		<result property="krdxYn" column="KRDX_YN"/>
		<result property="cnlsDxCtn" column="CNLS_DX_CTN"/>
		<result property="exrsRmrkCtn" column="EXRS_RMRK_CTN"/>
		<result property="updtBefrRsltCtn" column="UPDT_BEFR_RSLT_CTN"/>
		<result property="rsltRednYn" column="RSLT_REDN_YN"/>
		<result property="rsltRedrId" column="RSLT_REDR_ID"/>
		<result property="rsltRednDt" column="RSLT_REDN_DT"/>
		<result property="exrsDtlsFrmtCd" column="EXRS_DTLS_FRMT_CD"/>
		<result property="frstRgsrId" column="FRST_RGSR_ID"/>
		<result property="frstRgstIp" column="FRST_RGST_IP"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="frstRgstClntPrgmId" column="FRST_RGST_CLNT_PRGM_ID"/>
		<result property="frstRgstSrvrPrgmId" column="FRST_RGST_SRVR_PRGM_ID"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="lastUpdtClntPrgmId" column="LAST_UPDT_CLNT_PRGM_ID"/>
		<result property="lastUpdtSrvrPrgmId" column="LAST_UPDT_SRVR_PRGM_ID"/>
		<result property="indrNm1" column="INDR_NM_1"/>
		<result property="indrNm2" column="INDR_NM_2"/>
		<result property="indrNm3" column="INDR_NM_3"/>
		<result property="userNm" column="USER_NM"/>
		<result property="crtfDt" column="CRTF_DT"/>
		<result property="frscExrsCtn" column="FRSC_EXRS_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht (검사결과 히스토리 조회) 
        Description :                                           검사결과 히스토리 조회
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
		resultMap : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  resultMap="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht */
		<![CDATA[
		select 
		      '최종' as CTN
		    , PTNO
		    , to_char(ORDR_YMD, 'yyyymmdd') as ORDR_YMD
		    , ORDR_SNO
		    , EXMN_CD
		    , 0 as   EXRS_SNO
		    , SPCM_NO
		    , to_char(RPRT_DT, 'yyyymmddhh24miss') as RPRT_DT
		    , EXCF_CD
		    , EXMN_PRSS_CD
		    , EXRS_UPRE_CTN
		    , INTR_YN
		    , INDR_ID1
		    , INDR_ID2
		    , INDR_ID3
		    , RPRR_ID
		    , EXRS_FRMT_CD
		    , EXRS_UNIT_NM
		    , EXRS_NCVL_VL
		    , EXRS_CTN    /* CLOB */
		    , HLSC_KORN_EXRS_CTN
		    , ABNR_OPNN_YN
		    , TRNB_ID
		    , NRML_UPLM_NCVL_VL
		    , NRML_LWLM_NCVL_VL
		    , RPRT_UPLM_NCVL_VL
		    , RPRT_LWLM_NCVL_VL
		    , SERA_UPLM_NCVL_VL
		    , SERA_LWLM_NCVL_VL
		    , DLPN_DVSN_CD
		    , SPCM_IMAG_EN
		    , GROS_RSLT_CTN   /* CLOB */
		    , GROS_RSLT_INPT_DR_ID
		    , PCTS_EXMN_YN
		    , CVR_MNGN_RSLT_YN
		    , CVR_MNGN_RSLT_SPSB_CTN
		    , KRDX_YN
		    , CNLS_DX_CTN     /* CLOB */
		    , EXRS_RMRK_CTN     /* CLOB */
		    , UPDT_BEFR_RSLT_CTN
		    , RSLT_REDN_YN
		    , RSLT_REDR_ID
		    , to_char(RSLT_REDN_DT, 'yyyymmddhh24miss') as RSLT_REDN_DT
		    , EXRS_DTLS_FRMT_CD
		    , FRST_RGSR_ID
		    , FRST_RGST_IP
		    , to_char(FRST_RGST_DT, 'yyyymmddhh24miss') as  FRST_RGST_DT
		    , FRST_RGST_CLNT_PRGM_ID
		    , FRST_RGST_SRVR_PRGM_ID
		    , LAST_UPDR_ID
		    , LAST_UPDT_IP
		    , to_char(LAST_UPDT_DT, 'yyyymmddhh24miss') as  LAST_UPDT_DT
		    , LAST_UPDT_CLNT_PRGM_ID
		    , LAST_UPDT_SRVR_PRGM_ID
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = INDR_ID1 )  as INDR_NM_1 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = INDR_ID2 )  as INDR_NM_2 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = INDR_ID3 )  as INDR_NM_3 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = RPRR_ID )  as USER_NM
		   , to_char(CRTF_DT, 'yyyymmddhh24mi') as CRTF_DT
		   , FRSC_EXRS_CTN /* 동결절편검사결과내용 */
		  FROM SZRESULMT
		 WHERE PTNO = #{ptno}
		    AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		    AND ORDR_SNO = #{ordrSno}
		    AND EXMN_CD = #{exmnCd}
		union all
		select 
		      '이전' as CTN
		    , PTNO
		    , to_char(ORDR_YMD, 'yyyymmdd') as ORDR_YMD
		    , ORDR_SNO
		    , EXMN_CD
		    , EXRS_SNO
		    , SPCM_NO
		    , to_char(RPRT_DT, 'yyyymmddhh24miss') as RPRT_DT
		    , EXCF_CD
		    , EXMN_PRSS_CD
		    , EXRS_UPRE_CTN
		    , INTR_YN
		    , INDR_ID1
		    , INDR_ID2
		    , INDR_ID3
		    , RPRR_ID
		    , EXRS_FRMT_CD
		    , EXRS_UNIT_NM
		    , EXRS_NCVL_VL
		    , EXRS_CTN    /* CLOB */
		    , HLSC_KORN_EXRS_CTN
		    , ABNR_OPNN_YN
		    , TRNB_ID
		    , NRML_UPLM_NCVL_VL
		    , NRML_LWLM_NCVL_VL
		    , RPRT_UPLM_NCVL_VL
		    , RPRT_LWLM_NCVL_VL
		    , SERA_UPLM_NCVL_VL
		    , SERA_LWLM_NCVL_VL
		    , DLPN_DVSN_CD
		    , SPCM_IMAG_EN
		    , GROS_RSLT_CTN   /* CLOB */
		    , GROS_RSLT_INPT_DR_ID
		    , PCTS_EXMN_YN
		    , CVR_MNGN_RSLT_YN
		    , CVR_MNGN_RSLT_SPSB_CTN
		    , KRDX_YN
		    , CNLS_DX_CTN     /* CLOB */
		    , EXRS_RMRK_CTN     /* CLOB */
		    , UPDT_BEFR_RSLT_CTN
		    , RSLT_REDN_YN
		    , RSLT_REDR_ID
		    , to_char(RSLT_REDN_DT, 'yyyymmddhh24miss') as RSLT_REDN_DT
		    , EXRS_DTLS_FRMT_CD
		    , FRST_RGSR_ID
		    , FRST_RGST_IP
		    , to_char(FRST_RGST_DT, 'yyyymmddhh24miss') as  FRST_RGST_DT
		    , FRST_RGST_CLNT_PRGM_ID
		    , FRST_RGST_SRVR_PRGM_ID
		    , LAST_UPDR_ID
		    , LAST_UPDT_IP
		    , to_char(LAST_UPDT_DT, 'yyyymmddhh24miss') as  LAST_UPDT_DT
		    , LAST_UPDT_CLNT_PRGM_ID
		    , LAST_UPDT_SRVR_PRGM_ID
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = INDR_ID1 )  as INDR_NM_1 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = INDR_ID2 )  as INDR_NM_2 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = INDR_ID3 )  as INDR_NM_3 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = RPRR_ID )  as USER_NM
		    , to_char(CRTF_DT, 'yyyymmddhh24mi') as CRTF_DT
		    , FRSC_EXRS_CTN /* 동결절편검사결과내용 */
		  FROM SZRESULHT
		 WHERE PTNO = #{ptno}
		    AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		    AND ORDR_SNO = #{ordrSno}
		    AND EXMN_CD = #{exmnCd}
		  order by 
		           CTN desc
			     , RPRT_DT desc
		         , EXRS_SNO desc
		]]>
	</select>






    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateAlrgInbyExmn (알러지체내 Set 검사 상태처리) 
        Description :                                           알러지체내 Set 검사 상태처리
                                            
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateAlrgInbyExmn"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateAlrgInbyExmn */
		UPDATE  SZRESULMT
		   SET  
			    EXMN_PRSS_CD = #{exmnPrssCd} 		/*  */ 
		     ,  LAST_UPDR_ID = #{gvUserId} 		/*  */
		     ,  LAST_UPDT_IP = #{gvUserIp} 		/*  */
		     ,  LAST_UPDT_DT = sysdate 		/*  */
		     ,  LAST_UPDT_CLNT_PRGM_ID= #{gvClntPrgmId} 		/*  */
		     ,  LAST_UPDT_SRVR_PRGM_ID= #{gvSrvrPrgmId} 		/*  */ 
		 WHERE  PTNO = #{ptno}
			 AND  ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			 AND  ORDR_SNO = #{ordrSno} 
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-deleteAlrgInbyExmn () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<delete id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-deleteAlrgInbyExmn"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-deleteAlrgInbyExmn */
		DELETE  FROM SZRESULMT
		 WHERE PTNO = #{ptno}
			AND ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			AND ORDR_SNO = #{ordrSno}
	</delete>




    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateExrsCrtf () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
    -->	
	<update id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateExrsCrtf"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-updateExrsCrtf */
		UPDATE  SZRESULMT
		   SET  CRTF_DT = sysdate
		     , CRTF_DVSN_CD = #{crtfDvsnCd}
		     , CRTF_IP = #{crtfIp}
		     , ATHN_ID = #{athnId}
		     ,  LAST_UPDR_ID = #{gvUserId} 		/*  */
		     ,  LAST_UPDT_IP = #{gvUserIp} 		/*  */
		     ,  LAST_UPDT_DT = sysdate 		/*  */
		     ,  LAST_UPDT_CLNT_PRGM_ID= #{gvClntPrgmId} 		/*  */
		     ,  LAST_UPDT_SRVR_PRGM_ID= #{gvSrvrPrgmId} 		/*  */
		 WHERE  PTNO = #{ptno}
			 AND  ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
			 AND  ORDR_SNO = #{ordrSno}
			 AND  EXMN_CD = #{exmnCd}
	</update>


	<resultMap id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht2-result" type="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO">
	
		<result property="ctn" column="CTN"/>
		<result property="ptno" column="PTNO"/>
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="ordrSno" column="ORDR_SNO"/>
		<result property="exmnCd" column="EXMN_CD"/>
		<result property="exrsSno" column="EXRS_SNO"/>
		<result property="spcmNo" column="SPCM_NO"/>
		<result property="rprtDt" column="RPRT_DT"/>
		<result property="excfCd" column="EXCF_CD"/>
		<result property="exmnPrssCd" column="EXMN_PRSS_CD"/>
		<result property="exrsUpreCtn" column="EXRS_UPRE_CTN"/>
		<result property="intrYn" column="INTR_YN"/>
		<result property="indrId1" column="INDR_ID1"/>
		<result property="indrId2" column="INDR_ID2"/>
		<result property="indrId3" column="INDR_ID3"/>
		<result property="rprrId" column="RPRR_ID"/>
		<result property="exrsFrmtCd" column="EXRS_FRMT_CD"/>
		<result property="exrsUnitNm" column="EXRS_UNIT_NM"/>
		<result property="exrsNcvlVl" column="EXRS_NCVL_VL"/>
		<result property="exrsCtn" column="EXRS_CTN"/>
		<result property="hlscKornExrsCtn" column="HLSC_KORN_EXRS_CTN"/>
		<result property="abnrOpnnYn" column="ABNR_OPNN_YN"/>
		<result property="trnbId" column="TRNB_ID"/>
		<result property="nrmlUplmNcvlVl" column="NRML_UPLM_NCVL_VL"/>
		<result property="nrmlLwlmNcvlVl" column="NRML_LWLM_NCVL_VL"/>
		<result property="rprtUplmNcvlVl" column="RPRT_UPLM_NCVL_VL"/>
		<result property="rprtLwlmNcvlVl" column="RPRT_LWLM_NCVL_VL"/>
		<result property="seraUplmNcvlVl" column="SERA_UPLM_NCVL_VL"/>
		<result property="seraLwlmNcvlVl" column="SERA_LWLM_NCVL_VL"/>
		<result property="dlpnDvsnCd" column="DLPN_DVSN_CD"/>
		<result property="spcmImagEn" column="SPCM_IMAG_EN"/>
		<result property="grosRsltCtn" column="GROS_RSLT_CTN"/>
		<result property="grosRsltInptDrId" column="GROS_RSLT_INPT_DR_ID"/>
		<result property="pctsExmnYn" column="PCTS_EXMN_YN"/>
		<result property="cvrMngnRsltYn" column="CVR_MNGN_RSLT_YN"/>
		<result property="cvrMngnRsltSpsbCtn" column="CVR_MNGN_RSLT_SPSB_CTN"/>
		<result property="krdxYn" column="KRDX_YN"/>
		<result property="cnlsDxCtn" column="CNLS_DX_CTN"/>
		<result property="exrsRmrkCtn" column="EXRS_RMRK_CTN"/>
		<result property="updtBefrRsltCtn" column="UPDT_BEFR_RSLT_CTN"/>
		<result property="rsltRednYn" column="RSLT_REDN_YN"/>
		<result property="rsltRedrId" column="RSLT_REDR_ID"/>
		<result property="rsltRednDt" column="RSLT_REDN_DT"/>
		<result property="exrsDtlsFrmtCd" column="EXRS_DTLS_FRMT_CD"/>
		<result property="frstRgsrId" column="FRST_RGSR_ID"/>
		<result property="frstRgstIp" column="FRST_RGST_IP"/>
		<result property="frstRgstDt" column="FRST_RGST_DT"/>
		<result property="frstRgstClntPrgmId" column="FRST_RGST_CLNT_PRGM_ID"/>
		<result property="frstRgstSrvrPrgmId" column="FRST_RGST_SRVR_PRGM_ID"/>
		<result property="lastUpdrId" column="LAST_UPDR_ID"/>
		<result property="lastUpdtIp" column="LAST_UPDT_IP"/>
		<result property="lastUpdtDt" column="LAST_UPDT_DT"/>
		<result property="lastUpdtClntPrgmId" column="LAST_UPDT_CLNT_PRGM_ID"/>
		<result property="lastUpdtSrvrPrgmId" column="LAST_UPDT_SRVR_PRGM_ID"/>
		<result property="indrNm1" column="INDR_NM_1"/>
		<result property="indrNm2" column="INDR_NM_2"/>
		<result property="indrNm3" column="INDR_NM_3"/>
		<result property="userNm" column="USER_NM"/>
		<result property="crtfDt" column="CRTF_DT"/>
		<result property="exrmRptnDt" column="EXRM_RPTN_DT"/>
		<result property="exmnNm" column="EXMN_NM"/>
		<result property="codvCd" column="CODV_CD"/>
		<result property="codvNm" column="CODV_NM"/>
		<result property="spcmNm" column="SPCM_NM"/>
		<result property="cndrNm" column="CNDR_NM"/>
		<result property="afiCndrEnglNm" column="AFI_CNDR_ENGL_NM"/>
		<result property="afiIndrEnglNm1" column="AFI_INDR_ENGL_NM1"/>
		<result property="afiIndrEnglNm2" column="AFI_INDR_ENGL_NM2"/>
		<result property="afiIndrEnglNm3" column="AFI_INDR_ENGL_NM3"/>
		<result property="frscExrsCtn" column="FRSC_EXRS_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht2 (처방키가 아닌 값으로 조회) 
        Description :                       
		parameterType : com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO
		resultMap : com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht2-result
    -->
	<select id="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht2"  parameterType="com.sds.healthcare.ehr.sup.sz.szx.vo.SzxResulmtDVO"  resultMap="com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht2-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-sup-sz-szx-dao-SzxResulmtDAO-listSzxResulht2 */ 
		<![CDATA[
		select 
		      '이전' as CTN
		    , b.PTNO
		    , to_char(b.ORDR_YMD, 'yyyymmdd') as ORDR_YMD
		    , b.ORDR_SNO
		    , b.EXMN_CD
		    , b.EXRS_SNO
		    , b.SPCM_NO
		    , to_char(b.RPRT_DT, 'yyyymmddhh24miss') as RPRT_DT
		    , b.EXCF_CD
		    , b.EXMN_PRSS_CD
		    , b.EXRS_UPRE_CTN
		    , b.INTR_YN
		    , b.INDR_ID1
		    , b.INDR_ID2
		    , b.INDR_ID3
		    , b.RPRR_ID
		    , b.EXRS_FRMT_CD
		    , b.EXRS_UNIT_NM
		    , b.EXRS_NCVL_VL
		    , b.EXRS_CTN    /* CLOB */
		    , b.HLSC_KORN_EXRS_CTN
		    , b.ABNR_OPNN_YN
		    , b.TRNB_ID
		    , b.NRML_UPLM_NCVL_VL
		    , b.NRML_LWLM_NCVL_VL
		    , b.RPRT_UPLM_NCVL_VL
		    , b.RPRT_LWLM_NCVL_VL
		    , b.SERA_UPLM_NCVL_VL
		    , b.SERA_LWLM_NCVL_VL
		    , b.DLPN_DVSN_CD
		    , b.SPCM_IMAG_EN
		    , b.GROS_RSLT_CTN   /* CLOB */
		    , b.GROS_RSLT_INPT_DR_ID
		    , b.PCTS_EXMN_YN
		    , b.CVR_MNGN_RSLT_YN
		    , b.CVR_MNGN_RSLT_SPSB_CTN
		    , b.KRDX_YN
		    , b.CNLS_DX_CTN     /* CLOB */
		    , b.EXRS_RMRK_CTN     /* CLOB */
		    , b.UPDT_BEFR_RSLT_CTN
		    , b.RSLT_REDN_YN
		    , b.RSLT_REDR_ID
		    , to_char(b.RSLT_REDN_DT, 'yyyymmddhh24miss') as RSLT_REDN_DT
		    , b.EXRS_DTLS_FRMT_CD
		    , b.FRST_RGSR_ID
		    , b.FRST_RGST_IP
		    , to_char(b.FRST_RGST_DT, 'yyyymmddhh24miss') as  FRST_RGST_DT
		    , b.FRST_RGST_CLNT_PRGM_ID
		    , b.FRST_RGST_SRVR_PRGM_ID
		    , b.LAST_UPDR_ID
		    , b.LAST_UPDT_IP
		    , to_char(b.LAST_UPDT_DT, 'yyyymmddhh24miss') as  LAST_UPDT_DT
		    , b.LAST_UPDT_CLNT_PRGM_ID
		    , b.LAST_UPDT_SRVR_PRGM_ID
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = b.INDR_ID1 )  as INDR_NM_1 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = b.INDR_ID2 )  as INDR_NM_2 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = b.INDR_ID3 )  as INDR_NM_3 
		    , ( select F_A.USER_NM from CCUSRDPHT F_A where F_A.USER_ID = b.RPRR_ID )  as USER_NM
		   , to_char(b.CRTF_DT, 'yyyymmddhh24mi') as CRTF_DT
		   , to_char(a.EXRM_RPTN_DT, 'yyyymmddhh24mi') as EXRM_RPTN_DT
		  , c.ORDR_NM as EXMN_NM
		  , a.CODV_CD as CODV_CD
		  , decode(a.CODV_CD,'O','외래','I','병동','E','응급','G','일검','U','종검',a.CODV_CD) as CODV_NM
		  , '' as  SPCM_NM
		  , '' as CNDR_NM 
		 , '' as AFI_CNDR_ENGL_NM
		 , '' as AFI_INDR_ENGL_NM1
		 , '' as AFI_INDR_ENGL_NM2
		 , '' as AFI_INDR_ENGL_NM3
		 , b.FRSC_EXRS_CTN /* 동결절편검사결과내용 */
		  FROM  MDEXMORDT a
		      , SZRESULHT b
		      , MDORDRCMT c
		 WHERE a.PTNO = #{ptno}
		 and a.ENFR_DT between to_date(#{enfrDt1},'yyyymmdd') and to_date(#{enfrDt2},'yyyymmdd')
		 and ((#{exmnCd} is null)  or (#{exmnCd} is not null and  a.ORDR_CD = #{exmnCd})) 
		 and ((#{crtfDvsnCd} = 'Y' and b.CRTF_DT is not null ) or (#{crtfDvsnCd}='N' ))
		 and a.PTNO = b.PTNO
		 and a.ORDR_YMD = b.ORDR_YMD
		 and a.ORDR_SNO = b.ORDR_SNO
		 and a.ORDR_CD = b.EXMN_CD
		 and b.EXRS_FRMT_CD in ('T','E')
		 and a.ORDR_CD = c.ORDR_CD
		order by   a.ORDR_CD,a.ORDR_YMD,ORDR_SNO,
		           b.RPRT_DT desc
		         , b.EXRS_SNO desc
		]]>
	</select>



</mapper>