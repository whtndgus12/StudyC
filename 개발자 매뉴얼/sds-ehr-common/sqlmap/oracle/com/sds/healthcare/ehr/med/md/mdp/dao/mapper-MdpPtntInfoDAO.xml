<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    SQL File Name : mapper_MdpPtntInfoDAO_sql.xml 
    Description :                                      의무기록환자정보DAO
                  -->
<mapper namespace="MdpPtntInfoDAO">


	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-selectOneByPtno-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="ptntAlisNm" column="PTNT_ALIS_NM"/>
		<result property="ptntEnsnLsnm" column="PTNT_ENSN_LSNM"/>
		<result property="ptntEnsnNm" column="PTNT_ENSN_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="bsrn" column="BSRN"/>
		<result property="btdt" column="BTDT"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="ntnlCd" column="NTNL_CD"/>
		<result property="psptNo" column="PSPT_NO"/>
		<result property="ptntInfwPathCd" column="PTNT_INFW_PATH_CD"/>
		<result property="inccPtntYn" column="INCC_PTNT_YN"/>
		<result property="rqprNm" column="RQPR_NM"/>
		<result property="rqprTlnoCtn" column="RQPR_TLNO_CTN"/>
		<result property="rqstInprId" column="RQST_INPR_ID"/>
		<result property="rqstInptDt" column="RQST_INPT_DT"/>
		<result property="dethYmd" column="DETH_YMD"/>
		<result property="dethYmdRgsrId" column="DETH_YMD_RGSR_ID"/>
		<result property="prtsRsrn" column="PRTS_RSRN"/>
		<result property="prtsNm" column="PRTS_NM"/>
		<result property="inifAgrmYn" column="INIF_AGRM_YN"/>
		<result property="snstInfmAgrmYn" column="SNST_INFM_AGRM_YN"/>
		<result property="uniqIdntInfmAgrmYn" column="UNIQ_IDNT_INFM_AGRM_YN"/>
		<result property="inifAgrmRgstSystNm" column="INIF_AGRM_RGST_SYST_NM"/>
		<result property="inifAgrmSgntYn" column="INIF_AGRM_SGNT_YN"/>
		<result property="scryYn" column="SCRY_YN"/>
		<result property="insrQlfcExclYn" column="INSR_QLFC_EXCL_YN"/>
		<result property="emailId" column="EMAIL_ID"/>
		<result property="emailDmanNm" column="EMAIL_DMAN_NM"/>
		<result property="cashRcptUseNo" column="CASH_RCPT_USE_NO"/>
		<result property="ovrsRsdtYn" column="OVRS_RSDT_YN"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="ageVl1" column="AGE_VL_1"/>
		<result property="ageVl2" column="AGE_VL_2"/>
		<result property="ageVl3" column="AGE_VL_3"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="clno" column="CLNO"/>
		<result property="afiClno" column="AFI_CLNO"/>
		<result property="cmpnTlno" column="CMPN_TLNO"/>
		<result property="ptntCnpnCtn" column="PTNT_CNPN_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-selectOneByPtno () 
        Description :                                           환자기본정보를 PTNO기준으로 단건 조회한다
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-selectOneByPtno-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-selectOneByPtno"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-selectOneByPtno-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-selectOneByPtno_환자기본정보 단건 조회 */
		        a.PTNO                          as PTNO                                 /*  환자번호 */
		     ,  a.PTNT_NM                       as PTNT_NM                              /*  환자명 */
		     ,  a.PTNT_ALIS_NM                  as PTNT_ALIS_NM                         /*  환자별칭명 */
		     ,  a.PTNT_ENSN_LSNM                as PTNT_ENSN_LSNM                       /*  환자영문성 */
		     ,  a.PTNT_ENSN_NM                  as PTNT_ENSN_NM                         /*  환자영문명 */
		     ,  a.FRRN                          as FRRN                                 /*  앞주민등록번호 */
		     ,  a.BRRN                          as BRRN                                 /*  뒤주민등록번호 */
		     ,  a.BSOV_AFTR_PTNO                as BSOV_AFTR_PTNO                       /*  합본이후환자번호 */
		     ,  a.BSRN                          as BSRN                                 /*  사업자등록번호 */
		     ,  to_char(a.BTDT, 'yyyymmdd')     as BTDT                                 /*  생년월일 */
		     ,  a.GEND_CD                       as GEND_CD                              /*  성별코드 */
		     ,  a.NTNL_CD                       as NTNL_CD                              /*  국적코드 */
		     ,  a.PSPT_NO                       as PSPT_NO                              /*  여권번호 */
		     ,  a.PTNT_INFW_PATH_CD             as PTNT_INFW_PATH_CD                    /*  환자유입경로코드 */
		     ,  a.INCC_PTNT_YN                  as INCC_PTNT_YN                         /*  국제진료소환자여부 */
		     ,  a.RQPR_NM                       as RQPR_NM                              /*  요청자명 */
		     ,  a.RQPR_TLNO_CTN                 as RQPR_TLNO_CTN                        /*  요청자전화번호내용 */
		     ,  a.RQST_INPR_ID                  as RQST_INPR_ID                         /*  요청입력자ID */
		     ,  to_char(a.RQST_INPT_DT, 'yyyymmddhh24miss') as RQST_INPT_DT             /*  요청입력일시 */
		     ,  to_char(a.DETH_YMD, 'YYYYMMDD') as DETH_YMD                             /*  사망일자 */
		     ,  a.DETH_YMD_RGSR_ID              as DETH_YMD_RGSR_ID                     /*  사망일자등록자ID */
		     ,  a.PRTS_RSRN                     as PRTS_RSRN                            /*  부모주민등록번호 */
		     ,  a.PRTS_NM                       as PRTS_NM                              /*  부모명 */
		     ,  a.INIF_AGRM_YN                  as INIF_AGRM_YN                         /*  개인정보동의여부 */
		     ,  a.SNST_INFM_AGRM_YN             as SNST_INFM_AGRM_YN                    /*  민감정보동의여부 */
		     ,  a.UNIQ_IDNT_INFM_AGRM_YN        as UNIQ_IDNT_INFM_AGRM_YN               /*  고유식별정보동의여부 */
		     ,  a.INIF_AGRM_RGST_SYST_NM        as INIF_AGRM_RGST_SYST_NM               /*  개인정보동의등록시스템명 */
		     ,  a.INIF_AGRM_SGNT_YN             as INIF_AGRM_SGNT_YN                    /*  개인정보동의서명여부 */
		     ,  a.SCRY_YN                       as SCRY_YN                              /*  보안여부 */
		     ,  a.INSR_QLFC_EXCL_YN             as INSR_QLFC_EXCL_YN                    /*  보험자격제외여부 */
		     ,  a.EMAIL_ID                      as EMAIL_ID                             /*  이메일ID */
		     ,  a.EMAIL_DMAN_NM                 as EMAIL_DMAN_NM                        /*  이메일도메인명 */
		     ,  a.CASH_RCPT_USE_NO              as CASH_RCPT_USE_NO                     /*  현금영수증사용번호 */
		     ,  a.OVRS_RSDT_YN                  as OVRS_RSDT_YN                         /*  해외거주자여부 */
		     ,  a.RMRK_CTN                      as RMRK_CTN                             /*  비고내용 */
		     ,  0                               as AGE_VL_1                             /*  연령값1 : 년 */
		     ,  0                               as AGE_VL_2                             /*  연령값2 : 월 */
		     ,  0                               as AGE_VL_3                             /*  연령값3 : 일 */
		     ,  ''                              as PTNT_TLNO                            /*  환자전화번호 */
		     ,  ''                              as ZPCD                                 /*  우편번호 */
		     ,  ''                              as ZPAD_NM                              /*  우편번호주소명 */
		     ,  ''                              as DEAD_NM                              /*  상세주소명 */
		     ,  ''                              as CLNO                                 /*  휴대전화번호 */
		     ,  ''                              as AFI_CLNO                             /*  휴대전화번호 */
		     ,  ''                              as CMPN_TLNO                            /*  회사전화번호 */
		     ,  ''                              as PTNT_CNPN_CTN                        /*  환자연락처내용 (본인연락처중 핸드폰->집전화->회사전화순) */
		  from  APPTPTNTV a /*  환자 */
		 where  a.PTNO = #{ptno}
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /*  VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByPtnoNmFrrn-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="ptntAlisNm" column="PTNT_ALIS_NM"/>
		<result property="ptntEnsnLsnm" column="PTNT_ENSN_LSNM"/>
		<result property="ptntEnsnNm" column="PTNT_ENSN_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="bsrn" column="BSRN"/>
		<result property="btdt" column="BTDT"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="ntnlCd" column="NTNL_CD"/>
		<result property="psptNo" column="PSPT_NO"/>
		<result property="ptntInfwPathCd" column="PTNT_INFW_PATH_CD"/>
		<result property="inccPtntYn" column="INCC_PTNT_YN"/>
		<result property="rqprNm" column="RQPR_NM"/>
		<result property="rqprTlnoCtn" column="RQPR_TLNO_CTN"/>
		<result property="rqstInprId" column="RQST_INPR_ID"/>
		<result property="rqstInptDt" column="RQST_INPT_DT"/>
		<result property="dethYmd" column="DETH_YMD"/>
		<result property="dethYmdRgsrId" column="DETH_YMD_RGSR_ID"/>
		<result property="prtsRsrn" column="PRTS_RSRN"/>
		<result property="prtsNm" column="PRTS_NM"/>
		<result property="inifAgrmYn" column="INIF_AGRM_YN"/>
		<result property="snstInfmAgrmYn" column="SNST_INFM_AGRM_YN"/>
		<result property="uniqIdntInfmAgrmYn" column="UNIQ_IDNT_INFM_AGRM_YN"/>
		<result property="inifAgrmRgstSystNm" column="INIF_AGRM_RGST_SYST_NM"/>
		<result property="inifAgrmSgntYn" column="INIF_AGRM_SGNT_YN"/>
		<result property="scryYn" column="SCRY_YN"/>
		<result property="insrQlfcExclYn" column="INSR_QLFC_EXCL_YN"/>
		<result property="emailId" column="EMAIL_ID"/>
		<result property="emailDmanNm" column="EMAIL_DMAN_NM"/>
		<result property="cashRcptUseNo" column="CASH_RCPT_USE_NO"/>
		<result property="ovrsRsdtYn" column="OVRS_RSDT_YN"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="ageVl1" column="AGE_VL_1"/>
		<result property="ageVl2" column="AGE_VL_2"/>
		<result property="ageVl3" column="AGE_VL_3"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="clno" column="CLNO"/>
		<result property="afiClno" column="AFI_CLNO"/>
		<result property="cmpnTlno" column="CMPN_TLNO"/>
		<result property="ptntCnpnCtn" column="PTNT_CNPN_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByPtnoNmFrrn () 
        Description :                                           환자기본정보를 조회한다 (의무기록 공통 DAM)
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByPtnoNmFrrn-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByPtnoNmFrrn"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByPtnoNmFrrn-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByPtnoNmFrrn_환자기본정보조회 */
		        a.PTNO                                            as PTNO                                 /* 환자번호 */
		     ,  a.PTNT_NM                                         as PTNT_NM                              /* 환자명 */
		     ,  a.PTNT_ALIS_NM                                    as PTNT_ALIS_NM                         /* 환자별칭명 */
		     ,  a.PTNT_ENSN_LSNM                                  as PTNT_ENSN_LSNM                       /* 환자영문성 */
		     ,  a.PTNT_ENSN_NM                                    as PTNT_ENSN_NM                         /* 환자영문명 */
		     ,  a.FRRN                                            as FRRN                                 /* 앞주민등록번호 */
		     ,  a.BRRN                                            as BRRN                                 /* 뒤주민등록번호 */
		     ,  a.BSOV_AFTR_PTNO                                  as BSOV_AFTR_PTNO                       /* 합본이후환자번호 */
		     ,  a.BSRN                                            as BSRN                                 /* 사업자등록번호 */
		     ,  to_char(a.BTDT, 'yyyymmdd')                       as BTDT                                 /* 생년월일 */
		     ,  a.GEND_CD                                         as GEND_CD                              /* 성별코드 */
		     ,  a.NTNL_CD                                         as NTNL_CD                              /* 국적코드 */
		     ,  a.PSPT_NO                                         as PSPT_NO                              /* 여권번호 */
		     ,  a.PTNT_INFW_PATH_CD                               as PTNT_INFW_PATH_CD                    /* 환자유입경로코드 */
		     ,  a.INCC_PTNT_YN                                    as INCC_PTNT_YN                         /* 국제진료소환자여부 */
		     ,  a.RQPR_NM                                         as RQPR_NM                              /* 요청자명 */
		     ,  a.RQPR_TLNO_CTN                                   as RQPR_TLNO_CTN                        /* 요청자전화번호내용 */
		     ,  a.RQST_INPR_ID                                    as RQST_INPR_ID                         /* 요청입력자ID */
		     ,  to_char(a.RQST_INPT_DT, 'yyyymmddhh24miss')       as RQST_INPT_DT                         /* 요청입력일시 */
		     ,  to_char(a.DETH_YMD, 'YYYYMMDD')                   as DETH_YMD                             /* 사망일자 */
		     ,  a.DETH_YMD_RGSR_ID                                as DETH_YMD_RGSR_ID                     /* 사망일자등록자ID */
		     ,  a.PRTS_RSRN                                       as PRTS_RSRN                            /* 부모주민등록번호 */
		     ,  a.PRTS_NM                                         as PRTS_NM                              /* 부모명 */
		     ,  a.INIF_AGRM_YN                                    as INIF_AGRM_YN                         /* 개인정보동의여부 */
		     ,  a.SNST_INFM_AGRM_YN                               as SNST_INFM_AGRM_YN                    /* 민감정보동의여부 */
		     ,  a.UNIQ_IDNT_INFM_AGRM_YN                          as UNIQ_IDNT_INFM_AGRM_YN               /* 고유식별정보동의여부 */
		     ,  a.INIF_AGRM_RGST_SYST_NM                          as INIF_AGRM_RGST_SYST_NM               /* 개인정보동의등록시스템명 */
		     ,  a.INIF_AGRM_SGNT_YN                               as INIF_AGRM_SGNT_YN                    /* 개인정보동의서명여부 */
		     ,  a.SCRY_YN                                         as SCRY_YN                              /* 보안여부 */
		     ,  a.INSR_QLFC_EXCL_YN                               as INSR_QLFC_EXCL_YN                    /* 보험자격제외여부 */
		     ,  a.EMAIL_ID                                        as EMAIL_ID                             /* 이메일ID */
		     ,  a.EMAIL_DMAN_NM                                   as EMAIL_DMAN_NM                        /* 이메일도메인명 */
		     ,  a.CASH_RCPT_USE_NO                                as CASH_RCPT_USE_NO                     /* 현금영수증사용번호 */
		     ,  a.OVRS_RSDT_YN                                    as OVRS_RSDT_YN                         /* 해외거주자여부 */
		     ,  a.RMRK_CTN                                        as RMRK_CTN                             /* 비고내용 */
		     ,  0                                                 as AGE_VL_1                             /* 연령값1 : 년 */
		     ,  0                                                 as AGE_VL_2                             /* 연령값2 : 월 */
		     ,  0                                                 as AGE_VL_3                             /* 연령값3 : 일 */
		     ,  ''                                                as PTNT_TLNO                            /* 환자전화번호 */
		     ,  ''                                                as ZPCD                                 /* 우편번호 */
		     ,  ''                                                as ZPAD_NM                              /* 우편번호주소명 */
		     ,  ''                                                as DEAD_NM                              /* 상세주소명 */
		     ,  ''                                                as CLNO                                 /* 휴대전화번호 */
		     ,  ''                                                as AFI_CLNO                             /* 휴대전화번호 */
		     ,  ''                                                as CMPN_TLNO                            /* 회사전화번호 */
		     ,  ''                                                as PTNT_CNPN_CTN                        /* 환자연락처내용 (본인연락처중 핸드폰->집전화->회사전화순) */
		  from  APPTPTNTV a /* 환자 */
		 where  ( nvl(#{ptno}   , '*') = '*' or a.PTNO    like #{ptno}   || '%')
		   and  ( nvl(#{ptntNm}, '*')  = '*' or a.PTNT_NM like #{ptntNm} || '%')
		   and  ( nvl(#{frrn}, '*')    = '*'
		        or (  ( #{frrn} = '******' and a.BRRN    = #{brrn} )         /* 주민번호 앞 자리가 ******인 경우 주민번호 뒷자리 = 검색 */
		           or ( a.FRRN = #{frrn}   and a.BRRN like #{brrn} || '%')   /* 주민번호 앞 자리가 일반 숫자인 경우 주민번호 뒷자리 like 검색 */
		           )
		        )
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /* VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntAdrsByPtno-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="adrsUsgeCd" column="ADRS_USGE_CD"/>
		<result property="adrsSno" column="ADRS_SNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="olnwAdrsDvsnCd" column="OLNW_ADRS_DVSN_CD"/>
		<result property="psmlRcepAdrsYn" column="PSML_RCEP_ADRS_YN"/>
		<result property="adrsCnfrNeedYn" column="ADRS_CNFR_NEED_YN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntAdrsByPtno () 
        Description :                                           환자의 주소리스트를 조회한다
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntAdrsByPtno-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntAdrsByPtno"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntAdrsByPtno-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntAdrsByPtno_환자주소리스트 */
		        PTNO                            as PTNO                /*  환자번호 */
		     ,  ADRS_USGE_CD                    as ADRS_USGE_CD        /*  주소용도코드 */
		     ,  ADRS_SNO                        as ADRS_SNO            /*  주소일련번호 */
		     ,  ZPCD                            as ZPCD                /*  우편번호 */
		     ,  ZPAD_NM                         as ZPAD_NM             /*  우편번호주소명 */
		     ,  DEAD_NM                         as DEAD_NM             /*  상세주소명 */
		     ,  OLNW_ADRS_DVSN_CD               as OLNW_ADRS_DVSN_CD   /*  신구주소구분코드 */
		     ,  PSML_RCEP_ADRS_YN               as PSML_RCEP_ADRS_YN   /*  우편물수령주소여부 */
		     ,  ADRS_CNFR_NEED_YN               as ADRS_CNFR_NEED_YN   /*  주소확인필요여부 */
		  from  APPTADRSV a  /*  환자주소 */
		 where  a.PTNO = #{ptno}
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /*  VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntTlnoByPtno-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="cnpnDvsnCd" column="CNPN_DVSN_CD"/>
		<result property="cnpnSno" column="CNPN_SNO"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="tlnoCnfrNeedYn" column="TLNO_CNFR_NEED_YN"/>
		<result property="ovrsTlnoYn" column="OVRS_TLNO_YN"/>
		<result property="pnrlCd" column="PNRL_CD"/>
		<result property="smsrTrgtDvsnCd" column="SMSR_TRGT_DVSN_CD"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntTlnoByPtno () 
        Description :                                           환자의 연락처리스트를 조회한다.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntTlnoByPtno-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntTlnoByPtno"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntTlnoByPtno-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntTlnoByPtno_환자연락처리스트 */
		        PTNO                            as PTNO               /*  환자번호 */
		     ,  CNPN_DVSN_CD                    as CNPN_DVSN_CD       /*  연락처구분코드 */
		     ,  CNPN_SNO                        as CNPN_SNO           /*  연락처일련번호 */
		     ,  PTNT_TLNO                       as PTNT_TLNO          /*  환자전화번호 */
		     ,  TLNO_CNFR_NEED_YN               as TLNO_CNFR_NEED_YN  /*  전화번호확인필요여부 */
		     ,  OVRS_TLNO_YN                    as OVRS_TLNO_YN       /*  해외전화번호여부 */
		     ,  PNRL_CD                         as PNRL_CD            /*  환자관계코드 */
		     ,  SMSR_TRGT_DVSN_CD               as SMSR_TRGT_DVSN_CD  /*  SMS대상구분코드 */
		     ,  RMRK_CTN                        as RMRK_CTN           /*  비고내용 */
		  from  APPTCNPNV a  /*  환자연락처 */
		 where  a.PTNO = #{ptno}
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /*  VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikePtno-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="ptntAlisNm" column="PTNT_ALIS_NM"/>
		<result property="ptntEnsnLsnm" column="PTNT_ENSN_LSNM"/>
		<result property="ptntEnsnNm" column="PTNT_ENSN_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="bsrn" column="BSRN"/>
		<result property="btdt" column="BTDT"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="ntnlCd" column="NTNL_CD"/>
		<result property="psptNo" column="PSPT_NO"/>
		<result property="ptntInfwPathCd" column="PTNT_INFW_PATH_CD"/>
		<result property="inccPtntYn" column="INCC_PTNT_YN"/>
		<result property="rqprNm" column="RQPR_NM"/>
		<result property="rqprTlnoCtn" column="RQPR_TLNO_CTN"/>
		<result property="rqstInprId" column="RQST_INPR_ID"/>
		<result property="rqstInptDt" column="RQST_INPT_DT"/>
		<result property="dethYmd" column="DETH_YMD"/>
		<result property="dethYmdRgsrId" column="DETH_YMD_RGSR_ID"/>
		<result property="prtsRsrn" column="PRTS_RSRN"/>
		<result property="prtsNm" column="PRTS_NM"/>
		<result property="inifAgrmYn" column="INIF_AGRM_YN"/>
		<result property="snstInfmAgrmYn" column="SNST_INFM_AGRM_YN"/>
		<result property="uniqIdntInfmAgrmYn" column="UNIQ_IDNT_INFM_AGRM_YN"/>
		<result property="inifAgrmRgstSystNm" column="INIF_AGRM_RGST_SYST_NM"/>
		<result property="inifAgrmSgntYn" column="INIF_AGRM_SGNT_YN"/>
		<result property="scryYn" column="SCRY_YN"/>
		<result property="insrQlfcExclYn" column="INSR_QLFC_EXCL_YN"/>
		<result property="emailId" column="EMAIL_ID"/>
		<result property="emailDmanNm" column="EMAIL_DMAN_NM"/>
		<result property="cashRcptUseNo" column="CASH_RCPT_USE_NO"/>
		<result property="ovrsRsdtYn" column="OVRS_RSDT_YN"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="ageVl1" column="AGE_VL_1"/>
		<result property="ageVl2" column="AGE_VL_2"/>
		<result property="ageVl3" column="AGE_VL_3"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="clno" column="CLNO"/>
		<result property="afiClno" column="AFI_CLNO"/>
		<result property="cmpnTlno" column="CMPN_TLNO"/>
		<result property="ptntCnpnCtn" column="PTNT_CNPN_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikePtno () 
        Description :                                           환자기본조회 환자번호 Like 검색
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikePtno-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikePtno"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikePtno-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikePtno_환자기본조회 환자번호 Like */
		        a.PTNO                                      as PTNO                                 /*  환자번호 */
		     ,  a.PTNT_NM                                   as PTNT_NM                              /*  환자명 */
		     ,  a.PTNT_ALIS_NM                              as PTNT_ALIS_NM                         /*  환자별칭명 */
		     ,  a.PTNT_ENSN_LSNM                            as PTNT_ENSN_LSNM                       /*  환자영문성 */
		     ,  a.PTNT_ENSN_NM                              as PTNT_ENSN_NM                         /*  환자영문명 */
		     ,  a.FRRN                                      as FRRN                                 /*  앞주민등록번호 */
		     ,  a.BRRN                                      as BRRN                                 /*  뒤주민등록번호 */
		     ,  a.BSOV_AFTR_PTNO                            as BSOV_AFTR_PTNO                       /*  합본이후환자번호 */
		     ,  a.BSRN                                      as BSRN                                 /*  사업자등록번호 */
		     ,  to_char(a.BTDT, 'yyyymmdd')                 as BTDT                                 /*  생년월일 */
		     ,  a.GEND_CD                                   as GEND_CD                              /*  성별코드 */
		     ,  a.NTNL_CD                                   as NTNL_CD                              /*  국적코드 */
		     ,  a.PSPT_NO                                   as PSPT_NO                              /*  여권번호 */
		     ,  a.PTNT_INFW_PATH_CD                         as PTNT_INFW_PATH_CD                    /*  환자유입경로코드 */
		     ,  a.INCC_PTNT_YN                              as INCC_PTNT_YN                         /*  국제진료소환자여부 */
		     ,  a.RQPR_NM                                   as RQPR_NM                              /*  요청자명 */
		     ,  a.RQPR_TLNO_CTN                             as RQPR_TLNO_CTN                        /*  요청자전화번호내용 */
		     ,  a.RQST_INPR_ID                              as RQST_INPR_ID                         /*  요청입력자ID */
		     ,  to_char(a.RQST_INPT_DT, 'yyyymmddhh24miss') as RQST_INPT_DT                         /*  요청입력일시 */
		     ,  to_char(a.DETH_YMD, 'YYYYMMDD')             as DETH_YMD                             /*  사망일자 */
		     ,  a.DETH_YMD_RGSR_ID                          as DETH_YMD_RGSR_ID                     /*  사망일자등록자ID */
		     ,  a.PRTS_RSRN                                 as PRTS_RSRN                            /*  부모주민등록번호 */
		     ,  a.PRTS_NM                                   as PRTS_NM                              /*  부모명 */
		     ,  a.INIF_AGRM_YN                              as INIF_AGRM_YN                         /*  개인정보동의여부 */
		     ,  a.SNST_INFM_AGRM_YN                         as SNST_INFM_AGRM_YN                    /*  민감정보동의여부 */
		     ,  a.UNIQ_IDNT_INFM_AGRM_YN                    as UNIQ_IDNT_INFM_AGRM_YN               /*  고유식별정보동의여부 */
		     ,  a.INIF_AGRM_RGST_SYST_NM                    as INIF_AGRM_RGST_SYST_NM               /*  개인정보동의등록시스템명 */
		     ,  a.INIF_AGRM_SGNT_YN                         as INIF_AGRM_SGNT_YN                    /*  개인정보동의서명여부 */
		     ,  a.SCRY_YN                                   as SCRY_YN                              /*  보안여부 */
		     ,  a.INSR_QLFC_EXCL_YN                         as INSR_QLFC_EXCL_YN                    /*  보험자격제외여부 */
		     ,  a.EMAIL_ID                                  as EMAIL_ID                             /*  이메일ID */
		     ,  a.EMAIL_DMAN_NM                             as EMAIL_DMAN_NM                        /*  이메일도메인명 */
		     ,  a.CASH_RCPT_USE_NO                          as CASH_RCPT_USE_NO                     /*  현금영수증사용번호 */
		     ,  a.OVRS_RSDT_YN                              as OVRS_RSDT_YN                         /*  해외거주자여부 */
		     ,  a.RMRK_CTN                                  as RMRK_CTN                             /*  비고내용 */
		     ,  0                                           as AGE_VL_1                             /*  연령값1 : 년 */
		     ,  0                                           as AGE_VL_2                             /*  연령값2 : 월 */
		     ,  0                                           as AGE_VL_3                             /*  연령값3 : 일 */
		     ,  ''                                          as PTNT_TLNO                            /*  환자전화번호 */
		     ,  ''                                          as ZPCD                                 /*  우편번호 */
		     ,  ''                                          as ZPAD_NM                              /*  우편번호주소명 */
		     ,  ''                                          as DEAD_NM                              /*  상세주소명 */
		     ,  ''                                          as CLNO                                 /*  휴대전화번호 */
		     ,  ''                                          as AFI_CLNO                             /*  휴대전화번호 */
		     ,  ''                                          as CMPN_TLNO                            /*  회사전화번호 */
		     ,  ''                                          as PTNT_CNPN_CTN                        /*  환자연락처내용 (본인연락처중 핸드폰->집전화->회사전화순) */
		  from  APPTPTNTV a /*  환자 */
		 where  a.PTNO like #{ptno} || '%'
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /*  VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikeNm-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="ptntAlisNm" column="PTNT_ALIS_NM"/>
		<result property="ptntEnsnLsnm" column="PTNT_ENSN_LSNM"/>
		<result property="ptntEnsnNm" column="PTNT_ENSN_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="bsrn" column="BSRN"/>
		<result property="btdt" column="BTDT"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="ntnlCd" column="NTNL_CD"/>
		<result property="psptNo" column="PSPT_NO"/>
		<result property="ptntInfwPathCd" column="PTNT_INFW_PATH_CD"/>
		<result property="inccPtntYn" column="INCC_PTNT_YN"/>
		<result property="rqprNm" column="RQPR_NM"/>
		<result property="rqprTlnoCtn" column="RQPR_TLNO_CTN"/>
		<result property="rqstInprId" column="RQST_INPR_ID"/>
		<result property="rqstInptDt" column="RQST_INPT_DT"/>
		<result property="dethYmd" column="DETH_YMD"/>
		<result property="dethYmdRgsrId" column="DETH_YMD_RGSR_ID"/>
		<result property="prtsRsrn" column="PRTS_RSRN"/>
		<result property="prtsNm" column="PRTS_NM"/>
		<result property="inifAgrmYn" column="INIF_AGRM_YN"/>
		<result property="snstInfmAgrmYn" column="SNST_INFM_AGRM_YN"/>
		<result property="uniqIdntInfmAgrmYn" column="UNIQ_IDNT_INFM_AGRM_YN"/>
		<result property="inifAgrmRgstSystNm" column="INIF_AGRM_RGST_SYST_NM"/>
		<result property="inifAgrmSgntYn" column="INIF_AGRM_SGNT_YN"/>
		<result property="scryYn" column="SCRY_YN"/>
		<result property="insrQlfcExclYn" column="INSR_QLFC_EXCL_YN"/>
		<result property="emailId" column="EMAIL_ID"/>
		<result property="emailDmanNm" column="EMAIL_DMAN_NM"/>
		<result property="cashRcptUseNo" column="CASH_RCPT_USE_NO"/>
		<result property="ovrsRsdtYn" column="OVRS_RSDT_YN"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="ageVl1" column="AGE_VL_1"/>
		<result property="ageVl2" column="AGE_VL_2"/>
		<result property="ageVl3" column="AGE_VL_3"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="clno" column="CLNO"/>
		<result property="afiClno" column="AFI_CLNO"/>
		<result property="cmpnTlno" column="CMPN_TLNO"/>
		<result property="ptntCnpnCtn" column="PTNT_CNPN_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikeNm () 
        Description :                                           환자기본 환자명 Like 검색
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikeNm-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikeNm"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikeNm-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByLikeNm_환자기본 환자명 Like */
		        a.PTNO                                      as PTNO                     /*  환자번호 */
		     ,  a.PTNT_NM                                   as PTNT_NM                  /*  환자명 */
		     ,  a.PTNT_ALIS_NM                              as PTNT_ALIS_NM             /*  환자별칭명 */
		     ,  a.PTNT_ENSN_LSNM                            as PTNT_ENSN_LSNM           /*  환자영문성 */
		     ,  a.PTNT_ENSN_NM                              as PTNT_ENSN_NM             /*  환자영문명 */
		     ,  a.FRRN                                      as FRRN                     /*  앞주민등록번호 */
		     ,  a.BRRN                                      as BRRN                     /*  뒤주민등록번호 */
		     ,  a.BSOV_AFTR_PTNO                            as BSOV_AFTR_PTNO           /*  합본이후환자번호 */
		     ,  a.BSRN                                      as BSRN                     /*  사업자등록번호 */
		     ,  to_char(a.BTDT, 'yyyymmdd')                 as BTDT                     /*  생년월일 */
		     ,  a.GEND_CD                                   as GEND_CD                  /*  성별코드 */
		     ,  a.NTNL_CD                                   as NTNL_CD                  /*  국적코드 */
		     ,  a.PSPT_NO                                   as PSPT_NO                  /*  여권번호 */
		     ,  a.PTNT_INFW_PATH_CD                         as PTNT_INFW_PATH_CD        /*  환자유입경로코드 */
		     ,  a.INCC_PTNT_YN                              as INCC_PTNT_YN             /*  국제진료소환자여부 */
		     ,  a.RQPR_NM                                   as RQPR_NM                  /*  요청자명 */
		     ,  a.RQPR_TLNO_CTN                             as RQPR_TLNO_CTN            /*  요청자전화번호내용 */
		     ,  a.RQST_INPR_ID                              as RQST_INPR_ID             /*  요청입력자ID */
		     ,  to_char(a.RQST_INPT_DT, 'yyyymmddhh24miss') as RQST_INPT_DT             /*  요청입력일시 */
		     ,  to_char(a.DETH_YMD, 'YYYYMMDD')             as DETH_YMD                 /*  사망일자 */
		     ,  a.DETH_YMD_RGSR_ID                          as DETH_YMD_RGSR_ID         /*  사망일자등록자ID */
		     ,  a.PRTS_RSRN                                 as PRTS_RSRN                /*  부모주민등록번호 */
		     ,  a.PRTS_NM                                   as PRTS_NM                  /*  부모명 */
		     ,  a.INIF_AGRM_YN                              as INIF_AGRM_YN             /*  개인정보동의여부 */
		     ,  a.SNST_INFM_AGRM_YN                         as SNST_INFM_AGRM_YN        /*  민감정보동의여부 */
		     ,  a.UNIQ_IDNT_INFM_AGRM_YN                    as UNIQ_IDNT_INFM_AGRM_YN   /*  고유식별정보동의여부 */
		     ,  a.INIF_AGRM_RGST_SYST_NM                    as INIF_AGRM_RGST_SYST_NM   /*  개인정보동의등록시스템명 */
		     ,  a.INIF_AGRM_SGNT_YN                         as INIF_AGRM_SGNT_YN        /*  개인정보동의서명여부 */
		     ,  a.SCRY_YN                                   as SCRY_YN                  /*  보안여부 */
		     ,  a.INSR_QLFC_EXCL_YN                         as INSR_QLFC_EXCL_YN        /*  보험자격제외여부 */
		     ,  a.EMAIL_ID                                  as EMAIL_ID                 /*  이메일ID */
		     ,  a.EMAIL_DMAN_NM                             as EMAIL_DMAN_NM            /*  이메일도메인명 */
		     ,  a.CASH_RCPT_USE_NO                          as CASH_RCPT_USE_NO         /*  현금영수증사용번호 */
		     ,  a.OVRS_RSDT_YN                              as OVRS_RSDT_YN             /*  해외거주자여부 */
		     ,  a.RMRK_CTN                                  as RMRK_CTN                 /*  비고내용 */
		     ,  0                                           as AGE_VL_1                 /*  연령값1 : 년 */
		     ,  0                                           as AGE_VL_2                 /*  연령값2 : 월 */
		     ,  0                                           as AGE_VL_3                 /*  연령값3 : 일 */
		     ,  ''                                          as PTNT_TLNO                /*  환자전화번호 */
		     ,  ''                                          as ZPCD                     /*  우편번호 */
		     ,  ''                                          as ZPAD_NM                  /*  우편번호주소명 */
		     ,  ''                                          as DEAD_NM                  /*  상세주소명 */
		     ,  ''                                          as CLNO                     /*  휴대전화번호 */
		     ,  ''                                          as AFI_CLNO                 /*  휴대전화번호 */
		     ,  ''                                          as CMPN_TLNO                /*  회사전화번호 */
		     ,  ''                                          as PTNT_CNPN_CTN            /*  환자연락처내용 (본인연락처중 핸드폰->집전화->회사전화순) */
		  from  APPTPTNTV a /*  환자 */
		 where  a.PTNT_NM like #{ptntNm} || '%'
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /*  VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByRsrn-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="ptntAlisNm" column="PTNT_ALIS_NM"/>
		<result property="ptntEnsnLsnm" column="PTNT_ENSN_LSNM"/>
		<result property="ptntEnsnNm" column="PTNT_ENSN_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="bsrn" column="BSRN"/>
		<result property="btdt" column="BTDT"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="ntnlCd" column="NTNL_CD"/>
		<result property="psptNo" column="PSPT_NO"/>
		<result property="ptntInfwPathCd" column="PTNT_INFW_PATH_CD"/>
		<result property="inccPtntYn" column="INCC_PTNT_YN"/>
		<result property="rqprNm" column="RQPR_NM"/>
		<result property="rqprTlnoCtn" column="RQPR_TLNO_CTN"/>
		<result property="rqstInprId" column="RQST_INPR_ID"/>
		<result property="rqstInptDt" column="RQST_INPT_DT"/>
		<result property="dethYmd" column="DETH_YMD"/>
		<result property="dethYmdRgsrId" column="DETH_YMD_RGSR_ID"/>
		<result property="prtsRsrn" column="PRTS_RSRN"/>
		<result property="prtsNm" column="PRTS_NM"/>
		<result property="inifAgrmYn" column="INIF_AGRM_YN"/>
		<result property="snstInfmAgrmYn" column="SNST_INFM_AGRM_YN"/>
		<result property="uniqIdntInfmAgrmYn" column="UNIQ_IDNT_INFM_AGRM_YN"/>
		<result property="inifAgrmRgstSystNm" column="INIF_AGRM_RGST_SYST_NM"/>
		<result property="inifAgrmSgntYn" column="INIF_AGRM_SGNT_YN"/>
		<result property="scryYn" column="SCRY_YN"/>
		<result property="insrQlfcExclYn" column="INSR_QLFC_EXCL_YN"/>
		<result property="emailId" column="EMAIL_ID"/>
		<result property="emailDmanNm" column="EMAIL_DMAN_NM"/>
		<result property="cashRcptUseNo" column="CASH_RCPT_USE_NO"/>
		<result property="ovrsRsdtYn" column="OVRS_RSDT_YN"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="ageVl1" column="AGE_VL_1"/>
		<result property="ageVl2" column="AGE_VL_2"/>
		<result property="ageVl3" column="AGE_VL_3"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="clno" column="CLNO"/>
		<result property="afiClno" column="AFI_CLNO"/>
		<result property="cmpnTlno" column="CMPN_TLNO"/>
		<result property="ptntCnpnCtn" column="PTNT_CNPN_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByRsrn () 
        Description :                                           환자조회 주민번호 기준
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByRsrn-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByRsrn"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByRsrn-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByRsrn_환자조회 주민번호 기준 */
		        a.PTNO                                      as PTNO                     /* 환자번호 */
		     ,  a.PTNT_NM                                   as PTNT_NM                  /* 환자명 */
		     ,  a.PTNT_ALIS_NM                              as PTNT_ALIS_NM             /* 환자별칭명 */
		     ,  a.PTNT_ENSN_LSNM                            as PTNT_ENSN_LSNM           /* 환자영문성 */
		     ,  a.PTNT_ENSN_NM                              as PTNT_ENSN_NM             /* 환자영문명 */
		     ,  a.FRRN                                      as FRRN                     /* 앞주민등록번호 */
		     ,  a.BRRN                                      as BRRN                     /* 뒤주민등록번호 */
		     ,  a.BSOV_AFTR_PTNO                            as BSOV_AFTR_PTNO           /* 합본이후환자번호 */
		     ,  a.BSRN                                      as BSRN                     /* 사업자등록번호 */
		     ,  to_char(a.BTDT, 'yyyymmdd')                 as BTDT                     /* 생년월일 */
		     ,  a.GEND_CD                                   as GEND_CD                  /* 성별코드 */
		     ,  a.NTNL_CD                                   as NTNL_CD                  /* 국적코드 */
		     ,  a.PSPT_NO                                   as PSPT_NO                  /* 여권번호 */
		     ,  a.PTNT_INFW_PATH_CD                         as PTNT_INFW_PATH_CD        /* 환자유입경로코드 */
		     ,  a.INCC_PTNT_YN                              as INCC_PTNT_YN             /* 국제진료소환자여부 */
		     ,  a.RQPR_NM                                   as RQPR_NM                  /* 요청자명 */
		     ,  a.RQPR_TLNO_CTN                             as RQPR_TLNO_CTN            /* 요청자전화번호내용 */
		     ,  a.RQST_INPR_ID                              as RQST_INPR_ID             /* 요청입력자ID */
		     ,  to_char(a.RQST_INPT_DT, 'yyyymmddhh24miss') as RQST_INPT_DT             /* 요청입력일시 */
		     ,  to_char(a.DETH_YMD, 'YYYYMMDD')             as DETH_YMD                 /* 사망일자 */
		     ,  a.DETH_YMD_RGSR_ID                          as DETH_YMD_RGSR_ID         /* 사망일자등록자ID */
		     ,  a.PRTS_RSRN                                 as PRTS_RSRN                /* 부모주민등록번호 */
		     ,  a.PRTS_NM                                   as PRTS_NM                  /* 부모명 */
		     ,  a.INIF_AGRM_YN                              as INIF_AGRM_YN             /* 개인정보동의여부 */
		     ,  a.SNST_INFM_AGRM_YN                         as SNST_INFM_AGRM_YN        /* 민감정보동의여부 */
		     ,  a.UNIQ_IDNT_INFM_AGRM_YN                    as UNIQ_IDNT_INFM_AGRM_YN   /* 고유식별정보동의여부 */
		     ,  a.INIF_AGRM_RGST_SYST_NM                    as INIF_AGRM_RGST_SYST_NM   /* 개인정보동의등록시스템명 */
		     ,  a.INIF_AGRM_SGNT_YN                         as INIF_AGRM_SGNT_YN        /* 개인정보동의서명여부 */
		     ,  a.SCRY_YN                                   as SCRY_YN                  /* 보안여부 */
		     ,  a.INSR_QLFC_EXCL_YN                         as INSR_QLFC_EXCL_YN        /* 보험자격제외여부 */
		     ,  a.EMAIL_ID                                  as EMAIL_ID                 /* 이메일ID */
		     ,  a.EMAIL_DMAN_NM                             as EMAIL_DMAN_NM            /* 이메일도메인명 */
		     ,  a.CASH_RCPT_USE_NO                          as CASH_RCPT_USE_NO         /* 현금영수증사용번호 */
		     ,  a.OVRS_RSDT_YN                              as OVRS_RSDT_YN             /* 해외거주자여부 */
		     ,  a.RMRK_CTN                                  as RMRK_CTN                 /*  비고내용 */
		     ,  0                                           as AGE_VL_1                 /*  연령값1 : 년 */
		     ,  0                                           as AGE_VL_2                 /*  연령값2 : 월 */
		     ,  0                                           as AGE_VL_3                 /*  연령값3 : 일 */
		     ,  ''                                          as PTNT_TLNO                /* 환자전화번호 */
		     ,  ''                                          as ZPCD                     /* 우편번호 */
		     ,  ''                                          as ZPAD_NM                  /* 우편번호주소명 */
		     ,  ''                                          as DEAD_NM                  /* 상세주소명 */
		     ,  ''                                          as CLNO                     /* 휴대전화번호 */
		     ,  ''                                          as AFI_CLNO                 /* 휴대전화번호 */
		     ,  ''                                          as CMPN_TLNO                /* 회사전화번호 */
		     ,  ''                                          as PTNT_CNPN_CTN            /* 환자연락처내용 (본인연락처중 핸드폰->집전화->회사전화순) */
		  from  APPTPTNTV a /* 환자 */
		 where  ( nvl(#{ptno}   , '*') = '*' or a.PTNO    like #{ptno}    || '%')
		   and  ( nvl(#{ptntNm}, '*') = '*' or a.PTNT_NM like #{ptntNm} || '%')
		   and  ( a.FRRN = #{frrn} and a.BRRN like #{brrn} || '%')   /* 주민번호 앞 자리가 일반 숫자인 경우 주민번호 뒷자리 like 검색 */
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /* VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByBrrn-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="ptntAlisNm" column="PTNT_ALIS_NM"/>
		<result property="ptntEnsnLsnm" column="PTNT_ENSN_LSNM"/>
		<result property="ptntEnsnNm" column="PTNT_ENSN_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="bsrn" column="BSRN"/>
		<result property="btdt" column="BTDT"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="ntnlCd" column="NTNL_CD"/>
		<result property="psptNo" column="PSPT_NO"/>
		<result property="ptntInfwPathCd" column="PTNT_INFW_PATH_CD"/>
		<result property="inccPtntYn" column="INCC_PTNT_YN"/>
		<result property="rqprNm" column="RQPR_NM"/>
		<result property="rqprTlnoCtn" column="RQPR_TLNO_CTN"/>
		<result property="rqstInprId" column="RQST_INPR_ID"/>
		<result property="rqstInptDt" column="RQST_INPT_DT"/>
		<result property="dethYmd" column="DETH_YMD"/>
		<result property="dethYmdRgsrId" column="DETH_YMD_RGSR_ID"/>
		<result property="prtsRsrn" column="PRTS_RSRN"/>
		<result property="prtsNm" column="PRTS_NM"/>
		<result property="inifAgrmYn" column="INIF_AGRM_YN"/>
		<result property="snstInfmAgrmYn" column="SNST_INFM_AGRM_YN"/>
		<result property="uniqIdntInfmAgrmYn" column="UNIQ_IDNT_INFM_AGRM_YN"/>
		<result property="inifAgrmRgstSystNm" column="INIF_AGRM_RGST_SYST_NM"/>
		<result property="inifAgrmSgntYn" column="INIF_AGRM_SGNT_YN"/>
		<result property="scryYn" column="SCRY_YN"/>
		<result property="insrQlfcExclYn" column="INSR_QLFC_EXCL_YN"/>
		<result property="emailId" column="EMAIL_ID"/>
		<result property="emailDmanNm" column="EMAIL_DMAN_NM"/>
		<result property="cashRcptUseNo" column="CASH_RCPT_USE_NO"/>
		<result property="ovrsRsdtYn" column="OVRS_RSDT_YN"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="ageVl1" column="AGE_VL_1"/>
		<result property="ageVl2" column="AGE_VL_2"/>
		<result property="ageVl3" column="AGE_VL_3"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="clno" column="CLNO"/>
		<result property="afiClno" column="AFI_CLNO"/>
		<result property="cmpnTlno" column="CMPN_TLNO"/>
		<result property="ptntCnpnCtn" column="PTNT_CNPN_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByBrrn () 
        Description :                                           환자조회 주민번호기준2
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByBrrn-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByBrrn"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByBrrn-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByBrrn_환자조회 주민번호기준 2 */
		        a.PTNO                                      as PTNO                                 /* 환자번호 */
		     ,  a.PTNT_NM                                   as PTNT_NM                              /* 환자명 */
		     ,  a.PTNT_ALIS_NM                              as PTNT_ALIS_NM                         /* 환자별칭명 */
		     ,  a.PTNT_ENSN_LSNM                            as PTNT_ENSN_LSNM                       /* 환자영문성 */
		     ,  a.PTNT_ENSN_NM                              as PTNT_ENSN_NM                         /* 환자영문명 */
		     ,  a.FRRN                                      as FRRN                                 /* 앞주민등록번호 */
		     ,  a.BRRN                                      as BRRN                                 /* 뒤주민등록번호 */
		     ,  a.BSOV_AFTR_PTNO                            as BSOV_AFTR_PTNO                       /* 합본이후환자번호 */
		     ,  a.BSRN                                      as BSRN                                 /* 사업자등록번호 */
		     ,  to_char(a.BTDT, 'yyyymmdd')                 as BTDT                                 /* 생년월일 */
		     ,  a.GEND_CD                                   as GEND_CD                              /* 성별코드 */
		     ,  a.NTNL_CD                                   as NTNL_CD                              /* 국적코드 */
		     ,  a.PSPT_NO                                   as PSPT_NO                              /* 여권번호 */
		     ,  a.PTNT_INFW_PATH_CD                         as PTNT_INFW_PATH_CD                    /* 환자유입경로코드 */
		     ,  a.INCC_PTNT_YN                              as INCC_PTNT_YN                         /* 국제진료소환자여부 */
		     ,  a.RQPR_NM                                   as RQPR_NM                              /* 요청자명 */
		     ,  a.RQPR_TLNO_CTN                             as RQPR_TLNO_CTN                        /* 요청자전화번호내용 */
		     ,  a.RQST_INPR_ID                              as RQST_INPR_ID                         /* 요청입력자ID */
		     ,  to_char(a.RQST_INPT_DT, 'yyyymmddhh24miss') as RQST_INPT_DT                         /* 요청입력일시 */
		     ,  to_char(a.DETH_YMD, 'YYYYMMDD')             as DETH_YMD                             /* 사망일자 */
		     ,  a.DETH_YMD_RGSR_ID                          as DETH_YMD_RGSR_ID                     /* 사망일자등록자ID */
		     ,  a.PRTS_RSRN                                 as PRTS_RSRN                            /* 부모주민등록번호 */
		     ,  a.PRTS_NM                                   as PRTS_NM                              /* 부모명 */
		     ,  a.INIF_AGRM_YN                              as INIF_AGRM_YN                         /* 개인정보동의여부 */
		     ,  a.SNST_INFM_AGRM_YN                         as SNST_INFM_AGRM_YN                    /* 민감정보동의여부 */
		     ,  a.UNIQ_IDNT_INFM_AGRM_YN                    as UNIQ_IDNT_INFM_AGRM_YN               /* 고유식별정보동의여부 */
		     ,  a.INIF_AGRM_RGST_SYST_NM                    as INIF_AGRM_RGST_SYST_NM               /* 개인정보동의등록시스템명 */
		     ,  a.INIF_AGRM_SGNT_YN                         as INIF_AGRM_SGNT_YN                    /* 개인정보동의서명여부 */
		     ,  a.SCRY_YN                                   as SCRY_YN                              /* 보안여부 */
		     ,  a.INSR_QLFC_EXCL_YN                         as INSR_QLFC_EXCL_YN                    /* 보험자격제외여부 */
		     ,  a.EMAIL_ID                                  as EMAIL_ID                             /* 이메일ID */
		     ,  a.EMAIL_DMAN_NM                             as EMAIL_DMAN_NM                        /* 이메일도메인명 */
		     ,  a.CASH_RCPT_USE_NO                          as CASH_RCPT_USE_NO                     /* 현금영수증사용번호 */
		     ,  a.OVRS_RSDT_YN                              as OVRS_RSDT_YN                         /* 해외거주자여부 */
		     ,  a.RMRK_CTN                                  as RMRK_CTN                             /*  비고내용 */
		     ,  0                                           as AGE_VL_1                             /*  연령값1 : 년 */
		     ,  0                                           as AGE_VL_2                             /*  연령값2 : 월 */
		     ,  0                                           as AGE_VL_3                             /*  연령값3 : 일 */
		     ,  ''                                          as PTNT_TLNO                            /* 환자전화번호 */
		     ,  ''                                          as ZPCD                                 /* 우편번호 */
		     ,  ''                                          as ZPAD_NM                              /* 우편번호주소명 */
		     ,  ''                                          as DEAD_NM                              /* 상세주소명 */
		     ,  ''                                          as CLNO                                 /* 휴대전화번호 */
		     ,  ''                                          as AFI_CLNO                             /* 휴대전화번호 */
		     ,  ''                                          as CMPN_TLNO                            /* 회사전화번호 */
		     ,  ''                                          as PTNT_CNPN_CTN                        /* 환자연락처내용 (본인연락처중 핸드폰->집전화->회사전화순) */
		  from  APPTPTNTV a /* 환자 */
		 where  ( nvl(#{ptno}   , '*') = '*' or a.PTNO    like #{ptno}    || '%')
		   and  ( nvl(#{ptntNm}, '*') = '*' or a.PTNT_NM like #{ptntNm} || '%')
		   and  ( #{frrn} = '******' and a.BRRN like #{brrn} || '%' )         /* 주민번호 앞 자리가 ******인 경우 주민번호 뒷자리 = 검색 */
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /* VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByNm-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="ptntAlisNm" column="PTNT_ALIS_NM"/>
		<result property="ptntEnsnLsnm" column="PTNT_ENSN_LSNM"/>
		<result property="ptntEnsnNm" column="PTNT_ENSN_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="bsrn" column="BSRN"/>
		<result property="btdt" column="BTDT"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="ntnlCd" column="NTNL_CD"/>
		<result property="psptNo" column="PSPT_NO"/>
		<result property="ptntInfwPathCd" column="PTNT_INFW_PATH_CD"/>
		<result property="inccPtntYn" column="INCC_PTNT_YN"/>
		<result property="rqprNm" column="RQPR_NM"/>
		<result property="rqprTlnoCtn" column="RQPR_TLNO_CTN"/>
		<result property="rqstInprId" column="RQST_INPR_ID"/>
		<result property="rqstInptDt" column="RQST_INPT_DT"/>
		<result property="dethYmd" column="DETH_YMD"/>
		<result property="dethYmdRgsrId" column="DETH_YMD_RGSR_ID"/>
		<result property="prtsRsrn" column="PRTS_RSRN"/>
		<result property="prtsNm" column="PRTS_NM"/>
		<result property="inifAgrmYn" column="INIF_AGRM_YN"/>
		<result property="snstInfmAgrmYn" column="SNST_INFM_AGRM_YN"/>
		<result property="uniqIdntInfmAgrmYn" column="UNIQ_IDNT_INFM_AGRM_YN"/>
		<result property="inifAgrmRgstSystNm" column="INIF_AGRM_RGST_SYST_NM"/>
		<result property="inifAgrmSgntYn" column="INIF_AGRM_SGNT_YN"/>
		<result property="scryYn" column="SCRY_YN"/>
		<result property="insrQlfcExclYn" column="INSR_QLFC_EXCL_YN"/>
		<result property="emailId" column="EMAIL_ID"/>
		<result property="emailDmanNm" column="EMAIL_DMAN_NM"/>
		<result property="cashRcptUseNo" column="CASH_RCPT_USE_NO"/>
		<result property="ovrsRsdtYn" column="OVRS_RSDT_YN"/>
		<result property="rmrkCtn" column="RMRK_CTN"/>
		<result property="ageVl1" column="AGE_VL_1"/>
		<result property="ageVl2" column="AGE_VL_2"/>
		<result property="ageVl3" column="AGE_VL_3"/>
		<result property="ptntTlno" column="PTNT_TLNO"/>
		<result property="zpcd" column="ZPCD"/>
		<result property="zpadNm" column="ZPAD_NM"/>
		<result property="deadNm" column="DEAD_NM"/>
		<result property="clno" column="CLNO"/>
		<result property="afiClno" column="AFI_CLNO"/>
		<result property="cmpnTlno" column="CMPN_TLNO"/>
		<result property="ptntCnpnCtn" column="PTNT_CNPN_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByNm () 
        Description :                                           환자명을 기준으로 환자 검색
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByNm-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByNm"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByNm-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntInfoByNm_환자명 검색 */
		        a.PTNO          as PTNO                      /*  환자번호 */
		     ,  a.PTNT_NM       as PTNT_NM                   /*  환자명 */
		     ,  ''              as PTNT_ALIS_NM              /*  환자별칭명 */
		     ,  ''              as PTNT_ENSN_LSNM            /*  환자영문성 */
		     ,  ''              as PTNT_ENSN_NM              /*  환자영문명 */
		     ,  ''              as FRRN                      /*  앞주민등록번호 */
		     ,  ''              as BRRN                      /*  뒤주민등록번호 */
		     ,  ''              as BSOV_AFTR_PTNO            /*  합본이후환자번호 */
		     ,  ''              as BSRN                      /*  사업자등록번호 */
		     ,  ''              as BTDT                      /*  생년월일 */
		     ,  ''              as GEND_CD                   /*  성별코드 */
		     ,  ''              as NTNL_CD                   /*  국적코드 */
		     ,  ''              as PSPT_NO                   /*  여권번호 */
		     ,  ''              as PTNT_INFW_PATH_CD         /*  환자유입경로코드 */
		     ,  ''              as INCC_PTNT_YN              /*  국제진료소환자여부 */
		     ,  ''              as RQPR_NM                   /*  요청자명 */
		     ,  ''              as RQPR_TLNO_CTN             /*  요청자전화번호내용 */
		     ,  ''              as RQST_INPR_ID              /*  요청입력자ID */
		     ,  ''              as RQST_INPT_DT              /*  요청입력일시 */
		     ,  ''              as DETH_YMD                  /*  사망일자 */
		     ,  ''              as DETH_YMD_RGSR_ID          /*  사망일자등록자ID */
		     ,  ''              as PRTS_RSRN                 /*  부모주민등록번호 */
		     ,  ''              as PRTS_NM                   /*  부모명 */
		     ,  ''              as INIF_AGRM_YN              /*  개인정보동의여부 */
		     ,  ''              as SNST_INFM_AGRM_YN         /*  민감정보동의여부 */
		     ,  ''              as UNIQ_IDNT_INFM_AGRM_YN    /*  고유식별정보동의여부 */
		     ,  ''              as INIF_AGRM_RGST_SYST_NM    /*  개인정보동의등록시스템명 */
		     ,  ''              as INIF_AGRM_SGNT_YN         /*  개인정보동의서명여부 */
		     ,  ''              as SCRY_YN                   /*  보안여부 */
		     ,  ''              as INSR_QLFC_EXCL_YN         /*  보험자격제외여부 */
		     ,  ''              as EMAIL_ID                  /*  이메일ID */
		     ,  ''              as EMAIL_DMAN_NM             /*  이메일도메인명 */
		     ,  ''              as CASH_RCPT_USE_NO          /*  현금영수증사용번호 */
		     ,  ''              as OVRS_RSDT_YN              /*  해외거주자여부 */
		     ,  a.RMRK_CTN      as RMRK_CTN                  /*  비고내용 */
		     ,  0               as AGE_VL_1                  /*  연령값1 : 년 */
		     ,  0               as AGE_VL_2                  /*  연령값2 : 월 */
		     ,  0               as AGE_VL_3                  /*  연령값3 : 일 */
		     ,  ''              as PTNT_TLNO                 /*  환자전화번호 */
		     ,  ''              as ZPCD                      /*  우편번호 */
		     ,  ''              as ZPAD_NM                   /*  우편번호주소명 */
		     ,  ''              as DEAD_NM                   /*  상세주소명 */
		     ,  ''              as CLNO                      /*  휴대전화번호 */
		     ,  ''              as AFI_CLNO                  /*  휴대전화번호 */
		     ,  ''              as CMPN_TLNO                 /*  회사전화번호 */
		     ,  ''              as PTNT_CNPN_CTN             /*  환자연락처내용 (본인연락처중 핸드폰->집전화->회사전화순) */
		  from  APPTPTNTT a
		 where  a.PTNT_NM like #{ptntNm} || '%'
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /*  VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtno-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="intgPtno" column="INTG_PTNO"/>
		<result property="hsptCd" column="HSPT_CD"/>
		<result property="hsptNm" column="HSPT_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtno () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtno-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtno"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtno-result" useCache="true" flushCache="false">
		<![CDATA[
		select /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtno */
		       /*+ LEAING(b a) USE_NL(b a) INDEX(a APPTINTGT_I01) */
		        a.PTNO                          as PTNO            -- 환자번호
		     ,  a.PTNT_NM                       as PTNT_NM         -- 환자명
		     ,  a.FRRN                          as FRRN            -- 앞주민등록번호
		     ,  a.BRRN                          as BRRN            -- 뒤주민등록번호
		     ,  a.BSOV_AFTR_PTNO                as BSOV_AFTR_PTNO  -- 합본환자번호
		     ,  a.INTG_PTNO                     as INTG_PTNO       -- 통합고객환자번호
		     ,  a.HSPT_CD                       as HSPT_CD         -- 병원코드
		     ,  (
		        case a.HSPT_CD 
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_FIRST')  then '안암'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_SECOND') then '구로'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_THIRD')  then '안산'
		                                                            else a.HSPT_CD 
		        end
		        )                               as HSPT_NM         -- 병원코드명  
		          from  ( SELECT /*+ INDEX(x APPTINTGT_PK) */
		                         DISTINCT x.INTG_PTNO
		                    FROM APPTINTGT x
		                   WHERE x.PTNO = trim(#{ptno})
		                ) b,
		                APPTINTGT a
		         where  a.INTG_PTNO = b.INTG_PTNO
		 order 
		    by  a.INTG_PTNO
		     ,  a.PTNT_NM
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtnm-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="intgPtno" column="INTG_PTNO"/>
		<result property="hsptCd" column="HSPT_CD"/>
		<result property="hsptNm" column="HSPT_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtnm () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtnm-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtnm"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtnm-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByPtnm */
		        /*+ LEAING(b a) USE_NL(b a) INDEX(a APPTINTGT_I01) */
		        a.PTNO                as PTNO            -- 환자번호
		     ,  a.PTNT_NM             as PTNT_NM         -- 환자명
		     ,  a.FRRN                as FRRN            -- 앞주민등록번호
		     ,  a.BRRN                as BRRN            -- 뒤주민등록번호
		     ,  a.BSOV_AFTR_PTNO      as BSOV_AFTR_PTNO  -- 합본환자번호
		     ,  a.INTG_PTNO           as INTG_PTNO       -- 통합고객환자번호
		     ,  a.HSPT_CD             as HSPT_CD         -- 병원코드
		     ,  (
		        case a.HSPT_CD
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_FIRST')  then '안암'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_SECOND') then '구로'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_THIRD')  then '안산'
		                                                            else a.HSPT_CD
		        end
		        )                     as HSPT_NM         -- 병원코드명
		          from  ( SELECT /*+ INDEX(x APPTINTGT_I05) */
		                         DISTINCT x.INTG_PTNO
		                    FROM APPTINTGT x
		                   WHERE x.PTNT_NM like trim(#{ptntNm}) || '%'
		                ) b,
		                APPTINTGT a
		         where  a.INTG_PTNO = b.INTG_PTNO
		 order
		    by  a.INTG_PTNO
		     ,  a.PTNT_NM
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByFrrn-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="intgPtno" column="INTG_PTNO"/>
		<result property="hsptCd" column="HSPT_CD"/>
		<result property="hsptNm" column="HSPT_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByFrrn () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByFrrn-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByFrrn"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByFrrn-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgByFrrn */
		        /*+ LEAING(b a) USE_NL(b a) INDEX(a APPTINTGT_I01) */
		        a.PTNO                  as PTNO            -- 환자번호
		     ,  a.PTNT_NM               as PTNT_NM         -- 환자명
		     ,  a.FRRN                  as FRRN            -- 앞주민등록번호
		     ,  a.BRRN                  as BRRN            -- 뒤주민등록번호
		     ,  a.BSOV_AFTR_PTNO        as BSOV_AFTR_PTNO  -- 합본환자번호
		     ,  a.INTG_PTNO             as INTG_PTNO       -- 통합고객환자번호
		     ,  a.HSPT_CD               as HSPT_CD         -- 병원코드
		     ,  (
		        case a.HSPT_CD
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_FIRST')  then '안암'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_SECOND') then '구로'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_THIRD')  then '안산'
		                                                            else a.HSPT_CD
		        end
		        )                       as HSPT_NM         -- 병원코드명
		          from  ( SELECT /*+ INDEX(x APPTINTGT_I03) */
		                         DISTINCT x.INTG_PTNO
		                    FROM APPTINTGT x
		                   WHERE x.FRRN like  trim(#{frrn}) || '%'
				    and  ( nvl(#{ptno}  , '*') = '*' or x.PTNO    like trim(#{ptno}) || '%')
				    and  ( nvl(#{ptntNm}, '*') = '*' or x.PTNT_NM like trim(#{ptntNm}) || '%')
		                ) b,
		                APPTINTGT a
		         where  a.INTG_PTNO = b.INTG_PTNO
		 order 
		    by  a.INTG_PTNO
		     ,  a.FRRN
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgBybrrn-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
		<result property="bsovAftrPtno" column="BSOV_AFTR_PTNO"/>
		<result property="intgPtno" column="INTG_PTNO"/>
		<result property="hsptCd" column="HSPT_CD"/>
		<result property="hsptNm" column="HSPT_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgBybrrn () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgBybrrn-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgBybrrn"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgBybrrn-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntIntgBybrrn */
		        /*+ LEAING(b a) USE_NL(b a) INDEX(a APPTINTGT_I01) */
		        a.PTNO                PTNO            -- 환자번호
		     ,  a.PTNT_NM             PTNT_NM         -- 환자명
		     ,  a.FRRN                FRRN            --  앞주민등록번호
		     ,  a.BRRN                BRRN            --  뒤주민등록번호
		     ,  a.BSOV_AFTR_PTNO      BSOV_AFTR_PTNO  -- 합본환자번호
		     ,  a.INTG_PTNO           INTG_PTNO       -- 통합고객환자번호
		     ,  a.HSPT_CD             HSPT_CD         -- 병원코드
		     ,  (
		        case a.HSPT_CD
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_FIRST')  then '안암'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_SECOND') then '구로'
		        when FN_CC_GET_CNST_VL('MED_001', 'HSPT_CD_THIRD')  then '안산'
		                                                            else a.HSPT_CD
		        end
		        )                       as HSPT_NM         -- 병원코드명
		          from  ( SELECT /*+ INDEX(x APPTINTGT_I03) */
		                         DISTINCT x.INTG_PTNO
		                    FROM APPTINTGT x
		                   WHERE x.BRRN like  trim(#{brrn}) || '%'
				    and  ( nvl(#{ptno}  , '*') = '*' or x.PTNO    like trim(#{ptno}) || '%')
				    and  ( nvl(#{ptntNm}, '*') = '*' or x.PTNT_NM like trim(#{ptntNm}) || '%')
		                ) b,
		                APPTINTGT a
		         where  a.INTG_PTNO = b.INTG_PTNO
		 order 
		    by  a.INTG_PTNO
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntHameHx-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ptno" column="PTNO"/>
		<result property="mdrpNo" column="MDRP_NO"/>
		<result property="mdcrDt" column="MDCR_DT"/>
		<result property="mdcrYmd" column="MDCR_YMD"/>
		<result property="codvCd" column="CODV_CD"/>
		<result property="codvNm" column="CODV_NM"/>
		<result property="fvdvCd" column="FVDV_CD"/>
		<result property="fvdvNm" column="FVDV_NM"/>
		<result property="mcdpCd" column="MCDP_CD"/>
		<result property="abrvMcdpCd" column="ABRV_MCDP_CD"/>
		<result property="mccnCd" column="MCCN_CD"/>
		<result property="mccnAbrvCd" column="MCCN_ABRV_CD"/>
		<result property="mddrId" column="MDDR_ID"/>
		<result property="mddrNm" column="MDDR_NM"/>
		<result property="gndrId" column="GNDR_ID"/>
		<result property="gndrNm" column="GNDR_NM"/>
		<result property="ptno" column="PTNO"/>
		<result property="ptntNm" column="PTNT_NM"/>
		<result property="frrn" column="FRRN"/>
		<result property="brrn" column="BRRN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntHameHx (환자수진이력조회(주민등록번호)) 
        Description :                                           환자수진이력조회(주민등록번호)
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntHameHx-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntHameHx"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntHameHx-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntHameHx */
		        a.PTNO                                  as PTNO             /* 환자번호 */
		     ,  a.MDRP_NO                               as MDRP_NO          /* 접수번호 */
		     ,  to_char(a.MDCR_DT , 'yyyymmddhh24miss') as MDCR_DT          /* 진료일시 */
		     ,  to_char(a.MDCR_YMD, 'yyyymmdd')         as MDCR_YMD         /* 진료일자 */
		     ,  a.CODV_CD                               as CODV_CD          /* 내원구분 */
		     ,  case a.CODV_CD
		        when 'O' then '외래'
		        when 'I' then '입원'
		        when 'D' then 'DSC'
		        when 'E' then '응급'
		                 else a.CODV_CD
		        end                                     as CODV_NM          /* 내원구분명 */
		     ,  a.FVDV_CD                               as FVDV_CD
		     ,  (
		        select  z.DETL_CD_NM
		          from  CCCMCDDMT z
		         where  z.COMN_GRP_CD  = 'AP019'
		           and  z.COMN_DTLS_CD = a.FVDV_CD
		        )                                       as FVDV_NM          /* 초재진구분명 */
		     ,  a.MCDP_CD                               as MCDP_CD          /* 진료과코드 */
		     ,  (
		        select  ABRV_DPRT_CD
		          from  HZDEPTMMT
		         where  DPRT_CD = a.MCDP_CD
		        )                                       as ABRV_MCDP_CD     /* 진료과 */
		     ,  a.MCCN_CD                               as MCCN_CD          /* 센터코드 */
		     ,  (
		        select  ABRV_DPRT_CD
		          from  HZDEPTMMT
		         where  DPRT_CD = a.MCCN_CD
		        )                                       as MCCN_ABRV_CD     /*센터약어코드 */
		     ,  a.MDDR_ID                               as MDDR_ID          /* 진료의사ID */
		     ,  (
		        select  USER_NM
		          from  CCUSRDPHT
		         where  USER_ID = a.MDDR_ID
		        )                                       as MDDR_NM          /* 진료의명 */
		     ,  a.GNDR_ID                               as GNDR_ID          /* 주치의사ID */
		     ,  (
		        select  USER_NM
		          from  CCUSRDPHT
		         where  USER_ID = a.GNDR_ID
		        )                                       as GNDR_NM          /* 주치의명 */
		     ,  b.PTNO                                  as PTNO             /* 환자번호 */
		     ,  b.PTNT_NM                               as PTNT_NM          /* 환자명 */
		     ,  b.FRRN                                  as FRRN             /* 주민번호(앞자리) */
		     ,  b.BRRN                                  as BRRN             /* 주민번호(뒷자리) */
		  from  APRCRPTNT a /* 진료접수 */
		     ,  APPTPTNTV b /* 환자 */
		 where  1=1
		   and  a.PTNO = b.PTNO
		   and  a.CNCL_DT is null
		   and  (   (    a.CODV_CD = 'O'  -- 외래진료
		            and  a.MDCR_ANDV_CD not in ('G', 'U')         /* 진료예약구분코드(AP008) 7-Refill, 8-2차진료, 9-기타, A-연속진료, G-일반건진, U-종합건진 : A,G,U 추가(2021.02.17 obh)  */
		            and  a.MDCR_YMD = trunc(sysdate)    -- 외래는 당일 진료가 있는경우
		            )
		        or  (    a.CODV_CD IN ('O')  -- 건강검진
		            and  a.MDCR_ANDV_CD not in ('G', 'U')   /* G-일반건진, U-종합건진 */
		            and  a.MDCR_YMD = trunc(sysdate)    -- 외래는 당일 진료가 있는경우
		            )
		        or  (    a.CODV_CD IN ('I')  -- 병동진료
		            and  trunc(sysdate) between trunc(a.MDCR_DT)     -- 병동환자는 현재일자 기준으로 재원중인 환자
		                                    and nvl(a.DSCH_DT, to_date('29991231', 'yyyymmdd'))
		            )
		        or  (    a.CODV_CD = 'E'  -- 응급진료
		            and  trunc(sysdate) between trunc(a.MDCR_DT)     -- 응급환자는 현재일자 기준으로 재원중인 환자
		                                    and nvl(a.DSCH_DT, to_date('29991231', 'yyyymmdd'))
		            )
		        )
		   and  a.PTNO IN (
		                  select  z.PTNO
		                    from  APPTPTNTV z
		                   where  z.PTNT_NM  = #{ptntNm}  -- 환자명
		                     and  z.FRRN     = #{frrn}    -- 주민번호(앞자리)
		                     and  z.BRRN     = #{brrn}    -- 주민번호(뒷자리)
		                  )
		   and  (  nvl(#{vipYn}, '*') = '*'
		        or not exists ( /* VVIP제외 조회 */
		                      select  1
		                        from  MZCTRLMMT sA
		                       where  sA.MDCR_CTRL_CD      = 'MM859'
		                         and  sA.MDCR_DTLS_CTRL_CD = a.PTNO
		                      )
		        )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntSthsYmd-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO">
	
		<result property="ordrYmd" column="ORDR_YMD"/>
		<result property="ddcn" column="DDCN"/>
		<result property="mdcrDt" column="MDCR_DT"/>
		<result property="dschDt" column="DSCH_DT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntSthsYmd (환자 재원기간 일자목록 조회) 
        Description :                                           환자 재원기간 일자목록 조회
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntSthsYmd-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntSthsYmd"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpPtntInfoDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntSthsYmd-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpPtntInfoDAO-listPtntSthsYmd */
		<![CDATA[
		select  to_char(m.DSCH_DT - level+1, 'yyyy-mm-dd')  as ORDR_YMD   -- 처방일자
		     ,  level                                       as DDCN       -- 일수
		     ,  to_char(m.MDCR_DT, 'yyyymmdd')              as MDCR_DT    -- 진료일자
		     ,  to_char(m.DSCH_DT, 'yyyymmdd')              as DSCH_DT    -- 퇴원일자
		  from  (
		        select  a.MDRP_NO                           as MDRP_NO
		             ,  trunc(a.MDCR_DT)                    as MDCR_DT
		             ,  case
		                when nvl(a.DSCH_DT, trunc(sysdate)) = to_date('29991231', 'yyyymmdd')
		                     then trunc(sysdate)
		                else nvl(a.DSCH_DT, trunc(sysdate))
		                end                               as DSCH_DT
		          from  APRCRPTNT a /* 진료접수 */
		         where  a.CODV_CD IN ('I')  -- 병동진료
		           and  a.MDRP_NO = #{mdrpNo}
		        ) m
		connect 
		    by  LEVEL <= ((m.DSCH_DT+1) - m.MDCR_DT)
		]]>
	</select>



</mapper>