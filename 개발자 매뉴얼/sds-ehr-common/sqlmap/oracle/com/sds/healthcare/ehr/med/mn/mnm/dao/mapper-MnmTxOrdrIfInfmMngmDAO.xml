<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    SQL File Name : mapper_MnmTxOrdrIfInfmMngmDAO_sql.xml 
    Description :                                      처치처방관련 IF정보 관리DAO(mdm_trtordt_m01)
                  -->
<mapper namespace="MnmTxOrdrIfInfmMngmDAO">


	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdObsExstYn-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdObsExstYn (전광판 OBS 존재여부 조회) 
        Description :                                           전광판 OBS 존재여부 조회(mnd_zdisppt_s05)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdObsExstYn-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdObsExstYn"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdObsExstYn-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdObsExstYn */
		<![CDATA[
		select /*+ mnd_zdisppt_s05$S01_전광판 OBS 존재여부 조회 DAM */
		       count(*) as ETC_COT
		  from MNZDISPPT
		 where PTNO     = #{ptno}
		   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		   and ORDR_SNO = #{ordrSno}
		   and ORTA_NM  = 'MDTRTORDT'
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneImagMpngExclMcteEqpnIfExstYn-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneImagMpngExclMcteEqpnIfExstYn (이미지매핑제외 의료기기인터페이스 존재여부 조회) 
        Description :                                           이미지매핑제외 의료기기인터페이스 존재여부 조회(mdd_szintfm_s02)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneImagMpngExclMcteEqpnIfExstYn-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneImagMpngExclMcteEqpnIfExstYn"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneImagMpngExclMcteEqpnIfExstYn-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneImagMpngExclMcteEqpnIfExstYn */
		<![CDATA[
		select /*+ mdd_szintfm_s02$S01_이미지매칭제외 의료기기인터페이스 존재여부 조회 DAM */
		       count(*) as ETC_COT
		  from SZINTFMMT
		 where PTNO = #{ptno}
		   and trunc(ORDR_DT) = to_date(#{ordrYmd}, 'YYYYMMDD')
		   and ORDR_SNO = #{ordrSno}
		   and EXMN_CD = #{ordrCd}
		   and IMAG_PATH_NM is null
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneMcteEqpnIfExstYn-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneMcteEqpnIfExstYn (의료기기인터페이스 존재여부 조회) 
        Description :                                           처방료처방 발행 시 의료기기인터페이스 존재여부를 조회한다.(mdd_szintfm_s01)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneMcteEqpnIfExstYn-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneMcteEqpnIfExstYn"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneMcteEqpnIfExstYn-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneMcteEqpnIfExstYn */
		<![CDATA[
		select /*+ mdd_szintfm_s01$S01_의료기기인터페이스 존재여부 조회 DAM */ 
		       count(*) as ETC_COT
		  from SZINTFMMT
		 where PTNO = #{ptno}
		   and to_date(to_char(ORDR_DT,'YYYYMMDD'), 'YYYYMMDD') = to_date(#{ordrYmd}, 'YYYYMMDD')
		   and ORDR_SNO = #{ordrSno}
		   and EXMN_CD = #{ordrCd}
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneExmnEqpmClbyExmnCdExstYn-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneExmnEqpmClbyExmnCdExstYn (검사장비별 검사코드 존재여부) 
        Description :                                           처방료처방 발행 시 검사장비별검사코드 존재여부를 조회한다.(mdd_eqipdmt_s01)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneExmnEqpmClbyExmnCdExstYn-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneExmnEqpmClbyExmnCdExstYn"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneExmnEqpmClbyExmnCdExstYn-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneExmnEqpmClbyExmnCdExstYn */
		<![CDATA[
		select /*+ mdd_eqipdmt_s01$S01_검사장비별검사코드 존재여부 DAM */
		       count(*) as ETC_COT
		  from SZEQIPDMT
		 where EXMN_CD = #{ordrCd}
		   and EXCF_CD = case
		                       when #{orocDprtCd} = fn_cc_get_dprt_cd('DPRT_OBGY')       then 'OBGY'    /* 111260 */
		                       when #{ordrCd} = 'HA901B'  then 'SG3'
		                       when #{ordrCd} = 'IB900'   then 'DER'
		                       when #{ordrCd} = 'IK902'   then 'SS'
		                       when #{ordrCd} = 'XA734'   then 'MIC'
		                       when #{ordrCd} = 'XA735'   then 'MIC'
		                       when #{ordrCd} = 'IS8002G' then 'SH'
		                       when #{ordrCd} = 'IS8003G' then 'SH'
		                       when #{ordrCd} = 'IS8004G' then 'SH'
		                       when #{ordrCd} = 'XB350'   then 'SH'
		                       when #{ordrCd} = 'IB7190'  then 'IM9'
		                       when #{ordrCd} = 'IB7190S' then 'IM9'
		                       else (select ABRV_DPRT_CD 
		                               from HZDEPTMMT 
		                              where dprt_cd = #{mcdpCd}
		                            )
		                  end
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObgyMcteEqpnIfExstYn-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObgyMcteEqpnIfExstYn (OBGY 의료기기인터페이스 존재여부 조회) 
        Description :                                           처방료처방 발행 시 OBGY 의료기기인터페이스 존재여부를 조회한다.(mdd_eqipdmt_s02)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObgyMcteEqpnIfExstYn-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObgyMcteEqpnIfExstYn"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObgyMcteEqpnIfExstYn-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObgyMcteEqpnIfExstYn */
		<![CDATA[
		select /*+ mdd_eqipdmt_s02$S01_OBGY 의료기기인터페이스 존재여부 조회 DAM */ 
				   count(*) as ETC_COT
		  from SZEQIPDMT
		 where EXMN_CD = #{ordrCd}
		   and EXCF_CD = 'OBGY'
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObsElbdInfm-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="elbdNo" column="ELBD_NO"/>
		<result property="elbdDetlDscrCtn" column="ELBD_DETL_DSCR_CTN"/>
		<result property="elbdDsplZoneCd" column="ELBD_DSPL_ZONE_CD"/>
		<result property="detlCdNm" column="DETL_CD_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObsElbdInfm (전광판 OBS장비 정보 조회) 
        Description :                                           OBS로 등록된 전광판정보를 조회한다.(mnd_zdispmt_s01)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObsElbdInfm-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObsElbdInfm"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObsElbdInfm-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneObsElbdInfm */
		<![CDATA[
		select /*+ mnd_zdispmt_s01$S01_전광판 OBS장비 정보 조회 DAM */ 
		       a.ELBD_NO as ELBD_NO
		     , a.ELBD_DETL_DSCR_CTN as ELBD_DETL_DSCR_CTN
		     , a.ELBD_DSPL_ZONE_CD as ELBD_DSPL_ZONE_CD
		     , b.DETL_CD_NM as DETL_CD_NM
		  from MNZDISPMT a
		     , CCCMCDDMT b
		 where a.ELBD_DSPL_ZONE_CD = 'OBS' /* OBGY로 등록된 코드에 대해서는 OBS(산부인과) 초음파 검사실로 넣는다. */
		   and a.OTPT_MCRM_NO ='0'
		   and b.COMN_GRP_CD = 'MNA011'
		   and b.COMN_DTLS_CD = a.ELBD_DSPL_ZONE_CD
		   and rownum < 2
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneDndpPacsLnkgOrdr-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneDndpPacsLnkgOrdr (치과 PACS연동 처방 조회) 
        Description :                                           처방료처방 발행 시 치과 PACS연동 처방을 조회한다.(mdd_ordrcmt_s04)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneDndpPacsLnkgOrdr-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneDndpPacsLnkgOrdr"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneDndpPacsLnkgOrdr-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneDndpPacsLnkgOrdr */
		<![CDATA[
		select /*+ mdd_ordrcmt_s04$S01_치과 PACS연동 처방 조회 DAM */ 
		       count(*) as ETC_COT
		  from MDORDRCMT
		 where ORDR_CD = #{ordrCd}
		   and ORDR_CD like 'KR%'
		   and APFN_YMD = to_date('29991231', 'yyyymmdd')
		   and PACS_INRF_YN = 'Y' /* PACS 연동여부 */
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmExstYn-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmExstYn (전광판 치과방사선실장비 존재여부 조회) 
        Description :                                           등록수정 구분을 위하여 전광판 치과방사선실장비정보가 존재하는지 조회한다.(mnd_zdisppt_s06)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmExstYn-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmExstYn"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmExstYn-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmExstYn */
		<![CDATA[
		select /*+ mnd_zdisppt_s06$S01_전광판 치과방사선실장비 존재여부 조회 DAM */ 
		       count(*) as ETC_COT
		  from MNZDISPPT
		 where PTNO     = #{ptno}
		   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		   and ORTA_NM  = 'MDTRTORDT'
		   and DPRT_CD  = 'RDENT'	 /* 치과방사선(실제부서코드는 아님.) */
		   and MDCR_ENRM_DVSN_CD <> 'O'
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmInfm-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="elbdNo" column="ELBD_NO"/>
		<result property="elbdDetlDscrCtn" column="ELBD_DETL_DSCR_CTN"/>
		<result property="elbdDsplZoneCd" column="ELBD_DSPL_ZONE_CD"/>
		<result property="detlCdNm" column="DETL_CD_NM"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmInfm (전광판 치과방사선실장비 정보 조회) 
        Description :                                           치과방사선(RDENT)으로 등록된 장비정보를 조회한다.(mnd_zdispmt_s02)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmInfm-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmInfm"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmInfm-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneElbdDndpRdtnRomEqpmInfm */
		<![CDATA[
		select /*+ mnd_zdispmt_s02$S01_전광판 치과방사선실장비 정보 조회 DAM  */ 
		       a.ELBD_NO            as ELBD_NO
		     , a.ELBD_DETL_DSCR_CTN as ELBD_DETL_DSCR_CTN
		     , a.ELBD_DSPL_ZONE_CD  as ELBD_DSPL_ZONE_CD
		     , b.DETL_CD_NM         as DETL_CD_NM
		  from MNZDISPMT a
		     , CCCMCDDMT b
		 where 1=1
		   and a.ELBD_DSPL_ZONE_CD = 'RDENT' /* 치과 방사선실 */
		   and a.OTPT_MCRM_NO      = '0'
		   and b.COMN_GRP_CD       = 'MNA011'
		   and b.COMN_DTLS_CD      = a.ELBD_DSPL_ZONE_CD
		   and rownum < 2
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrInfm-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="mcdpCd" column="MCDP_CD"/>
		<result property="codvCd" column="CODV_CD"/>
		<result property="ptadCodvCd" column="PTAD_CODV_CD"/>
		<result property="frnsDprtCd" column="FRNS_DPRT_CD"/>
		<result property="rcstCd" column="RCST_CD"/>
		<result property="ordrNtmQty" column="ORDR_NTM_QTY"/>
		<result property="ordrUnslCtn" column="ORDR_UNSL_CTN"/>
		<result property="enfrPrrnYmd" column="ENFR_PRRN_YMD"/>
		<result property="dcDvsnCd" column="DC_DVSN_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrInfm (처치처방 정보 조회) 
        Description :                                           처방료치처방 변경을 위해 변경 전 처치처방 정보를 조회한다.(mdd_trtordt_s04)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrInfm-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrInfm"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrInfm-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrInfm */
		<![CDATA[
		select /*+ mdd_trtordt_s04$S01_변경 전 처치처방 정보 조회 DAM */ 
		       ORDR_CD        as ORDR_CD
		     , ORCL_CD        as ORCL_CD
		     , MCDP_CD        as MCDP_CD
		     , CODV_CD        as CODV_CD
		     , PTAD_CODV_CD   as PTAD_CODV_CD
		     , FRNS_DPRT_CD   as FRNS_DPRT_CD
		     , RCST_CD        as RCST_CD
		     , ORDR_NTM_QTY   as ORDR_NTM_QTY
		     , ORDR_UNSL_CTN  as ORDR_UNSL_CTN
		     , to_char(ENFR_PRRN_YMD, 'YYYYMMDD') as ENFR_PRRN_YMD
		     , DC_DVSN_CD     as DC_DVSN_CD
		  from MDTRTORDT
		 where PTNO = #{ptno}
		   and ORDR_YMD = to_date(#{ordrYmd}, 'YYYYMMDD')
		   and ORDR_SNO = #{ordrSno}
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrElbdCnt-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrElbdCnt (진료실촬영제외 처치처방 전광판데이터 수 조회) 
        Description :                                           RTEMP로 등록된 처치처방 전광판데이터수 조회한다.(진료실촬영 제외)(mnd_zdisppt_s08)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrElbdCnt-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrElbdCnt"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrElbdCnt-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrElbdCnt */
		<![CDATA[
		select /*+ mnd_zdisppt_s08$S01_진료실촬영제외 처치처방 전광판데이터수 조회 DAM */ 
			     count(*) as ETC_COT
		  from MNZDISPPT
		 where PTNO     = #{ptno}
		   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		   and ORTA_NM  = 'MDTRTORDT'
		   and ELBD_NO  = 'RTEMP'
		   and (PTNT_MEMO_CTN not like '%진료실 촬영%' or PTNT_MEMO_CTN is null)
		   and nvl(RSRV_YN, 'N') = 'N'
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneErInlsTxOrdrElbdCnt-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="etcCot" column="ETC_COT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneErInlsTxOrdrElbdCnt (응급포함 처치처방 전광판데이터수 조회) 
        Description :                                           RTEMP 등록된 처치처방 전광판데이터수 조회한다.(응급포함)(mnd_zdisppt_s09)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneErInlsTxOrdrElbdCnt-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneErInlsTxOrdrElbdCnt"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneErInlsTxOrdrElbdCnt-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneErInlsTxOrdrElbdCnt */
		<![CDATA[
		select /*+ mnd_zdisppt_s09$S01_응급포함 처치처방 전광판데이터수 조회 DAM */
					 count(*) as ETC_COT
		  from MNZDISPPT
		 where PTNO     = #{ptno}
		   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		   and ORTA_NM  = 'MDTRTORDT'
		   and ELBD_NO  = 'RTEMP'
		   and PTNT_MEMO_CTN like '%응급%'
		   and nvl(RSRV_YN, 'N') = 'N'
		]]>
	</select>






    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertTxOrdrMcteEqpnIf (처치처방 의료기기인터페이스 등록) 
        Description :                                           처치처방 등록 시 관련 의료기기인터페이스를 등록한다.(szd_mdintfm_i01)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<insert id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertTxOrdrMcteEqpnIf"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertTxOrdrMcteEqpnIf */
		<![CDATA[
		insert /*+ szd_mdintfm_i01$I01_처치처방 의료기기인터페이스 등록 DAM */
		  into SZINTFMMT
		     (
		       PTNO            /* 환자번호     */
		     , ORDR_DT         /* 처방일시     */
		     , ORDR_SNO        /* 처방일련번호 */
		     , EXMN_CD         /* 검사코드     */
		     , SPCM_NO         /* 검체번호     */
		     , EXCF_CD         /* 검사분류코드 */
		     , EXRM_CD         /* 검사실코드   */
		     , MCDP_CD         /* 진료과코드   */
		     , CODV_CD         /* 내원구분코드 */
		     , RPTN_DT         /* 접수일시     */
		     , ORDR_STTS_CD    /* 처방상태코드 */
		     , CDIS_STTS_CD    /* CDIS상태코드 */
		       /*  서버 프로그램 전환시 자동 추가된 항목 */
		     , FRST_RGSR_ID
		     , FRST_RGST_IP
		     , FRST_RGST_DT
		     , FRST_RGST_CLNT_PRGM_ID
		     , FRST_RGST_SRVR_PRGM_ID
		     , LAST_UPDR_ID
		     , LAST_UPDT_IP
		     , LAST_UPDT_DT
		     , LAST_UPDT_CLNT_PRGM_ID
		     , LAST_UPDT_SRVR_PRGM_ID
		     )
		values
		     (
		       #{ptno}        /* 환자번호     */
		     , to_date(#{ordrYmd}, 'YYYYMMDD') /* 처방일시       */
		     , #{ordrSno}    /* 처방일련번호 */
		     , #{ordrCd}     /* 검사코드     */
		     , 'D1'                            /* 검체번호     */
		     , case
		           when #{orocCd} = 'y'       then 'OBGY'
		           when #{ordrCd} = 'HA901B'  then 'SG3'
		           when #{ordrCd} = 'IB900'   then 'DER'
		           when #{ordrCd} = 'IK902'   then 'SS'
		           when #{ordrCd} = 'XA734'   then 'MIC'
		           when #{ordrCd} = 'XA735'   then 'MIC'
		           when #{ordrCd} = 'IS8002G' then 'SH'
		           when #{ordrCd} = 'IS8003G' then 'SH'
		           when #{ordrCd} = 'IS8004G' then 'SH'
		           when #{ordrCd} = 'XB350'   then 'SH'
		           when #{ordrCd} = 'IB7190'  then 'IM9'
		           when #{ordrCd} = 'IB7190S' then 'IM9'
		           else (select ABRV_DPRT_CD 
		                   from HZDEPTMMT 
		                  where dprt_cd = #{mcdpCd})
		           end                         /* 검사분류코드 */
		     , ''                              /* 검사실코드 */
		     , case
		           when #{orocCd} = 'y' then fn_cc_get_dprt_cd('DPRT_OBGY')  /* OBGY 111260 */
		           else #{mcdpCd}
		           end                         /* 진료과코드     */
		     , #{codvCd}
		     , sysdate   /* 접수일시   */
		     , 'Y'   /* 처방상태   */
		     , '0'                /* CDIS상태   */
		       /*  서버 프로그램 전환시 자동 추가된 항목 */
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		     )
		]]>
	</insert>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertObsElbdInfm (전광판 OBS장비 정보 등록) 
        Description :                                           처치처방 등록에따라 전광판 OBS장비 정보를 등록한다.(mnd_zdisppt_i11)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<insert id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertObsElbdInfm"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertObsElbdInfm */
		<![CDATA[
		insert /*+ mnd_zdisppt_i11$I01_전광판 OBS장비 정보 등록 DAM */ 
		  into MNZDISPPT
		  	 (
		  		 ELBD_SNO
			   , ELBD_NO                   /* 전광판번호 */
		     , MCCN_CD                   /* 진료센터코드 */
		     , DPRT_CD                   /* 부서코드 */
		     , DPRT_NM                   /* 부서명 */
		     , MDDR_ID                   /* 진료의사ID */
		     , MDDR_NM                   /* 진료의사명 */
		     , PTNO                      /* 환자번호 */
		     , PTNT_NM                   /* 환자명 */
		     , MDRP_NO                   /* 진료접수번호 */
		     , APNT_DT                   /* 예약일시 */
		     , ELBD_EXCF_CD              /* 전광판검사분류코드 */
		     , PTNT_MEMO_CTN             /* 환자메모내용 */
		     , RPTN_DT                   /* 접수일시 */
		     , ELBD_CNTO_PRGM_DSSC_CD    /* 전광판컨트롤프로그램표시영역코드 */
		     , ELBD_DSPL_ROOM_NM         /* 전광판표시방명 */
		     , MDCR_ENRM_DVSN_CD         /* 진료입실구분코드 */
		     , APNT_TYPE_CD              /* 예약유형코드 */
		     , WAIT_NO                   /* 대기번호 */
		     , AMPM_DVSN_CD              /* 오전오후구분코드 */
		     , RSRV_YN                   /* 보류여부 */
		     , RGST_LCDV_CD              /* 등록위치구분코드 */
		     , ORDR_YMD                  /* 처방일자 */
		     , ORDR_SNO                  /* 처방일련번호 */
		     , ORTA_NM                   /* 처방테이블명 */
		     /*  서버 프로그램 전환시 자동 추가된 항목 */
		     , FRST_RGSR_ID
		     , FRST_RGST_IP
		     , FRST_RGST_DT
		     , FRST_RGST_CLNT_PRGM_ID
		     , FRST_RGST_SRVR_PRGM_ID
		     , LAST_UPDR_ID
		     , LAST_UPDT_IP
		     , LAST_UPDT_DT
		     , LAST_UPDT_CLNT_PRGM_ID
		     , LAST_UPDT_SRVR_PRGM_ID
		 	 )
		values
			   (
			     MNZDISPPTQ.nextval
		     , #{elbdNo}	/* 전광판번호 */
		     , #{mccnCd} /* 진료센터코드 */
		     , #{dprtCd} /* 부서코드 */
		     , #{dprtNm}	/* 부서명 */
		     , '000000'                   	/* 진료의사ID */
		     , '000'                   	/* 진료의사명 */
		     , #{ptno}    /* 환자번호 */
		     , ( select PTNT_NM 
		           from APPTPTNTT 
		          where PTNO = #{ptno} )	/* 환자명 */
		     , #{mdrpNo}	/* 진료접수번호 */
		     , sysdate                   	/* 예약일시 */
		     , 'MN'              			/* 전광판검사분류코드 */
		     , '(' || #{ordrCd} || ')' ||
		     	 (select x.ORDR_NM
		     	    from MDORDRCMT x
		         where x.ORDR_CD = #{ordrCd} )
		     , null                   		/* 접수일시 */
		     , '00'    					/* 전광판컨트롤프로그램표시영역코드 */
		     , #{elbdDsplRoomNm}         /* 전광판표시방명 */
		     , 'N'         				/* 진료입실구분코드 */
		     , '2'              			/* 예약유형코드 */
		     , null                   		/* 대기번호 */
		     , 'A'              			/* 오전오후구분코드 */
		     , 'N'                   		/* 보류여부 */
		     , 'T'              			/* 등록위치구분코드 */
		     , #{ordrYmd}	/* 처방일자 */
		     , #{ordrSno}	/* 처방일련번호 */
		     , 'MDTRTORDT'                 /* 처방테이블명 */
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		)
		]]>
	</insert>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrMcteEqpnIfDltn (처치처방 의료기기인터페이스 수정) 
        Description :                                           처치처방 삭제 시 관련 의료기기인터페이스를 수정(삭제처리)한다.(szd_mdintfm_d01)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrMcteEqpnIfDltn"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrMcteEqpnIfDltn */
		<![CDATA[
		update /*+ szd_mdintfm_d01$U01_처치처방 의료기기인터페이스 수정 DAM */
		       SZINTFMMT
		   set ORDR_STTS_CD = 'N'
		     , CDIS_STTS_CD = decode(CDIS_STTS_CD, '2', '8', '3', '8', '4', '8', '8', '8', '9')
		     , CIS_IMAG_RECV_YN = 'N'
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , LAST_UPDR_ID = #{gvUserId}
		     , LAST_UPDT_IP = #{gvUserIp}
		     , LAST_UPDT_DT = sysdate
		     , LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
		     , LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		 where PTNO	= #{ptno}
		   and trunc(ORDR_DT) = to_date(#{ordrYmd}, 'YYYYMMDD')
		   and ORDR_SNO = #{ordrSno}
		   and EXMN_CD = #{ordrCd}
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertElbdDndpRdtnRomEqpmTmprRgst (전광판 치과방사선실장비 임시 등록) 
        Description :                                           처치처방 등록에따라 전광판 치과방사선실장비 정보를 임시로 등록한다.(mnd_zdisppt_i13)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<insert id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertElbdDndpRdtnRomEqpmTmprRgst"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertElbdDndpRdtnRomEqpmTmprRgst */
		<![CDATA[
		insert /*+ mnd_zdisppt_i13$I01_전광판 치과방사선실장비 TEMP등록 DAM */ 
		  into MNZDISPPT
		  	 (
			     ELBD_SNO
		     , ELBD_NO                   /* 전광판번호 */
		     , MCCN_CD                   /* 진료센터코드 */
		     , DPRT_CD                   /* 부서코드 */
		     , DPRT_NM                   /* 부서명 */
		     , MDDR_ID                   /* 진료의사ID */
		     , MDDR_NM                   /* 진료의사명 */
		     , PTNO                      /* 환자번호 */
		     , PTNT_NM                   /* 환자명 */
		     , MDRP_NO                   /* 진료접수번호 */
		     , APNT_DT                   /* 예약일시 */
		     , ELBD_EXCF_CD              /* 전광판검사분류코드 */
		     , PTNT_MEMO_CTN             /* 환자메모내용 */
		     , RPTN_DT                   /* 접수일시 */
		     , ELBD_CNTO_PRGM_DSSC_CD    /* 전광판컨트롤프로그램표시영역코드 */
		     , ELBD_DSPL_ROOM_NM         /* 전광판표시방명 */
		     , MDCR_ENRM_DVSN_CD         /* 진료입실구분코드 */
		     , APNT_TYPE_CD              /* 예약유형코드 */
		     , WAIT_NO                   /* 대기번호 */
		     , AMPM_DVSN_CD              /* 오전오후구분코드 */
		     , RSRV_YN                   /* 보류여부 */
		     , RGST_LCDV_CD              /* 등록위치구분코드 */
		     , ORDR_YMD                  /* 처방일자 */
		     , ORDR_SNO                  /* 처방일련번호 */
		     , ORTA_NM                   /* 처방테이블명 */
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , FRST_RGSR_ID
		     , FRST_RGST_IP
		     , FRST_RGST_DT
		     , FRST_RGST_CLNT_PRGM_ID
		     , FRST_RGST_SRVR_PRGM_ID
		     , LAST_UPDR_ID
		     , LAST_UPDT_IP
		     , LAST_UPDT_DT
		     , LAST_UPDT_CLNT_PRGM_ID
		     , LAST_UPDT_SRVR_PRGM_ID
		 	   )
		values
			   (
			     MNZDISPPTQ.nextval
		     , 'RTEMP' /* 전광판번호 */
		     , 'RTEMP' /* 진료센터코드 */
		     , 'RTEMP' /* 부서코드 */
		     , 'RTEMP' /* 부서명 */
		     , '000000'   /* 진료의사ID */
		     , '000'      /* 진료의사명 */
		     , #{ptno}    /* 환자번호 */
		     , ( select PTNT_NM 
		           from APPTPTNTT 
		          where PTNO = #{ptno} )	/* 환자명 */
		     , #{mdrpNo}	/* 진료접수번호 */
		     , sysdate    /* 예약일시 */
		     , 'DEN'      /* 전광판검사분류코드 */
		     , #{ordrUnslCtn}  /* 환자메모내용 */
		     , sysdate         /* 접수일시 치과처치는 접수일시 별도관리 안함*/
		     , '00'    				 /* 전광판컨트롤프로그램표시영역코드 */
		     , #{elbdDsplRoomNm} /* 전광판표시방명 */
		     , 'N'         			 /* 진료입실구분코드 */
		     , ''              	 /* 예약유형코드 0:예약환자, 1:예약중 접수환자, 2:당일접수환자 */
		     , null              /* 대기번호 */
		     , 'A'               /* 오전오후구분코드 */
		     , 'N'               /* 보류여부 */
		     , 'T'               /* 등록위치구분코드(B:배치, C:Control프로그램), T:트리거, P:기타 프로그램) */
		     , to_date(#{ordrYmd}, 'yyyymmdd') /* 처방일자 */
		     , #{ordrSno}  /* 처방일련번호 */
		     , 'MDTRTORDT' /* 처방테이블명 */
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		)
		]]>
	</insert>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertElbdDndpRdtnRomEqpmInfm (전광판 치과방사선실장비 정보 등록) 
        Description :                                           처치처방 등록에따라 전광판 치과방사선실장비 정보를 등록한다.(mnd_zdisppt_i12)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<insert id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertElbdDndpRdtnRomEqpmInfm"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-insertElbdDndpRdtnRomEqpmInfm */
		<![CDATA[
		insert /*+ mnd_zdisppt_i12$I01_전광판 치과방사선실장비 정보 등록 DAM */ 
		  into MNZDISPPT
		  	 (
			     ELBD_SNO
		     , ELBD_NO                   /* 전광판번호 */
		     , MCCN_CD                   /* 진료센터코드 */
		     , DPRT_CD                   /* 부서코드 */
		     , DPRT_NM                   /* 부서명 */
		     , MDDR_ID                   /* 진료의사ID */
		     , MDDR_NM                   /* 진료의사명 */
		     , PTNO                      /* 환자번호 */
		     , PTNT_NM                   /* 환자명 */
		     , MDRP_NO                   /* 진료접수번호 */
		     , APNT_DT                   /* 예약일시 */
		     , ELBD_EXCF_CD              /* 전광판검사분류코드 */
		     , PTNT_MEMO_CTN             /* 환자메모내용 */
		     , RPTN_DT                   /* 접수일시 */
		     , ELBD_CNTO_PRGM_DSSC_CD    /* 전광판컨트롤프로그램표시영역코드 */
		     , ELBD_DSPL_ROOM_NM         /* 전광판표시방명 */
		     , MDCR_ENRM_DVSN_CD         /* 진료입실구분코드 */
		     , APNT_TYPE_CD              /* 예약유형코드 */
		     , WAIT_NO                   /* 대기번호 */
		     , AMPM_DVSN_CD              /* 오전오후구분코드 */
		     , RSRV_YN                   /* 보류여부 */
		     , RGST_LCDV_CD              /* 등록위치구분코드 */
		     , ORDR_YMD                  /* 처방일자 */
		     , ORDR_SNO                  /* 처방일련번호 */
		     , ORTA_NM                   /* 처방테이블명 */
		     /*  서버 프로그램 전환시 자동 추가된 항목 */
		     , FRST_RGSR_ID
		     , FRST_RGST_IP
		     , FRST_RGST_DT
		     , FRST_RGST_CLNT_PRGM_ID
		     , FRST_RGST_SRVR_PRGM_ID
		     , LAST_UPDR_ID
		     , LAST_UPDT_IP
		     , LAST_UPDT_DT
		     , LAST_UPDT_CLNT_PRGM_ID
		     , LAST_UPDT_SRVR_PRGM_ID
		 	 )
		values
			 (
		   		 MNZDISPPTQ.nextval
		     , #{elbdNo} /* 전광판번호 */
		     , #{mccnCd} /* 진료센터코드 */
		     , #{dprtCd} /* 부서코드 */
		     , #{dprtNm} /* 부서명 */
		     , '000000'  /* 진료의사ID */
		     , '000'     /* 진료의사명 */
		     , #{ptno}   /* 환자번호 */
		     , ( select PTNT_NM 
		           from APPTPTNTT 
		          where PTNO = #{ptno} )	/* 환자명 */
		     , #{mdrpNo}	/* 진료접수번호 */
		     , sysdate    /* 예약일시 */
		     , 'DEN'      /* 전광판검사분류코드 */
		     , decode(substr(#{ordrUnslCtn}, 1,4), '응급', '(응급)', '') 		/* 환자메모내용 */
		     , sysdate    /* 접수일시 치과처치는 접수일시 별도관리 안함*/
		     , '00'    		/* 전광판컨트롤프로그램표시영역코드 */
		     , #{elbdDsplRoomNm} /* 전광판표시방명 */
		     , 'N'         			 /* 진료입실구분코드 */
		     , ''              	 /* 예약유형코드 0:예약환자, 1:예약중 접수환자, 2:당일접수환자 */
		     , null              /* 대기번호 */
		     , 'A'               /* 오전오후구분코드 */
		     , 'N'               /* 보류여부 */
		     , 'T'               /* 등록위치구분코드(B:배치, C:Control프로그램), T:트리거, P:기타 프로그램) */
		     , to_date(#{ordrYmd}, 'yyyymmdd')	/* 처방일자 */
		     , null						   /* 처방일련번호 */
		     , 'MDTRTORDT'       /* 처방테이블명 */
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		     , #{gvUserId}
		     , #{gvUserIp}
		     , sysdate
		     , #{gvClntPrgmId}
		     , #{gvSrvrPrgmId}
		)
		]]>
	</insert>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrMcteEqpnIf (처치처방 의료기기 인터페이스 수정) 
        Description :                                           처치처방 수정 시 관련 의료기기인터페이스를 수정한다.(szd_mdintfm_u01)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrMcteEqpnIf"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrMcteEqpnIf */
		<![CDATA[
		update /*+ szd_mdintfm_u01$I01_처치처방 의료기기인터페이스 수정 DAM */
		 	 	   SZINTFMMT
		   set SPCM_NO = 'D1'
		     , RPTN_DT = sysdate
		     , ORDR_STTS_CD = 'y'
		     , CDIS_STTS_CD = decode(CDIS_STTS_CD, '2', '8', '3', '8', '4', '8', '8', '8', '9')
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , LAST_UPDR_ID = #{gvUserId}
		     , LAST_UPDT_IP = #{gvUserIp}
		     , LAST_UPDT_DT = sysdate
		     , LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
		     , LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		 where PTNO = #{ptno}
		   and to_date(ORDR_DT, 'YYYYMMDD')  = to_date(#{ordrYmd}, 'yyyymmdd')
		   and ORDR_SNO = #{ordrSno}
		   and EXMN_CD  = #{ordrCd}
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateObsElbdInfm (전광판 OBS장비 정보 수정) 
        Description :                                           처방정보를 전광판 환자메모내용에 추가한다.(mnd_zdisppt_u67)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateObsElbdInfm"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateObsElbdInfm */
		<![CDATA[
		update /*+ mnd_zdisppt_u67$I01_전광판 OBS장비 정보 수정 DAM */
			 	   MNZDISPPT
		   set PTNT_MEMO_CTN   = '(' || #{ordrCd} || ')' ||
		                 ( select
					             		ORDR_NM
					               from MDORDRCMT x
					              where ORDR_CD = #{ordrCd} )
		     , RGST_LCDV_CD  = 'T'
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , LAST_UPDR_ID = #{gvUserId}
		     , LAST_UPDT_IP = #{gvUserIp}
		     , LAST_UPDT_DT = sysdate
		     , LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
		     , LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		 where PTNO     = #{ptno}
		   and ORDR_YMD = #{ordrYmd}
		   and ORDR_SNO = #{ordrSno}
		   and ORTA_NM  = 'MDTRTORDT'
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrElbdPtntMemo (처치처방 전광판 환자메모내용 수정) 
        Description :                                           처방정보수정에 따라 전광판 환자메모내용, 보류여뷰를 수정한다.(mnd_zdisppt_u69)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrElbdPtntMemo"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateTxOrdrElbdPtntMemo */
		<![CDATA[
		update /*+ mnd_zdisppt_u69$I01_처치처방 전광판정보 수정 DAM */
		 	     MNZDISPPT
		   set
		  		 PTNT_MEMO_CTN = decode(#{ordrUnslCtn} , 'X', PTNT_MEMO_CTN, #{ordrUnslCtn})
		  	 , RSRV_YN 		 = decode(#{dcDvsnCd}, 'X', RSRV_YN, #{dcDvsnCd})
		  		/* 서버 프로그램 전환시 자동 추가된 항목 */
		     , LAST_UPDR_ID = #{gvUserId}
		     , LAST_UPDT_IP = #{gvUserIp}
		     , LAST_UPDT_DT = sysdate
		     , LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
		     , LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		 where PTNO      = #{ptno}
		   and ORDR_YMD  = to_date(#{ordrYmd}, 'YYYYMMDD')
		   and ORDR_SNO  = #{ordrSno}
		   and ORTA_NM   = 'MDTRTORDT'
		   and ELBD_NO   = 'RTEMP'
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateDndpRdtnRomElbdPtntMemo (전광판 치과방사선실장비 정보 수정) 
        Description :                                           처방정보를 치과방사선실 전광판 환자메모내용에 추가한다.(mnd_zdisppt_u68)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateDndpRdtnRomElbdPtntMemo"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateDndpRdtnRomElbdPtntMemo */
		<![CDATA[
		update /*+ mnd_zdisppt_u68$I01_전광판 치과방사선실장비 정보 수정 DAM */
			     MNZDISPPT
		   set
		 		   PTNT_MEMO_CTN = #{ordrUnslCtn}
		 		/* 서버 프로그램 전환시 자동 추가된 항목 */
		 		 , LAST_UPDR_ID = #{gvUserId}
		     , LAST_UPDT_IP = #{gvUserIp}
		     , LAST_UPDT_DT = sysdate
		     , LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
		     , LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		 where PTNO      = #{ptno}
		   and ORDR_YMD  = to_date(#{ordrYmd}, 'YYYYMMDD')
		   and ORDR_SNO  = #{ordrSno}
		   and ORTA_NM   = 'MDTRTORDT'
		   and DPRT_CD   = 'RDENT'
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateOtptTxOrdrActnPlacPrrnYmd (외래 처치처방액팅 장소 예정일자 수정) 
        Description :                                           처치처방의 수정에 따라 외래 처치처방액팅 장소, 예정일자를 수정한다.(mnd_ioutact_u02)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<update id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateOtptTxOrdrActnPlacPrrnYmd"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-updateOtptTxOrdrActnPlacPrrnYmd */
		<![CDATA[
		update /*+ mnd_ioutact_u02$I01_외래 처치처방액팅 장소 예정일자 수정 DAM */
		       MNIOUTACT
		   set
		   	   IJAC_APNT_YMD 	  = to_date(#{enfrPrrnYmd}, 'yyyymmdd') 	/* 주사액팅예약일자 */
		     , PTNT_INFT_PLAC_CD = #{frnsDprtCd}			/* 불출부서코드 */
		     /* 서버 프로그램 전환시 자동 추가된 항목 */
		     , LAST_UPDR_ID = #{gvUserId}
		     , LAST_UPDT_IP = #{gvUserIp}
		     , LAST_UPDT_DT = sysdate
		     , LAST_UPDT_CLNT_PRGM_ID = #{gvClntPrgmId}
		     , LAST_UPDT_SRVR_PRGM_ID = #{gvSrvrPrgmId}
		 where PTNO	 = #{ptno}        /* 환자번호 */
		   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd') /* 처방일자 */
		   and ORDR_SNO = #{ordrSno}  /* 처방일련번호 */
		   and MCDP_CD	= #{mcdpCd}		/* 진료과코드	*/
		   and ORCL_CD = #{orclCd}
		]]>
	</update>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-deleteDndpRdtnTxOrdrElbd (치과방사선 처치처방 전광판 DATA 삭제) 
        Description :                                           처치처방 삭제에따라 치과방사선 처치처방 전광판 DATA를 함께 삭제한다.(mnd_zdisppt_d17)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<delete id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-deleteDndpRdtnTxOrdrElbd"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-deleteDndpRdtnTxOrdrElbd */
		<![CDATA[
		delete /*+ mnd_zdisppt_d17$I01_치과방사선 처치처방 전광판 DATA 삭제 DAM */
		  from MNZDISPPT
		 where PTNO	= #{ptno}
		   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		   and ORDR_SNO = #{ordrSno}
		   and DPRT_CD  = 'RDENT'
		]]>
	</delete>




    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-deleteTxOrdrElbd (처치처방 전광판 삭제) 
        Description :                                           처치처방 전광판 삭제(mnd_zdisppt_d16)
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
    -->	
	<delete id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-deleteTxOrdrElbd"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  >
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-deleteTxOrdrElbd */
		<![CDATA[
		delete /*+ mnd_zdisppt_d16$I01_처치처방 전광판 DATA 삭제 DAM */
		  from MNZDISPPT
		 where PTNO = #{ptno}
		   and ORDR_YMD = to_date(#{ordrYmd}, 'yyyymmdd')
		   and ORDR_SNO = #{ordrSno}
		   and ORTA_NM  = 'MDTRTORDT'
		]]>
	</delete>


	<resultMap id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrDual-result" type="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO">
	
		<result property="dvsnCd" column="DVSN_CD"/>
		<result property="odkiCd" column="ODKI_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrDual (DVO Parameter 를 유지하기 위한 DUAL SELECT) 
        Description :                                           DVO Parameter 를 유지하기 위한 DUAL SELECT
                                            
		parameterType : com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO
		resultMap : com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrDual-result
    -->
	<select id="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrDual"  parameterType="com.sds.healthcare.ehr.med.mn.mnm.vo.MnmTxOrdrIfInfmMngmDVO"  resultMap="com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrDual-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-mn-mnm-dao-MnmTxOrdrIfInfmMngmDAO-selectOneTxOrdrDual */
		<![CDATA[
		select  '' as DVSN_CD
		        ,  '' as ODKI_CD
		        , '' as ORDR_CLTY_Cd
		from dual
		]]>
	</select>



</mapper>