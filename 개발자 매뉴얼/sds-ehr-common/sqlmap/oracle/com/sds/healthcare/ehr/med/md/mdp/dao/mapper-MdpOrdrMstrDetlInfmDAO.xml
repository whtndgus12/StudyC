<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--
    SQL File Name : mapper_MdpOrdrMstrDetlInfmDAO_sql.xml 
    Description : -->
<mapper namespace="MdpOrdrMstrDetlInfmDAO">


	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrDetlInfmDual-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="lwrnOrdrSno" column="LWRN_ORDR_SNO"/>
		<result property="lwrnOrdrCd" column="LWRN_ORDR_CD"/>
		<result property="detlIdctCtn" column="DETL_IDCT_CTN"/>
		<result property="lwrnOrdrGrpYn" column="LWRN_ORDR_GRP_YN"/>
		<result property="lwrnOrdrGrpNm" column="LWRN_ORDR_GRP_NM"/>
		<result property="lwrnOrdrCltyCd" column="LWRN_ORDR_CLTY_CD"/>
		<result property="cnntOrdrBndlNo" column="CNNT_ORDR_BNDL_NO"/>
		<result property="bsisOrdrVrsnVl" column="BSIS_ORDR_VRSN_VL"/>
		<result property="bsisOrdrIdctEndYn" column="BSIS_ORDR_IDCT_END_YN"/>
		<result property="bsisOrdrAplyPlacCd" column="BSIS_ORDR_APLY_PLAC_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrDetlInfmDual () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrDetlInfmDual-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrDetlInfmDual"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrDetlInfmDual-result" useCache="true" flushCache="false">
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrDetlInfmDual */
		       '' AS LWRN_ORDR_SNO
		     , '' AS LWRN_ORDR_CD
		     , '' AS DETL_IDCT_CTN
		     , '' AS LWRN_ORDR_GRP_YN
		     , '' AS LWRN_ORDR_GRP_NM
		     , '' AS LWRN_ORDR_CLTY_CD
		     , 0 AS CNNT_ORDR_BNDL_NO
		     , '' AS BSIS_ORDR_VRSN_VL
		     , '' AS BSIS_ORDR_IDCT_END_YN
		     , '' AS BSIS_ORDR_APLY_PLAC_CD
		from dual
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDrugCdInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="invnPcunCd" column="INVN_PCUN_CD"/>
		<result property="pcunInlsQty" column="PCUN_INLS_QTY"/>
		<result property="bsisIcunCd" column="BSIS_ICUN_CD"/>
		<result property="icunCd" column="ICUN_CD"/>
		<result property="chldPcunIcqyVl" column="CHLD_PCUN_ICQY_VL"/>
		<result property="chldIcunCd" column="CHLD_ICUN_CD"/>
		<result property="mdprClsfCd" column="MDPR_CLSF_CD"/>
		<result property="drapDvsnCd" column="DRAP_DVSN_CD"/>
		<result property="dgfrCd" column="DGFR_CD"/>
		<result property="megrCd" column="MEGR_CD"/>
		<result property="drusCd" column="DRUS_CD"/>
		<result property="antbYn" column="ANTB_YN"/>
		<result property="ihohDvsnCd" column="IHOH_DVSN_CD"/>
		<result property="sdpfExreCd" column="SDPF_EXRE_CD"/>
		<result property="tims1TotlQtyYn" column="TIMS1_TOTL_QTY_YN"/>
		<result property="pwdrDslwYn" column="PWDR_DSLW_YN"/>
		<result property="dys1CeckQty" column="DYS1_CECK_QTY"/>
		<result property="sameDgfrMnmmInlsQty" column="SAME_DGFR_MNMM_INLS_QTY"/>
		<result property="sameDgfrMxmmInlsQty" column="SAME_DGFR_MXMM_INLS_QTY"/>
		<result property="kitMdprDdcn" column="KIT_MDPR_DDCN"/>
		<result property="ststDvsnCd" column="STST_DVSN_CD"/>
		<result property="clncExamDrugYn" column="CLNC_EXAM_DRUG_YN"/>
		<result property="bsisNtm" column="BSIS_NTM"/>
		<result property="mdprOrlmAgeDdcn" column="MDPR_ORLM_AGE_DDCN"/>
		<result property="prtnDlflYn" column="PRTN_DLFL_YN"/>
		<result property="ingrMnmmCd" column="INGR_MNMM_CD"/>
		<result property="afiPgwmTaboIngrNm" column="AFI_PGWM_TABO_INGR_NM"/>
		<result property="afiFdaClsfCtn" column="AFI_FDA_CLSF_CTN"/>
		<result property="afiKfdaClsfCtn" column="AFI_KFDA_CLSF_CTN"/>
		<result property="insrIpdvCd" column="INSR_IPDV_CD"/>
		<result property="prtcIpdvCd" column="PRTC_IPDV_CD"/>
		<result property="incsIpdvCd" column="INCS_IPDV_CD"/>
		<result property="tainIpdvCd" column="TAIN_IPDV_CD"/>
		<result property="mdfeItdvCd" column="MDFE_ITDV_CD"/>
		<result property="mdprUicmTaboCd" column="MDPR_UICM_TABO_CD"/>
		<result property="insrEdiCd" column="INSR_EDI_CD"/>
		<result property="frnsCtrlDvsnCd" column="FRNS_CTRL_DVSN_CD"/>
		<result property="mdprIngrCd" column="MDPR_INGR_CD"/>
		<result property="afiKfdaPrmsNnpyDgmtYn" column="AFI_KFDA_PRMS_NNPY_DGMT_YN"/>
		<result property="afiRcmnDrusCdVl" column="AFI_RCMN_DRUS_CD_VL"/>
		<result property="afiAntbClsfNm" column="AFI_ANTB_CLSF_NM"/>
		<result property="afiAditMcdpDvsnNm" column="AFI_ADIT_MCDP_DVSN_NM"/>
		<result property="tkngInvlDdcn" column="TKNG_INVL_DDCN"/>
		<result property="antcThrpMngmDvsnCd" column="ANTC_THRP_MNGM_DVSN_CD"/>
		<result property="inhsFrstAdmnDgstYn" column="INHS_FRST_ADMN_DGST_YN"/>
		<result property="orlmVlm" column="ORLM_VLM"/>
		<result property="acgrCd" column="ACGR_CD"/>
		<result property="afiOrdrPrtInsrCtn" column="AFI_ORDR_PRT_INSR_CTN"/>
		<result property="fludOrdrYn" column="FLUD_ORDR_YN"/>
		<result property="efccLrclCd" column="EFCC_LRCL_CD"/>
		<result property="efccMdcsCd" column="EFCC_MDCS_CD"/>
		<result property="otptPhrmInjtYn" column="OTPT_PHRM_INJT_YN"/>
		<result property="dgmtRgstTypeCd" column="DGMT_RGST_TYPE_CD"/>
		<result property="injtMixCmmdDvsnCd" column="INJT_MIX_CMMD_DVSN_CD"/>
		<result property="prchDgprDvsnCd" column="PRCH_DGPR_DVSN_CD"/>
		<result property="casbCtn1" column="CASB_CTN_1"/>
		<result property="casbCtn2" column="CASB_CTN_2"/>
		<result property="injtSterCmmdYn" column="INJT_STER_CMMD_YN"/>
		<result property="durvPwdrDslwYn" column="DURV_PWDR_DSLW_YN"/>
		<result property="civVlm" column="CIV_VLM"/>
		<result property="civTrgtYn" column="CIV_TRGT_YN"/>
		<result property="rpmdId" column="RPMD_ID"/>
		<result property="ingrId" column="INGR_ID"/>
		<result property="hgrsMdprResnCd" column="HGRS_MDPR_RESN_CD"/>
		<result property="hgccMdprResnCd" column="HGCC_MDPR_RESN_CD"/>
		<result property="totlQtyClclYn" column="TOTL_QTY_CLCL_YN"/>
		<result property="icqyCnvsVl" column="ICQY_CNVS_VL"/>
		<result property="cqy" column="CQY"/>
		<result property="useBgnnYmd" column="USE_BGNN_YMD"/>
		<result property="diusYmd" column="DIUS_YMD"/>
		<result property="pwdijYn" column="PWDIJ_YN"/>
		<result property="tkmdCatnLablCd" column="TKMD_CATN_LABL_CD"/>
		<result property="rcmnDrusUseYn" column="RCMN_DRUS_USE_YN"/>
		<result property="vlmInptLmttCd" column="VLM_INPT_LMTT_CD"/>
		<result property="mdprClsfDetlCd" column="MDPR_CLSF_DETL_CD"/>
		<result property="rareMdprYn" column="RARE_MDPR_YN"/>
		<result property="acdgRprsPdctNm" column="ACDG_RPRS_PDCT_NM"/>
		<result property="drugDlvyDprtCd" column="DRUG_DLVY_DPRT_CD"/>
		<result property="mixRprsPdctCd" column="MIX_RPRS_PDCT_CD"/>
		<result property="cyclOrdrYn" column="CYCL_ORDR_YN"/>
		<result property="cyclOrdrDdcn" column="CYCL_ORDR_DDCN"/>
		<result property="ddLmttQty" column="DD_LMTT_QTY"/>
		<result property="ddLmttQtyInptDslwYn" column="DD_LMTT_QTY_INPT_DSLW_YN"/>
		<result property="ingrDetlCtn" column="INGR_DETL_CTN"/>
		<result property="insrAcknBaseCeckYn" column="INSR_ACKN_BASE_CECK_YN"/>
		<result property="prnPsblYn" column="PRN_PSBL_YN"/>
		<result property="ordrBsisIpdvCd" column="ORDR_BSIS_IPDV_CD"/>
		<result property="inslDvsnCd" column="INSL_DVSN_CD"/>
		<result property="ingrNm" column="INGR_NM"/>
		<result property="hiraDrugMainIngrCd" column="HIRA_DRUG_MAIN_INGR_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDrugCdInqr () 
        Description :                                           약품코드 상세조회
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDrugCdInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDrugCdInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDrugCdInqr-result" useCache="true" flushCache="false">
		<![CDATA[
		select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDrugCdInqr */
		        SAVE_DVSN_CD as SAVE_DVSN_CD
		     ,  ORDR_CD as ORDR_CD                                                            /*  처방코드  */
		     ,  ORDR_NM as ORDR_NM                                                          /*  처방명  */
		     ,  ORCL_CD as ORCL_CD                                                             /*  처방분류코드  */
		     ,  ORDR_CLTY_CD as ORDR_CLTY_CD                                            /*  처방분류유형코드 */
		     ,  SLIP_CD as SLIP_CD                                                                /*  SLIP코드 */
		     ,  ORDR_PSBL_DVSN_CD as ORDR_PSBL_DVSN_CD                         /*  처방가능구분코드 */
		     ,  INVN_PCUN_CD as INVN_PCUN_CD                                           /*  재고포장단위코드 */
		     ,  PCUN_INLS_QTY as PCUN_INLS_QTY                                          /*  포장단위포함량  */
		     ,  BSIS_ICUN_CD  as BSIS_ICUN_CD     /* 기본함량단위 => 처방마스터의 기준값 */		
		     ,  ICUN_CD as ICUN_CD                /*  함량단위코드 => 약처방 테이블에 입력될 값으로 기본함량단위가 입력되거나 소아함량단위가 입력될 수 있음.  */
		     ,  CHLD_PCUN_ICQY_VL			/* 소아포장단위함량값			*/
			 ,  CHLD_ICUN_CD				/* 소아함량단위코드			*/
		     ,  MDPR_CLSF_CD as MDPR_CLSF_CD                                           /*  약품분류코드  */
		     ,  DRAP_DVSN_CD as DRAP_DVSN_CD                                          /*  약적용구분코드  */
		     ,  DGFR_CD as DGFR_CD                                                             /*  제형코드 */
		     ,  MEGR_CD as MEGR_CD                                                            /*  약효군코드  */
		     ,  DRUS_CD as DRUS_CD                                                             /*  용법코드  */
		     ,  ANTB_YN as ANTB_YN                                                              /*  항생제여부 */
		     ,  IHOH_DVSN_CD as IHOH_DVSN_CD                                           /*  원내원외구분코드 */
		     ,  SDPF_EXRE_CD as SDPF_EXRE_CD                                               /*  의약분업예외사유코드  */
		     ,  TIMS1_TOTL_QTY_YN as TIMS1_TOTL_QTY_YN                               /*  1회총량여부  */
		     ,  PWDR_DSLW_YN as PWDR_DSLW_YN                                         /*  산제불가여부  */
		     ,  DYS1_CECK_QTY as DYS1_CECK_QTY                                          /*  1일체크량  */
		     ,  SAME_DGFR_MNMM_INLS_QTY as SAME_DGFR_MNMM_INLS_QTY  /*  동일제형최소포함량  */
		     ,  SAME_DGFR_MXMM_INLS_QTY as SAME_DGFR_MXMM_INLS_QTY   /*  동일제형최대포함량  */
		     ,  KIT_MDPR_DDCN as KIT_MDPR_DDCN                                        /*  키트약품일수  */
		     ,  STST_DVSN_CD as STST_DVSN_CD                                            /*  통계구분코드  */
		     ,  CLNC_EXAM_DRUG_YN as CLNC_EXAM_DRUG_YN                        /*  임상시험약여부  */
		     ,  BSIS_NTM as BSIS_NTM                                                            /*  기본횟수  */
		     ,  MDPR_ORLM_AGE_DDCN as MDPR_ORLM_AGE_DDCN                  /*  약품처방제한연령일수  */
		     ,  PRTN_DLFL_YN as PRTN_DLFL_YN                                               /*  복막투석액여부  */
		     ,  INGR_MNMM_CD as INGR_MNMM_CD                                        /*  성분최소코드  */
		     ,  AFI_PGWM_TABO_INGR_NM as AFI_PGWM_TABO_INGR_NM            /*  임부금기- 성분명  */
		     ,  AFI_FDA_CLSF_CTN as AFI_FDA_CLSF_CTN                                   /*  임부금기- FDA CATEGORY  */
		     ,  AFI_KFDA_CLSF_CTN as AFI_KFDA_CLSF_CTN                               /*  임부금기- KFDA CATEGORY  */
		     ,  INSR_IPDV_CD as INSR_IPDV_CD                                               /*  보험급여구분(AI041)  */
		     ,  PRTC_IPDV_CD as PRTC_IPDV_CD                                              /*  보호급여구분(AI041)  */
		     ,  INCS_IPDV_CD as INCS_IPDV_CD                                               /*  산재급여구분(AI041)  */
		     ,  TAIN_IPDV_CD as TAIN_IPDV_CD                                                /*  자보급여구분(AI041)  */
		     ,  MDFE_ITDV_CD as MDFE_ITDV_CD                                             /*  수가입력구분(AI046):처치,재료필수입력구분  */
		     ,  MDPR_UICM_TABO_CD as MDPR_UICM_TABO_CD                        /*  약품병용금기코드  */
		     ,  INSR_EDI_CD as INSR_EDI_CD
		     ,  FRNS_CTRL_DVSN_CD as FRNS_CTRL_DVSN_CD                           /*  불출제어 FLAG(SD800)  */
		     ,  HIRA_MAIN_INGR_CD as MDPR_INGR_CD                                    /*  약품성분코드  */
		     ,  AFI_KFDA_PRMS_NNPY_DGMT_YN as AFI_KFDA_PRMS_NNPY_DGMT_YN   /*  식약청허가초과비급여사용승인약제(처방가능범위)) */
		     ,  AFI_RCMN_DRUS_CD_VL as AFI_RCMN_DRUS_CD_VL                     /*  추천용법코드  */
		     ,  AFI_ANTB_CLSF_NM as AFI_ANTB_CLSF_NM                                 /*  예방적항생제구분정보  */
		     ,  AFI_ADIT_MCDP_DVSN_NM as AFI_ADIT_MCDP_DVSN_NM            /*  가산진료과구분명  */
		     ,  TKNG_INVL_DDCN as TKNG_INVL_DDCN                                     /*  복용간격일수  */
		     ,  ANTC_THRP_MNGM_DVSN_CD as ANTC_THRP_MNGM_DVSN_CD   /*  항암요법관리구분코드  */
		     ,  INHS_FRST_ADMN_DGST_YN as INHS_FRST_ADMN_DGST_YN         /*  원내최초투여약물여부  */
		     ,  ORLM_VLM as ORLM_VLM                                                        /*  처방제한용량. rule 에서 사용  */
		     ,  ACGR_CD as ACGR_CD                                                             /*  항암제그룹코드  */
		     ,  AFI_ORDR_PRT_INSR_CTN as AFI_ORDR_PRT_INSR_CTN                   /*  일부보험  */
		     ,  FLUD_ORDR_YN as FLUD_ORDR_YN                                            /*  수액처방여부  */
		     ,  EFCC_LRCL_CD as EFCC_LRCL_CD                                               /*  효능대분류  */
		     ,  EFCC_MDCS_CD as EFCC_MDCS_CD                                           /*  효능중분류  */
		     ,  OTPT_PHRM_INJT_YN as OTPT_PHRM_INJT_YN                              /*  외래약국주사제여부   */
		     ,  DGMT_RGST_TYPE_CD as DGMT_RGST_TYPE_CD                           /*  약제등록유형코드  */
		     ,  INJT_MIX_CMMD_DVSN_CD as INJT_MIX_CMMD_DVSN_CD          /* 주사제혼합조제구분코드 */
		     ,  PRCH_DGPR_DVSN_CD as PRCH_DGPR_DVSN_CD                  /* 구매제제구분코드 (1-구입약, 2-제제약) */
		     ,  CASB_CTN_1 as CASB_CTN_1                    /* 주의사항내용  */
		     ,  CASB_CTN_2 as CASB_CTN_2                    /* 주의사항내용  */
			 ,  INJT_STER_CMMD_YN			/* 주사제무균조제여부			*/
			 ,  DURV_PWDR_DSLW_YN			/* DUR산제불가여부			*/
			 ,  CIV_VLM					/* CIV용량				*/
			 ,  CIV_TRGT_YN				/* CIV대상여부				*/
			 ,  RPMD_ID					/* 대표약품ID				*/
			 ,  INGR_ID					/* 성분ID					*/
			 ,  HGRS_MDPR_RESN_CD			/* 고위험약품사유코드(SDB_009)	*/
			 ,  HGCC_MDPR_RESN_CD			/* 고주의약품사유코드(SDB_007)	*/
			 ,  TOTL_QTY_CLCL_YN			/* 계산여부				*/
			 ,  ICQY_CNVS_VL				/* 함량환산값				*/
			 ,  CQY						/* 수량					*/
			 ,  USE_BGNN_YMD				/* 사용개시일자				*/
			 ,  DIUS_YMD					/* 불용일자				*/
			 ,  PWDIJ_YN					/* 분말주사제여부(powder)		*/
			 ,  TKMD_CATN_LABL_CD			/* 복약주의라벨코드(SDA_009)	*/
			 ,  RCMN_DRUS_USE_YN			/* 추천용법만사용여부			*/
			 ,  VLM_INPT_LMTT_CD			/* 용량입력제한코드			*/
			 ,  MDPR_CLSF_DETL_CD			/* 약품분류상세코드			*/
			 ,  RARE_MDPR_YN				/* 희귀약품여부				*/
			 ,  ACDG_RPRS_PDCT_NM			/* 항암제대표상품명			*/  
		     ,  DRUG_DLVY_DPRT_CD           /* 약전달부서코드           */
		     ,  MIX_RPRS_PDCT_CD		    /*	Mix용대표상품코드 */
		     ,  CYCL_ORDR_YN                /* 주기처방여부 */
		     ,  CYCL_ORDR_DDCN              /* 주기처방일수 */
		     ,  DD_LMTT_QTY                 /* 1일제한량 */
		     ,  DD_LMTT_QTY_INPT_DSLW_YN    /* 1일제한량입력불가여부 */
		     ,  INGR_DETL_CTN               /* 성분상세내용 */
		     ,  INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
		     ,  PRN_PSBL_YN            /* PRN가능여부 */
		     ,  ORDR_BSIS_IPDV_CD      /* 처방기본급여구분코드 */
		     ,  INSL_DVSN_CD           /* 인슐린구분코드 */
		     ,  INGR_NM                /* 성분명 */
		     ,  HIRA_DRUG_MAIN_INGR_CD /*심평원약주성분코드*/
		  from
		        (
		        select
		               'I' SAVE_DVSN_CD
		             ,  a.ORDR_CD                      /*  처방코드                          */
		             ,  a.ORDR_NM                      /*  처방명                            */
		             ,  a.ORCL_CD                      /*  처방분류코드                      */
		             ,  a.ORDR_CLTY_CD                 /*  처방분류유형코드                  */
		             ,  a.SLIP_CD                      /*  SLIP코드                         */
		             ,  a.ORDR_PSBL_DVSN_CD            /*  처방가능구분코드                  */
		             ,  a.INVN_PCUN_CD                 /*  재고포장단위코드                  */
		             ,  a.PCUN_INLS_QTY                /*  포장단위포함량                    */
		             ,  a.ICUN_CD   as BSIS_ICUN_CD
		             ,  a.ICUN_CD                      /*  함량단위코드                      */
		             ,  a.CHLD_PCUN_ICQY_VL			   /* 소아포장단위함량값			*/
					 ,  a.CHLD_ICUN_CD				   /* 소아함량단위코드			*/
		             ,  a.MDPR_CLSF_CD                 /*  약품분류코드                      */
		             ,  a.DRAP_DVSN_CD                 /*  약적용구분코드                    */
		             ,  a.DGFR_CD                      /*  제형코드                          */
		             ,  a.MEGR_CD                      /*  약효군코드                        */
		             ,  a.DRUS_CD                      /*  용법코드                          */
		             ,  a.ANTB_YN                      /*  항생제여부                        */
		             ,  a.IHOH_DVSN_CD                 /*  원내원외구분코드                  */
		             ,  a.SDPF_EXRE_CD                 /*  의약분업예외사유코드              */
		             ,  a.TIMS1_TOTL_QTY_YN            /*  1회총량여부                       */
		             ,  a.PWDR_DSLW_YN                 /*  산제불가여부                      */
		             ,  a.DYS1_CECK_QTY                /*  1일체크량                         */
		             ,  a.SAME_DGFR_MNMM_INLS_QTY      /*  동일제형최소포함량                */
		             ,  a.SAME_DGFR_MXMM_INLS_QTY      /*  동일제형최대포함량                */
		             ,  a.KIT_MDPR_DDCN                /*  키트약품일수                      */
		             ,  a.STST_DVSN_CD                 /*  통계구분코드                      */
		             ,  a.CLNC_EXAM_DRUG_YN            /*  case when DGMT_RGST_TYPE_CD = '2' then 'Y' end CLNC_EXAM_DRUG_YN 임상시험약여부 */
		             ,  a.BSIS_NTM                     /*  기본횟수                          */
		             ,  a.MDPR_ORLM_AGE_DDCN           /*  약품처방제한연령일수              */
		             ,  a.PRTN_DLFL_YN                 /*  복막투석액여부                    */
		             ,  a.INGR_MNMM_CD                 /*  성분최소코드 */
		             ,  '' AFI_PGWM_TABO_INGR_NM /*,  smcfun.fn_sd_getdrugcmpname_s(a.ORDR_CD) AFI_PGWM_TABO_INGR_NM    임부금기- 성분명 */
		             ,  '' AFI_FDA_CLSF_CTN /*,  smcfun.fn_sd_getfdacategory_s(a.ORDR_CD) AFI_FDA_CLSF_CTN         임부금기- FDA Category */
		             ,  '' AFI_KFDA_CLSF_CTN /*,  smcfun.fn_sd_getkfdacategory_s(a.ORDR_CD) AFI_KFDA_CLSF_CTN       임부금기- KFDA Category */
		             ,  b.INSR_IPDV_CD                 /*  보험급여구분(AI041)            */
		             ,  b.PRTC_IPDV_CD                 /*  보호급여구분(AI041)            */
		             ,  b.INCS_IPDV_CD                 /*  산재급여구분(AI041)            */
		             ,  b.TAIN_IPDV_CD                 /*  자보급여구분(AI041)            */
		             ,  b.MDFE_ITDV_CD                 /*  수가입력구분(AI046):처치,재료필수입력구분 */
		             ,  b.MDPR_UICM_TABO_CD            /*  약품병용금기코드                  */
					 ,  b.INSR_EDI_CD				   /*  보험EDI코드 */
		             ,  d.FRNS_CTRL_DVSN_CD            /*  불출제어 Flag(SD800)           */
		             ,  c.HIRA_MAIN_INGR_CD            /*  약품성분코드                      */
		             /*  fn_mm_insoverfg_s(a.ORDCODE,:IsMeddept,:IsUserid,nvl(:IsOrddate,to_char(sysdate,'yyyymmdd'))) INSOVERFG,
		              * 허가초가 비급여  :2009.7.15   KCY AS IS AIPUNIST TO BE AIETPENRT(식약청허가초과비급여사용승인약제(처방가능범위)) */
		             ,  case when ( select  count ( MDFE_CD )
		                              from  AIETPENRT
		                             where  MDFE_CD = a.ORDR_CD
		                               and  ((MCDP_CD = '******') or (MCDP_CD = #{mcdpCd}))
		                               and  ((MDDR_ID = '******') or (MDDR_ID = #{gvUserId}))
		                               and  CNCL_DT is null
		                               and  to_date( #{ordrYmd},'yyyymmdd') between APST_YMD and APFN_YMD and rownum < 2 ) > 0
		                     then 'Y' else 'N' end AFI_KFDA_PRMS_NNPY_DGMT_YN /*  식약청허가초과비급여사용승인약제(처방가능범위)) */
		             ,  ( select  listagg(aa.DRUS_CD,',') within group(order by rownum) /*  투여경로가 틀린 경우는 추천용법을 보여주지 않는다. */
		                    from  SDARCDRST aa,
		                          SDDMETCDT bb
		                   where  aa.MDPR_CD = a.ORDR_CD
		                     and  aa.DRUS_CD = bb.DRUS_CD
		                     and  bb.DRAP_DVSN_CD = a.DRAP_DVSN_CD  /*  같은 적용코드만 추천용법 가이드 */
		                     and  nvl(bb.LCKN_YN,'X') <> 'Y' ) AFI_RCMN_DRUS_CD_VL /*  추천용법코드 */
		            ,  (
		               select  MDCR_CTRL_CHRC_VL1 || MDCR_CTRL_CHRC_VL2 || MDCR_CTRL_CHRC_VL3 || MDCR_CTRL_CHRC_VL4
		                 from  MZCTRLMMT        /*  진료제어코드 */
		                where  MDCR_CTRL_CD = 'MM965'
		                  and  MDCR_DTLS_CTRL_CD = a.ORDR_CD
		                  and  rownum = 1
		               )  AFI_ANTB_CLSF_NM       /*  예방적항생제구분정보 */
		            ,  ( select  listagg(COMN_ITEM_CHRC_VL,'|') within group(order by rownum)
		                   from  CCCMCDIDT
		                  where  COMN_GRP_CD = 'AI206'
		                    and COMN_DTLS_CD = b.MCDP_ADDV_CD ) AFI_ADIT_MCDP_DVSN_NM /*  가산진료과구분명 */
		            ,  e.TKNG_INVL_DDCN  /*  복용간격일수 */
		            ,  a.ANTC_THRP_MNGM_DVSN_CD /*  항암요법관리구분코드 */
		            /*  원내최초투여약물여부 ( mdd_medordt_s35, mdd_medordt_i10, mdd_medordt_i11, mdd_medordt_i12 )  */
		            ,  case when #{ptno} is not null
		                    then ( select  /*+index(med MDMEDORDT_I10)*/
		                                   case when count(med.PTNO) = 0 then 'Y' end
		                             from  MDMEDORDT med
		                            where  med.PTNO = #{ptno}
		                              and  med.ORDR_CD = a.ORDR_CD
		                              and  med.DC_DVSN_CD in ( 'N','Y') /*  실처방만 발행된 처방임 */
		                              and  nvl( med.ORFR_CD, 'X' ) not in  ( 'P', 'F' )          /*  임시처방 ( PRN, 응급실 1차 제외 ) */
		                              and  rownum = 1 )
		                    end INHS_FRST_ADMN_DGST_YN
		            ,  a.ORLM_VLM                      /*  처방제한용량. rule 에서 사용 */
		            ,  a.ACGR_CD                       /*  항암제그룹코드 */
		            ,  ( select  CTRL_DSCR_CTN
		                   from  MZCTRLMMT
		                  where  MDCR_CTRL_CD = 'MM847'
		                    and  MDCR_DTLS_CTRL_CD = a.ORDR_CD
		                    and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between APST_YMD
		                                                                                   and APFN_YMD) AFI_ORDR_PRT_INSR_CTN /*  일부보험 */
		            ,  a.FLUD_ORDR_YN
		            ,  f.EFCC_LRCL_CD           /*  효능대분류코드 */
		            ,  f.EFCC_MDCS_CD           /*  효능중분류코드 */
		            ,  c.OTPT_PHRM_INJT_YN      /*  외래약국주사제여부 */
		            ,  c.DGMT_RGST_TYPE_CD      /*  약제등록유형코드 */
		            ,  a.INJT_MIX_CMMD_DVSN_CD /* 주사제혼합조제구분코드 */
		            ,  c.PRCH_DGPR_DVSN_CD          /* 구매제제구분코드 (1-구입약, 2-제제약) */
		            ,  FN_MD_GET_DRUG_RISK_INFM(#{ordrCd}, #{ordrYmd}, '2') as CASB_CTN_1   /* 주의사항 내용1 */
		            ,  FN_MD_GET_DRUG_RISK_INFM(#{ordrCd}, #{ordrYmd}, '3') as CASB_CTN_2   /* 주의사항 내용2 */
					,  c.INJT_STER_CMMD_YN			/* 주사제무균조제여부			*/
					,  c.DURV_PWDR_DSLW_YN			/* DUR산제불가여부			*/
					,  c.CIV_VLM					/* CIV용량				*/
					,  c.CIV_TRGT_YN				/* CIV대상여부				*/
					,  c.RPMD_ID					/* 대표약품ID				*/
					,  c.INGR_ID					/* 성분ID					*/
					,  c.HGRS_MDPR_RESN_CD			/* 고위험약품사유코드(SDB_009)	*/
					,  c.HGCC_MDPR_RESN_CD			/* 고주의약품사유코드(SDB_007)	*/
					,  c.TOTL_QTY_CLCL_YN			/* 계산여부				*/
					,  c.ICQY_CNVS_VL				/* 함량환산값				*/
					,  c.CQY						/* 수량					*/
					,  to_char(c.USE_BGNN_YMD, 'yyyymmdd') as USE_BGNN_YMD				/* 사용개시일자				*/
					,  to_char(c.DIUS_YMD, 'yyyymmdd') as DIUS_YMD					/* 불용일자				*/
					,  c.PWDIJ_YN					/* 분말주사제여부(powder)		*/
					,  c.TKMD_CATN_LABL_CD			/* 복약주의라벨코드(SDA_009)	*/
					,  c.RCMN_DRUS_USE_YN			/* 추천용법만사용여부			*/
					,  c.VLM_INPT_LMTT_CD			/* 용량입력제한코드			*/
					,  c.MDPR_CLSF_DETL_CD			/* 약품분류상세코드			*/
					,  c.RARE_MDPR_YN				/* 희귀약품여부				*/
					,  c.ACDG_RPRS_PDCT_NM			/* 항암제대표상품명			*/            
		            ,  (select  DRUG_DLVY_DPRT_CD 
		                  from  SDDMETCDT 
		                 where  DRUS_CD = a.DRUS_CD) as DRUG_DLVY_DPRT_CD  /* 약전달부서코드 */
		            ,  c.MIX_RPRS_PDCT_CD		    /*	Mix용대표상품코드 */
		            ,  c.CYCL_ORDR_YN               /* 주기처방여부 */ 
		            ,  c.CYCL_ORDR_DDCN             /* 주기처방일수 */
		            ,  e.DD_LMTT_QTY                /* 1일제한량 */
		            ,  e.DD_LMTT_QTY_INPT_DSLW_YN   /* 1일제한량입력불가여부 */
		            ,  (select  listAgg(INGR_DETL_ID, '|') within group(order by INGR_DETL_ID) as INGR_DETL_CTN
		                  from  SDRPMDDET
		                 where  RPMD_ID = c.RPMD_ID) as INGR_DETL_CTN
		            ,  a.INSR_ACKN_BASE_CECK_YN as INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
		            ,  case when ( select  count ( MDCR_DTLS_CTRL_CD )
		                             from  MZCTRLMMT
		                            where  MDCR_CTRL_CD = 'MM969'
		                              and  MDCR_DTLS_CTRL_CD = #{ordrCd}
		                              and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between APST_YMD and APFN_YMD
		                              and  MDCR_CTRL_CHRC_VL1 = 'Y') > 0
		                    then 'Y' else 'N' end as PRN_PSBL_YN	/*  PRN 가능 여부*/
		            ,  b.ORDR_BSIS_IPDV_CD as ORDR_BSIS_IPDV_CD	/* 처방기본급여구분코드 */
		            ,  c.INSL_DVSN_CD      as INSL_DVSN_CD     /* 인슐린구분코드 */
		            ,  a.INGR_NM           as INGR_NM /* 성분명 */
		            ,  g.HIRA_DRUG_MAIN_INGR_CD AS HIRA_DRUG_MAIN_INGR_CD /*심평원약주성분코드*/
		         from
		               MDORDRCMT a       /*  처방코드기본 */
		            ,  AIMFMDFET b       /*  수가코드 */
		            ,  SDDDGCDMT c       /*  약품코드 */
		            ,  SDJORDRCT d       /*  약품불출제어 */
		            ,  SDAAUDIFT e       /*  처방감사기준 */
		            ,  SDDGEFFCT f       /*  약품효능 */
		            ,  AIMFEDICT g       /*  EDI코드 */
		        where
		               a.ORDR_CD = #{ordrCd}
		          and  a.ORDR_PSBL_DVSN_CD like #{ordrPsblDvsnCd} || '%'
		          and  a.ORDR_CD = b.MDFE_CD
		          and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between b.APST_YMD and b.APFN_YMD
		          and  b.ORDR_PSBL_YN like #{ordrPsblDvsnCd} || '%'
		          and  a.ORDR_CD = c.MDPR_CD
		          and  c.DGMT_RGST_TYPE_CD <> '3'             /*  지참약이 아닌 약품 */
		          and  a.ORDR_CD = d.MDPR_CD(+)
		          and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between d.APST_YMD(+) and d.APFN_YMD(+)
		          and  a.ORDR_CD = e.MDPR_CD(+)
		          and  a.ORDR_CD = f.MDPR_CD(+)
		          and  f.MDPR_EFCC_SNO(+) = 1       /*  확인 필요 */
				  and  b.EDID_CD = g.EDID_CD(+)
		          and  b.INSR_EDI_CD = g.EDI_CD(+)
				  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between g.APST_YMD(+) and g.APFN_YMD(+)
		       /*  기타약 */
		       union  all
		       select
		              'I' SAVE_DVSN_CD
		            ,  a.ORDR_CD                      /*  처방코드                          */
		            ,  a.ORDR_NM                      /*  처방명                            */
		            ,  a.ORCL_CD                      /*  처방분류코드                      */
		            ,  a.ORDR_CLTY_CD                 /*  처방분류유형코드                  */
		            ,  a.SLIP_CD                      /*  SLIP코드                         */
		            ,  a.ORDR_PSBL_DVSN_CD            /*  처방가능구분코드                  */
		            ,  a.INVN_PCUN_CD                 /*  재고포장단위코드                  */
		            ,  a.PCUN_INLS_QTY                /*  포장단위포함량                    */
		            ,  a.ICUN_CD   as BSIS_ICUN_CD
		            ,  a.ICUN_CD                      /*  함량단위코드                      */
		            ,  a.CHLD_PCUN_ICQY_VL			/* 소아포장단위함량값			*/
					,  a.CHLD_ICUN_CD				/* 소아함량단위코드			*/
		            ,  a.MDPR_CLSF_CD                 /*  약품분류코드                      */
		            ,  case when a.DRAP_DVSN_CD is null then '9'
		                    when a.DRAP_DVSN_CD = '*' then '9'
		                    else a.DRAP_DVSN_CD end   /*  약적용구분코드                    */
		            ,  a.DGFR_CD                      /*  제형코드                          */
		            ,  a.MEGR_CD                      /*  약효군코드                        */
		            ,  a.DRUS_CD                      /*  용법코드                          */
		            ,  a.ANTB_YN                      /*  항생제여부                        */
		            ,  a.IHOH_DVSN_CD                 /*  원내원외구분코드                  */
		            ,  a.SDPF_EXRE_CD                 /*  의약분업예외사유코드              */
		            ,  a.TIMS1_TOTL_QTY_YN            /*  1회총량여부                       */
		            ,  a.PWDR_DSLW_YN                 /*  산제불가여부                      */
		            ,  a.DYS1_CECK_QTY                /*  1일체크량                         */
		            ,  a.SAME_DGFR_MNMM_INLS_QTY      /*  동일제형최소포함량                */
		            ,  a.SAME_DGFR_MXMM_INLS_QTY      /*  동일제형최대포함량                */
		            ,  a.KIT_MDPR_DDCN                /*  키트약품일수                      */
		            ,  a.STST_DVSN_CD                 /*  통계구분코드                      */
		            ,  a.CLNC_EXAM_DRUG_YN            /*  임상시험약여부                    */
		            ,  a.BSIS_NTM                     /*  기본횟수                          */
		            ,  a.MDPR_ORLM_AGE_DDCN           /*  약품처방제한연령일수              */
		            ,  a.PRTN_DLFL_YN                 /*  복막투석액여부                    */
		            ,  a.INGR_MNMM_CD                 /*  성분최소코드                      */
		            ,  null                           /*  임부금기- 성분명                 */
		            ,  null                           /*  임부금기- FDA Category        */
		            ,  null                           /*  임부금기- KFDA Category       */
		            ,  null                           /*  보험급여구분(AI041)            */
		            ,  null                           /*  보호급여구분(AI041)            */
		            ,  null                           /*  산재급여구분(AI041)            */
		            ,  null                           /*  자보급여구분(AI041)            */
		            ,  null                           /*  수가입력구분(AI046):처치,재료필수입력구분 */
		            ,  null                           /*  약품병용금기코드                  */
					,  null							  /*  보험EDI코드                    */
		            ,  null                           /*  불출제어 Flag(SD800)           */
		            ,  null                           /*  약품성분코드                      */
		            ,  null                           /*  식약청허가초과비급여사용승인약제(처방가능범위)) */
		            ,  null                           /*  추천용법코드                     */
		            ,  null                           /*  예방적항생제구분정보              */
		            ,  null                           /*  가산진료과구분명                  */
		            ,  null                           /*  복용간격일수                      */
		            ,  null                           /*  항암요법관리구분코드              */
		            ,  null                           /*  원내최초투여약물여부             */
		            ,  null                           /*  처방제한용량. rule 에서 사용    */
		            ,  null                           /*  항암제그룹코드                   */
		            ,  null                           /*  일부보험                         */
		            ,  a.FLUD_ORDR_YN
		            ,  null                           /*  효능대분류 */
		            ,  null                           /*  효능중분류 */
		            ,  null                           /*  외래약국주사제여부 */
		            ,  c.DGMT_RGST_TYPE_CD            /*  약제등록유형코드 */
		            ,  a.INJT_MIX_CMMD_DVSN_CD /* 주사제혼합조제구분코드 */
		            ,  c.PRCH_DGPR_DVSN_CD            /* 구매제제구분코드 (1-구입약, 2-제제약) */
		            ,  FN_MD_GET_DRUG_RISK_INFM(#{ordrCd}, #{ordrYmd}, '2') as CASB_CTN_1   /* 주의사항 내용1 */
		            ,  FN_MD_GET_DRUG_RISK_INFM(#{ordrCd}, #{ordrYmd}, '3') as CASB_CTN_2   /* 주의사항 내용2 */
					,  c.INJT_STER_CMMD_YN			/* 주사제무균조제여부			*/
					,  c.DURV_PWDR_DSLW_YN			/* DUR산제불가여부			*/
					,  c.CIV_VLM					/* CIV용량				*/
					,  c.CIV_TRGT_YN				/* CIV대상여부				*/
					,  c.RPMD_ID					/* 대표약품ID				*/
					,  c.INGR_ID					/* 성분ID					*/
					,  c.HGRS_MDPR_RESN_CD			/* 고위험약품사유코드(SDB_009)	*/
					,  c.HGCC_MDPR_RESN_CD			/* 고주의약품사유코드(SDB_007)	*/
					,  c.TOTL_QTY_CLCL_YN			/* 계산여부				*/
					,  c.ICQY_CNVS_VL				/* 함량환산값				*/
					,  c.CQY						/* 수량					*/
					,  to_char(c.USE_BGNN_YMD, 'yyyymmdd') as USE_BGNN_YMD				/* 사용개시일자				*/
					,  to_char(c.DIUS_YMD, 'yyyymmdd') as DIUS_YMD					/* 불용일자				*/
					,  c.PWDIJ_YN					/* 분말주사제여부(powder)		*/
					,  c.TKMD_CATN_LABL_CD			/* 복약주의라벨코드(SDA_009)	*/
					,  c.RCMN_DRUS_USE_YN			/* 추천용법만사용여부			*/
					,  c.VLM_INPT_LMTT_CD			/* 용량입력제한코드			*/
					,  c.MDPR_CLSF_DETL_CD			/* 약품분류상세코드			*/
					,  c.RARE_MDPR_YN				/* 희귀약품여부				*/
					,  c.ACDG_RPRS_PDCT_NM			/* 항암제대표상품명			*/                           
		            ,  (select  DRUG_DLVY_DPRT_CD 
		                  from  SDDMETCDT 
		                 where  DRUS_CD = a.DRUS_CD) as DRUG_DLVY_DPRT_CD  /* 약전달부서코드 */
		            ,  c.MIX_RPRS_PDCT_CD		    /*	Mix용대표상품코드 */
		            ,  c.CYCL_ORDR_YN               /* 주기처방여부 */
		            ,  c.CYCL_ORDR_DDCN             /* 주기처방일수 */
		            ,  null  as DD_LMTT_QTY         /* 1일제한량 */
		            ,  null  as DD_LMTT_QTY_INPT_DSLW_YN   /* 1일제한량입력불가여부 */
		            ,  (select  listAgg(INGR_DETL_ID, '|') within group(order by INGR_DETL_ID) as INGR_DETL_CTN
		                  from  SDRPMDDET
		                 where  RPMD_ID = c.RPMD_ID) as INGR_DETL_CTN
		            ,  '' as INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
		            ,  case when ( select  count ( MDCR_DTLS_CTRL_CD )
		                             from  MZCTRLMMT
		                            where  MDCR_CTRL_CD = 'MM969'
		                              and  MDCR_DTLS_CTRL_CD = #{ordrCd}
		                              and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between APST_YMD and APFN_YMD
		                              and  MDCR_CTRL_CHRC_VL1 = 'Y') > 0
		                    then 'Y' else 'N' end as PRN_PSBL_YN	/*  PRN 가능 여부*/
		            ,  null as ORDR_BSIS_IPDV_CD
		            ,  c.INSL_DVSN_CD           /* 인슐린구분코드 */
		            ,  a.INGR_NM           as INGR_NM /* 성분명 */
		            ,  '' as HIRA_DRUG_MAIN_INGR_CD /*심평원약주성분코드*/
		         from  MDORDRCMT a
		            ,  SDDDGCDMT c       /*  약품코드 */
		        where  a.ORDR_CD = #{ordrCd}
		          and  c.MDPR_CD      = a.ORDR_CD
		          and  c.DGMT_RGST_TYPE_CD = '3' /*  지참약 */
		          and  a.ORDR_PSBL_DVSN_CD like #{ordrPsblDvsnCd} || '%'
		    )
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrSpcmExmnCdInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="ptptCd" column="PTPT_CD"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="spcmCd1" column="SPCM_CD_1"/>
		<result property="spcmCd2" column="SPCM_CD_2"/>
		<result property="spcmNeedQty1" column="SPCM_NEED_QTY_1"/>
		<result property="spcmNeedQty2" column="SPCM_NEED_QTY_2"/>
		<result property="spcnCd1" column="SPCN_CD_1"/>
		<result property="spcnCd2" column="SPCN_CD_2"/>
		<result property="spcnNeedCot1" column="SPCN_NEED_COT_1"/>
		<result property="excfCd" column="EXCF_CD"/>
		<result property="pctsExmnPsblYn" column="PCTS_EXMN_PSBL_YN"/>
		<result property="blclExmnYn" column="BLCL_EXMN_YN"/>
		<result property="acmpYn" column="ACMP_YN"/>
		<result property="donePsblYn" column="DONE_PSBL_YN"/>
		<result property="afiMdcrBeexPsblYn" column="AFI_MDCR_BEEX_PSBL_YN"/>
		<result property="tdmCdDvsnCd" column="TDM_CD_DVSN_CD"/>
		<result property="phrkExmnCd" column="PHRK_EXMN_CD"/>
		<result property="erExmnPsblYn" column="ER_EXMN_PSBL_YN"/>
		<result property="apntNeedEn" column="APNT_NEED_EN"/>
		<result property="wardApntPsblYn" column="WARD_APNT_PSBL_YN"/>
		<result property="scexAdtnOrdvCd" column="SCEX_ADTN_ORDV_CD"/>
		<result property="otptCareBlclYn" column="OTPT_CARE_BLCL_YN"/>
		<result property="insrIpdvCd" column="INSR_IPDV_CD"/>
		<result property="prtcIpdvCd" column="PRTC_IPDV_CD"/>
		<result property="incsIpdvCd" column="INCS_IPDV_CD"/>
		<result property="tainIpdvCd" column="TAIN_IPDV_CD"/>
		<result property="mdfeItdvCd" column="MDFE_ITDV_CD"/>
		<result property="afiAditMcdpDvsnNm" column="AFI_ADIT_MCDP_DVSN_NM"/>
		<result property="afiExmnPsblSpcmCdCtn" column="AFI_EXMN_PSBL_SPCM_CD_CTN"/>
		<result property="blclSpsbCtn" column="BLCL_SPSB_CTN"/>
		<result property="ordrAgdcNeedYn" column="ORDR_AGDC_NEED_YN"/>
		<result property="ordrInfmDvsnCd" column="ORDR_INFM_DVSN_CD"/>
		<result property="insrEdiCd" column="INSR_EDI_CD"/>
		<result property="agdcNeedEn" column="AGDC_NEED_EN"/>
		<result property="scndOrdrYn" column="SCND_ORDR_YN"/>
		<result property="dxExmnTdmYn" column="DX_EXMN_TDM_YN"/>
		<result property="dgmtTdmYn" column="DGMT_TDM_YN"/>
		<result property="dxExmnCmtxCd" column="DX_EXMN_CMTX_CD"/>
		<result property="dgmtCmtxCd" column="DGMT_CMTX_CD"/>
		<result property="insrAcknBaseCeckYn" column="INSR_ACKN_BASE_CECK_YN"/>
		<result property="prnPsblYn" column="PRN_PSBL_YN"/>
		<result property="ptexLvelDvsnCd" column="PTEX_LVEL_DVSN_CD"/>
		<result property="ordrBsisIpdvCd" column="ORDR_BSIS_IPDV_CD"/>
		<result property="rmrkYn" column="RMRK_YN"/>
		<result property="nghtAditRt" column="NGHT_ADIT_RT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrSpcmExmnCdInqr () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrSpcmExmnCdInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrSpcmExmnCdInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrSpcmExmnCdInqr-result" useCache="true" flushCache="false">
		<![CDATA[
		   select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrSpcmExmnCdInqr */
				   'I'  as SAVE_DVSN_CD
				,  a.ORDR_CD as ORDR_CD                                        /*  처방코드                          */
				,  a.ORDR_NM as ORDR_NM                                        /*  처방명                            */
				,  a.ORCL_CD as ORCL_CD                                        /*  처방분류코드                      */
				,  a.ORDR_CLTY_CD as ORDR_CLTY_CD                                   /*  처방분류유형코드                  */
				,  a.SLIP_CD as SLIP_CD                                        /*  SLIP코드                         */
				,  decode(a.EXCF_CD, 'SL',
						decode(nvl(#{hslcDvsnCd}, 'M'), 'M', a.PTPT_CD, 'C', a.CACN_PTPT_CD),   /*  SL인경우 */
						decode(nvl(#{hslcDvsnCd}, 'M'),
								'M', decode(a.MNHS_EXMN_YN, 'Y', a.PTPT_CD, a.CACN_PTPT_CD),                       /*  SL이 아니고 본원검사여부 Y인 경우 */
								'C', decode(a.CACN_EXMN_YN, 'Y', a.CACN_PTPT_CD, a.PTPT_CD),                       /*  SL이 아니고 암병원검사여부 Y인 경우 */
								a.PTPT_CD                                                                          /*  그 이외 */
							  )
						 ) as PTPT_CD                               /*  환자가야할장소코드             */
				,  a.ORDR_PSBL_DVSN_CD as ORDR_PSBL_DVSN_CD                              /*  처방가능구분코드               */
				,  a.SPCM_CD1 as SPCM_CD_1                                       /*  검체코드1                      */
				,  a.SPCM_CD2 as SPCM_CD_2                                       /*  검체코드2                      */
				,  a.SPCM_NEED_QTY1 as SPCM_NEED_QTY_1                                 /*  검체필요량1                    */
				,  a.SPCM_NEED_QTY2 as SPCM_NEED_QTY_2                                 /*  검체필요량2                    */
				,  a.SPCN_CD1 as SPCN_CD_1                                       /*  검체용기코드1                  */
				,  a.SPCN_CD2 as SPCN_CD_2                                       /*  검체용기코드2                  */
				,  a.SPCN_NEED_COT1 as SPCN_NEED_COT_1                                 /*  검체용기필요개수1              */
				/*EHR_MOD,  a.SPCN_NEED_COT2 as SPCN_NEED_COT2   */                              /*  검체용기필요개수2              */
				,  a.EXCF_CD as EXCF_CD                                        /*  검사분류코드                      */
				,  a.PCTS_EXMN_PSBL_YN as PCTS_EXMN_PSBL_YN                              /*  POCT검사가능여부                 */
				,  a.BLCL_EXMN_YN as BLCL_EXMN_YN                                   /*  채혈검사여부                      */
				,  a.ACMP_YN as ACMP_YN                                        /*  동반여부                          */
				,  a.DONE_PSBL_YN as DONE_PSBL_YN                                   /*  Done가능여부                   */
				,  a.MDCR_BEEX_YN as AFI_MDCR_BEEX_PSBL_YN                    /*  진료이전검사가능여부              */
				,  a.TDM_CD_DVSN_CD as TDM_CD_DVSN_CD                                 /*  TDM코드구분코드                   */
				,  a.PHRK_EXMN_CD as PHRK_EXMN_CD                                   /*  약물동력학검사코드                */
				,  a.ER_EXMN_PSBL_YN as ER_EXMN_PSBL_YN                                /*  응급검사가능여부                  */
				,  a.APNT_NEED_EN as APNT_NEED_EN                                   /*  예약필요유무                      */
				,  a.WARD_APNT_PSBL_YN as WARD_APNT_PSBL_YN                              /*  병동예약가능여부                  */
				,  c.SCEX_ADTN_ORDV_CD as SCEX_ADTN_ORDV_CD                              /*  검체검사추가처방구분코드          */
				,  c.OTPT_CARE_BLCL_YN as OTPT_CARE_BLCL_YN                              /*  외래간호채혈여부                  */
				,  b.INSR_IPDV_CD as INSR_IPDV_CD                                   /*  보험급여구분(AI041)            */
				,  b.PRTC_IPDV_CD as PRTC_IPDV_CD                                   /*  보호급여구분(AI041)            */
				,  b.INCS_IPDV_CD as INCS_IPDV_CD                                   /*  산재급여구분(AI041)            */
				,  b.TAIN_IPDV_CD as TAIN_IPDV_CD                                   /*  자보급여구분(AI041)            */
				,  b.MDFE_ITDV_CD as MDFE_ITDV_CD                                   /*  수가입력구분(AI046):처치,재료필수입력구분 */
				, ( select  listagg(COMN_ITEM_CHRC_VL,'I') within group(order by rownum)
					  from  CCCMCDIDT
					 where  COMN_GRP_CD = 'AI206'
					   and COMN_DTLS_CD = b.MCDP_ADDV_CD ) as AFI_ADIT_MCDP_DVSN_NM /*  가산진료과구분명 */
				,  case when substr ( a.ORDR_CLTY_CD, 0, 1 ) = 'C' and a.EXCF_CD <> 'SP'
						then ( select  listagg(SPCM_CD,',') within group(order by rownum)
								 from  SFCORDSPT
								where  EXMN_CD = a.ORDR_CD )
						 end as AFI_EXMN_PSBL_SPCM_CD_CTN              /*  처방가능검체코드내용 (EXCF_CD <> 'SP') 병리는 제외 */
				,  c.BLCL_SPSB_CTN as BLCL_SPSB_CTN                                  /*  채혈특기사항내용 */
				,  c.ORDR_AGDC_NEED_YN as ORDR_AGDC_NEED_YN                              /*  처방동의서필요여부 -> 확인 필요 */
				,  a.ORDR_INFM_DVSN_CD as ORDR_INFM_DVSN_CD                              /*  처방정보구분코드 */
		        ,  b.INSR_EDI_CD as INSR_EDI_CD                              /* 보험EDI코드 */
		        ,  a.AGDC_NEED_EN as AGDC_NEED_EN                     /* 동의서필요유무 */
		        ,  a.SCND_ORDR_YN as SCND_ORDR_YN
		        ,  c.DX_EXMN_TDM_YN as DX_EXMN_TDM_YN	/* 진단검사TDM여부 */
		        ,  c.DGMT_TDM_YN   as DGMT_TDM_YN				/* 약제TDM여부 */
		        ,  c.DX_EXMN_CMTX_CD as DX_EXMN_CMTX_CD /* 진단검사협진코드 */
		        ,  c.DGMT_CMTX_CD as DGMT_CMTX_CD			/* 약제협진코드 */
		        ,  a.INSR_ACKN_BASE_CECK_YN as INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
		        ,  a.PRN_PSBL_YN
		        ,  a.PTEX_LVEL_DVSN_CD as PTEX_LVEL_DVSN_CD /* 병리검사레벨구분코드 */
		        ,  b.ORDR_BSIS_IPDV_CD as ORDR_BSIS_IPDV_CD /* 처방기본급여구분코드 */
		        ,  a.RMRK_YN	/* 임상소견필수여부 */
		        ,  b.NGHT_ADIT_RT      as NGHT_ADIT_RT      /* 야간가산율  */
			 from
				   MDORDRCMT a
				,  AIMFMDFET b
				,  SFCORDRCT c
			where
				   a.ORDR_CD = #{ordrCd}
			  and  a.ORDR_PSBL_DVSN_CD like #{ordrPsblDvsnCd} || '%'
			  and  a.ORDR_CD = b.MDFE_CD
			  and  b.ORDR_PSBL_YN like #{ordrPsblDvsnCd} || '%'
			  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between b.APST_YMD and b.APFN_YMD
			  and  a.ORDR_CD = c.ORDR_CD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrPtntExmnCdInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="ptptCd" column="PTPT_CD"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="excfCd" column="EXCF_CD"/>
		<result property="acmpYn" column="ACMP_YN"/>
		<result property="afiMdcrBeexPsblYn" column="AFI_MDCR_BEEX_PSBL_YN"/>
		<result property="erExmnPsblYn" column="ER_EXMN_PSBL_YN"/>
		<result property="apntNeedEn" column="APNT_NEED_EN"/>
		<result property="pacsInrfYn" column="PACS_INRF_YN"/>
		<result property="mvmnDvsnCd" column="MVMN_DVSN_CD"/>
		<result property="donePsblYn" column="DONE_PSBL_YN"/>
		<result property="cnmdPrvnAntbTrgtYn" column="CNMD_PRVN_ANTB_TRGT_YN"/>
		<result property="wardApntPsblYn" column="WARD_APNT_PSBL_YN"/>
		<result property="pacsCd" column="PACS_CD"/>
		<result property="pacsCdNm" column="PACS_CD_NM"/>
		<result property="pacsEqpmClsfCd" column="PACS_EQPM_CLSF_CD"/>
		<result property="pacsPhtrDprtClsfCd" column="PACS_PHTR_DPRT_CLSF_CD"/>
		<result property="pacsGrpNm" column="PACS_GRP_NM"/>
		<result property="pacsDetlSiteNm" column="PACS_DETL_SITE_NM"/>
		<result property="wardExrmCd" column="WARD_EXRM_CD"/>
		<result property="slpnPsblYn" column="SLPN_PSBL_YN"/>
		<result property="insrIpdvCd" column="INSR_IPDV_CD"/>
		<result property="prtcIpdvCd" column="PRTC_IPDV_CD"/>
		<result property="incsIpdvCd" column="INCS_IPDV_CD"/>
		<result property="tainIpdvCd" column="TAIN_IPDV_CD"/>
		<result property="mdprUicmTaboCd" column="MDPR_UICM_TABO_CD"/>
		<result property="dxObjcUltsYn" column="DX_OBJC_ULTS_YN"/>
		<result property="mdfeItdvCd" column="MDFE_ITDV_CD"/>
		<result property="insrEdiCd" column="INSR_EDI_CD"/>
		<result property="afiAditMcdpDvsnNm" column="AFI_ADIT_MCDP_DVSN_NM"/>
		<result property="ordrInfmDvsnCd" column="ORDR_INFM_DVSN_CD"/>
		<result property="agdcNeedEn" column="AGDC_NEED_EN"/>
		<result property="dtlsExcfCd" column="DTLS_EXCF_CD"/>
		<result property="chldDvsnCd" column="CHLD_DVSN_CD"/>
		<result property="tissExmnYn" column="TISS_EXMN_YN"/>
		<result property="cisInrfYn" column="CIS_INRF_YN"/>
		<result property="centApntPsblYn" column="CENT_APNT_PSBL_YN"/>
		<result property="ultsClsfCd" column="ULTS_CLSF_CD"/>
		<result property="erMcteAddvCd" column="ER_MCTE_ADDV_CD"/>
		<result property="erMcteAditYn" column="ER_MCTE_ADIT_YN"/>
		<result property="oprtMdfeCdYn" column="OPRT_MDFE_CD_YN"/>
		<result property="insrAcknBaseCeckYn" column="INSR_ACKN_BASE_CECK_YN"/>
		<result property="prnPsblYn" column="PRN_PSBL_YN"/>
		<result property="cnmdDetlCtn" column="CNMD_DETL_CTN"/>
		<result property="ordrBsisIpdvCd" column="ORDR_BSIS_IPDV_CD"/>
		<result property="rmrkYn" column="RMRK_YN"/>
		<result property="nghtAditRt" column="NGHT_ADIT_RT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrPtntExmnCdInqr () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrPtntExmnCdInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrPtntExmnCdInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrPtntExmnCdInqr-result" useCache="true" flushCache="false">
		<![CDATA[
		   select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrPtntExmnCdInqr */
				  'I'  as SAVE_DVSN_CD
				,  a.ORDR_CD as ORDR_CD                        /* 처방코드                        */
				,  a.ORDR_NM as ORDR_NM                      /* 처방명                            */
				,  a.ORCL_CD as ORCL_CD                         /* 처방분류코드                   */
				,  a.ORDR_CLTY_CD as ORDR_CLTY_CD        /* 처방분류유형코드             */
				,  a.SLIP_CD as SLIP_CD                            /* SLIP코드                         */
				,  a.PTPT_CD as PTPT_CD            /*  환자가야할장소코드               */
				,  a.ORDR_PSBL_DVSN_CD as ORDR_PSBL_DVSN_CD            /*  처방가능구분코드                 */
				,  a.EXCF_CD as EXCF_CD                      /*  검사분류코드                     */
				,  a.ACMP_YN as ACMP_YN                      /*  동반여부                         */
				,  a.MDCR_BEEX_YN as AFI_MDCR_BEEX_PSBL_YN /*  진료이전검사가능여부       */
				,  a.ER_EXMN_PSBL_YN as ER_EXMN_PSBL_YN              /*  응급검사가능여부                 */
				,  a.APNT_NEED_EN as APNT_NEED_EN                 /*  예약필요유무                     */
				,  a.PACS_INRF_YN as PACS_INRF_YN                 /*  PACS인터페이스여부               */
				,  a.MVMN_DVSN_CD as MVMN_DVSN_CD                 /*  이동구분코드                     */
				,  a.DONE_PSBL_YN as DONE_PSBL_YN                 /*  Done가능여부                     */
				,  a.CNMD_PRVN_ANTB_TRGT_YN as CNMD_PRVN_ANTB_TRGT_YN       /*  조영제예방항생제대상여부          */
				,  a.WARD_APNT_PSBL_YN as WARD_APNT_PSBL_YN            /*  병동예약가능여부                  */
				,  a.PACS_CD as PACS_CD                      /*  PACS코드                          */
				,  a.PACS_CD_NM as PACS_CD_NM                   /*  PACS코드명                        */
				,  a.PACS_EQPM_CLSF_CD as PACS_EQPM_CLSF_CD            /*  PACS장비분류코드                  */
				,  a.PACS_PHTR_DPRT_CLSF_CD as PACS_PHTR_DPRT_CLSF_CD       /*  PACS촬영부서분류코드              */
				,  a.PACS_GRP_NM as PACS_GRP_NM                  /*  PACS그룹명                        */
				,  a.PACS_DETL_SITE_NM as PACS_DETL_SITE_NM            /*  PACS상세부위명                    */
				,  a.WARD_EXRM_CD as WARD_EXRM_CD                 /*  병동검사실코드                    */
		        ,  a.SLPN_PSBL_YN as SLPN_PSBL_YN
				,  b.INSR_IPDV_CD as INSR_IPDV_CD                 /*  보험급여구분(AI041)            */
				,  b.PRTC_IPDV_CD as PRTC_IPDV_CD                 /*  보호급여구분(AI041)            */
				,  b.INCS_IPDV_CD as INCS_IPDV_CD                 /*  산재급여구분(AI041)            */
				,  b.TAIN_IPDV_CD as TAIN_IPDV_CD                 /*  자보급여구분(AI041)            */
				,  b.MDPR_UICM_TABO_CD as MDPR_UICM_TABO_CD            /*  약품병용금기코드  (1: 조영제포함검사) */
				,  decode(b.DX_OBJC_ULTS_YN||b.INSR_IPDV_CD||b.INSR_BTTY_CD,'Y1K','Y','Y1B', 'Y', 'N') as DX_OBJC_ULTS_YN /*  진단초음파여부 -C13110001898 */
				,  b.MDFE_ITDV_CD as MDFE_ITDV_CD                 /*  수가입력구분(AI046):처치,재료필수입력구분 */
				,  b.INSR_EDI_CD  as INSR_EDI_CD                  /* 보험EDI코드 */
				, ( select  listagg ( COMN_ITEM_CHRC_VL,'I') within group(order by rownum)
					  from  CCCMCDIDT
					 where  COMN_GRP_CD = 'AI206'
					   and COMN_DTLS_CD = b.MCDP_ADDV_CD ) as AFI_ADIT_MCDP_DVSN_NM /*  가산진료과구분명 */
				,  a.ORDR_INFM_DVSN_CD as ORDR_INFM_DVSN_CD       /*  처방정보구분코드 */
				,  a.AGDC_NEED_EN as AGDC_NEED_EN                          /* 동의서필요유무 */
				,  a.DTLS_EXCF_CD as DTLS_EXCF_CD                             /* 세부검사분류코드 */
				,  a.CHLD_DVSN_CD as CHLD_DVSN_CD                        /* 소아구분코드 */
				,  c.TISS_EXMN_YN as TISS_EXMN_YN                             /* 조직검사여부 */
		        ,  a.CIS_INRF_YN as CIS_INRF_YN                                   /* CIS 인터페이스 여부 */
		        ,  a.CENT_APNT_PSBL_YN as CENT_APNT_PSBL_YN           /* 중앙예약가능여부 */ 
		        ,  b.ULTS_CLSF_CD  as ULTS_CLSF_CD                           /* 상복부초음파 구분 */
		        ,  b.ER_MCTE_ADDV_CD as ER_MCTE_ADDV_CD
		        ,  FN_AC_CECK_ER_MCTE_ADDV_YN(#{ordrCd}, to_date(#{ordrYmd}, 'yyyymmdd'), #{codvCd}) as ER_MCTE_ADIT_YN
		        ,  b.OPRT_MDFE_CD_YN as OPRT_MDFE_CD_YN 
		        ,  a.INSR_ACKN_BASE_CECK_YN as INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
		        ,  a.PRN_PSBL_YN
		        ,  FN_MD_GET_CNMD_DETL_CTN(a.ORDR_CD) as CNMD_DETL_CTN
		        ,  b.ORDR_BSIS_IPDV_CD as ORDR_BSIS_IPDV_CD	/* 처방기본급여구분코드 */
		        ,  a.RMRK_YN	/* 임상소견필수여부 */
		        ,  b.NGHT_ADIT_RT      as NGHT_ADIT_RT      /* 야간가산율  */
			 from  MDORDRCMT a
				,  AIMFMDFET b
				,  SWORDRCMT c
			where  a.ORDR_CD = #{ordrCd}
			  and  a.ORDR_PSBL_DVSN_CD like #{ordrPsblDvsnCd} || '%'
			  and  a.ORDR_CD = b.MDFE_CD
			  and  b.ORDR_PSBL_YN like #{ordrPsblDvsnCd} || '%'
			  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between b.APST_YMD and b.APFN_YMD
			  and  a.ORDR_CD = c.ORDR_CD
		]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBlodCdInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="blodMdteDvsnCd" column="BLOD_MDTE_DVSN_CD"/>
		<result property="indtKindVl" column="INDT_KIND_VL"/>
		<result property="mdfeItdvCd" column="MDFE_ITDV_CD"/>
		<result property="insrEdiCd" column="INSR_EDI_CD"/>
		<result property="blodAbrvNm" column="BLOD_ABRV_NM"/>
		<result property="afiAditMcdpDvsnNm" column="AFI_ADIT_MCDP_DVSN_NM"/>
		<result property="fltrUseYn" column="FLTR_USE_YN"/>
		<result property="irdnPsblYn" column="IRDN_PSBL_YN"/>
		<result property="prepOrdrYn" column="PREP_ORDR_YN"/>
		<result property="erPsblYn" column="ER_PSBL_YN"/>
		<result property="ulerPsblYn" column="ULER_PSBL_YN"/>
		<result property="blodDvsnCd" column="BLOD_DVSN_CD"/>
		<result property="erMcteAddvCd" column="ER_MCTE_ADDV_CD"/>
		<result property="erMcteAditYn" column="ER_MCTE_ADIT_YN"/>
		<result property="scndOrdrYn" column="SCND_ORDR_YN"/>
		<result property="insrAcknBaseCeckYn" column="INSR_ACKN_BASE_CECK_YN"/>
		<result property="ordrBsisIpdvCd" column="ORDR_BSIS_IPDV_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBlodCdInqr () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBlodCdInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBlodCdInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBlodCdInqr-result" useCache="true" flushCache="false">
		<![CDATA[
		   select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBlodCdInqr */
				  'I'  as SAVE_DVSN_CD
				,  a.ORDR_CD as ORDR_CD                      /*  처방코드                          */ 
				,  a.ORDR_NM as ORDR_NM                      /*  처방명                            */
				,  a.ORCL_CD as ORCL_CD                      /*  처방분류코드                      */
				,  a.ORDR_CLTY_CD as ORDR_CLTY_CD                 /*  처방분류유형코드                  */
				,  a.SLIP_CD as SLIP_CD                      /*  SLIP코드                         */
				,  a.ORDR_PSBL_DVSN_CD as ORDR_PSBL_DVSN_CD            /*  처방가능구분코드                  */
				,  a.BLOD_MDTE_DVSN_CD as BLOD_MDTE_DVSN_CD            /*  혈액치료구분코드                  */
				,  a.INDT_KIND_VL as INDT_KIND_VL                 /*  적응증종류값 */
				,  b.MDFE_ITDV_CD as MDFE_ITDV_CD                 /*  수가입력구분(AI046):처치,재료필수입력구분 */
				,  b.INSR_EDI_CD  as INSR_EDI_CD				  /* 보험EDI코드 */
				,  c.BLOD_ABRV_NM as BLOD_ABRV_NM                 /*  혈액약어명 */
				,  (select  listagg ( COMN_ITEM_CHRC_VL,'I') within group(order by rownum)
					  from  CCCMCDIDT
					 where  COMN_GRP_CD = 'AI206'
					   and  COMN_DTLS_CD = b.MCDP_ADDV_CD ) as AFI_ADIT_MCDP_DVSN_NM /*  가산진료과구분명 */
				,  c.FLTR_USE_YN as FLTR_USE_YN                                    /*  필터사용여부                     */
				,  c.IRDN_PSBL_YN as IRDN_PSBL_YN                                   /*  방사선조사기능여부               */
				,  c.PREP_ORDR_YN as PREP_ORDR_YN                                   /*  pre처방여부                   */
				,  c.ER_PSBL_YN as ER_PSBL_YN                                     /*  응급가능여부                     */
				,  c.ULER_PSBL_YN as ULER_PSBL_YN                                   /*  초응급가능여부                   */
				,  c.BLOD_DVSN_CD as BLOD_DVSN_CD                                   /*  혈액구분코드                     */
		        ,  b.ER_MCTE_ADDV_CD as ER_MCTE_ADDV_CD
		        ,  FN_AC_CECK_ER_MCTE_ADDV_YN(#{ordrCd}, to_date(#{ordrYmd}, 'yyyymmdd'), #{codvCd}) as ER_MCTE_ADIT_YN
		        ,  a.SCND_ORDR_YN as SCND_ORDR_YN
		        ,  a.INSR_ACKN_BASE_CECK_YN as INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
		        ,  b.ORDR_BSIS_IPDV_CD as ORDR_BSIS_IPDV_CD	/* 처방기본급여구분코드 */
			 from
				   MDORDRCMT a      /*  처방코드기본 */
				,  AIMFMDFET b      /*  수가코드 */
				,  SLBORDRCT c      /*  혈액제제처방코드마스터 */
			where
				   a.ORDR_CD = #{ordrCd}
			  and  a.ORDR_PSBL_DVSN_CD like #{ordrPsblDvsnCd} || '%'
			  and  a.ORDR_CD = b.MDFE_CD
			  and  b.ORDR_PSBL_YN like #{ordrPsblDvsnCd} || '%'
			  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between b.APST_YMD and b.APFN_YMD
			  and  a.ORDR_CD = c.ORDR_CD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBsisOrdrCdInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="bsisOrdrVrsnVl" column="BSIS_ORDR_VRSN_VL"/>
		<result property="bsisOrdrIdctEndYn" column="BSIS_ORDR_IDCT_END_YN"/>
		<result property="bsisOrdrAplyPlacCd" column="BSIS_ORDR_APLY_PLAC_CD"/>
		<result property="ordrAgdcNeedYn" column="ORDR_AGDC_NEED_YN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBsisOrdrCdInqr () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBsisOrdrCdInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBsisOrdrCdInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBsisOrdrCdInqr-result" useCache="true" flushCache="false">
		<![CDATA[
		   select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrBsisOrdrCdInqr */
				  'I'  as SAVE_DVSN_CD
				,  a.ORDR_CD as ORDR_CD                      /*  처방코드                          */
				,  a.ORDR_NM as ORDR_NM                      /*  처방명                            */
				,  a.ORCL_CD as ORCL_CD                      /*  처방분류코드                      */
				,  a.ORDR_CLTY_CD as ORDR_CLTY_CD                 /*  처방분류유형코드                  */
				,  a.SLIP_CD as SLIP_CD                      /*  SLIP코드                         */
				,  a.ORDR_PSBL_DVSN_CD as ORDR_PSBL_DVSN_CD            /*  처방가능구분코드                  */
				,  a.BSIS_ORDR_VRSN_VL as BSIS_ORDR_VRSN_VL            /*  기본처방버전값                    */
				,  a.BSIS_ORDR_COMN_CD_YN as BSIS_ORDR_IDCT_END_YN         /*  기본처방지시완결여부              */
				,  a.BSIS_ORDR_APLY_PLAC_CD as BSIS_ORDR_APLY_PLAC_CD       /*  기본처방적용장소코드              */
				,  a.ORDR_AGDC_NEED_YN as ORDR_AGDC_NEED_YN            /*  처방동의서필요여부                */
		   from  MDORDRCMT a
		  where  a.ORDR_CD = #{ordrCd}
			and  a.ORDR_PSBL_DVSN_CD like #{ordrPsblDvsnCd} || '%'
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrEtcCdInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="insrIpdvCd" column="INSR_IPDV_CD"/>
		<result property="prtcIpdvCd" column="PRTC_IPDV_CD"/>
		<result property="incsIpdvCd" column="INCS_IPDV_CD"/>
		<result property="tainIpdvCd" column="TAIN_IPDV_CD"/>
		<result property="mdfeItdvCd" column="MDFE_ITDV_CD"/>
		<result property="afiAditMcdpDvsnNm" column="AFI_ADIT_MCDP_DVSN_NM"/>
		<result property="dxObjcUltsYn" column="DX_OBJC_ULTS_YN"/>
		<result property="ultsClsfCd" column="ULTS_CLSF_CD"/>
		<result property="pacsInrfYn" column="PACS_INRF_YN"/>
		<result property="pacsCd" column="PACS_CD"/>
		<result property="ordrInfmDvsnCd" column="ORDR_INFM_DVSN_CD"/>
		<result property="donePsblYn" column="DONE_PSBL_YN"/>
		<result property="ultsClsfCd" column="ULTS_CLSF_CD"/>
		<result property="obdpUltsInpyAcknNtm" column="OBDP_ULTS_INPY_ACKN_NTM"/>
		<result property="obdpUltsApstDdcn" column="OBDP_ULTS_APST_DDCN"/>
		<result property="obdpUltsApfnDdcn" column="OBDP_ULTS_APFN_DDCN"/>
		<result property="hgrsPtrtAditRt" column="HGRS_PTRT_ADIT_RT"/>
		<result property="ogdpMnhtAditRt" column="OGDP_MNHT_ADIT_RT"/>
		<result property="insrEdiCd" column="INSR_EDI_CD"/>
		<result property="cisInrfYn" column="CIS_INRF_YN"/>
		<result property="erMcteAddvCd" column="ER_MCTE_ADDV_CD"/>
		<result property="erMcteAditYn" column="ER_MCTE_ADIT_YN"/>
		<result property="fdnoClclOrdrYn" column="FDNO_CLCL_ORDR_YN"/>
		<result property="oprtMdfeCdYn" column="OPRT_MDFE_CD_YN"/>
		<result property="oprtInfmItdvCd" column="OPRT_INFM_ITDV_CD"/>
		<result property="insrAcknBaseCeckYn" column="INSR_ACKN_BASE_CECK_YN"/>
		<result property="excfCd" column="EXCF_CD"/>
		<result property="ordrBsisIpdvCd" column="ORDR_BSIS_IPDV_CD"/>
		<result property="nghtAditRt" column="NGHT_ADIT_RT"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrEtcCdInqr () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrEtcCdInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrEtcCdInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrEtcCdInqr-result" useCache="true" flushCache="false">
		<![CDATA[
		   select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrEtcCdInqr */
				  'I'  as SAVE_DVSN_CD
				,  a.ORDR_CD as ORDR_CD                        /*  처방코드 */
				,  a.ORDR_NM as ORDR_NM                       /*  처방명 */
				,  a.ORCL_CD as ORCL_CD                         /*  처방분류코드 */
				,  a.ORDR_CLTY_CD as ORDR_CLTY_CD        /*  처방분류유형코드 */
				,  a.SLIP_CD as SLIP_CD                             /*  SLIP코드 */
				,  a.ORDR_PSBL_DVSN_CD as ORDR_PSBL_DVSN_CD /*  처방가능구분코드 */
				,  b.INSR_IPDV_CD as INSR_IPDV_CD           /*  보험급여구분(AI041) */
				,  b.PRTC_IPDV_CD as PRTC_IPDV_CD          /*  보호급여구분(AI041) */
				,  b.INCS_IPDV_CD as INCS_IPDV_CD           /*  산재급여구분(AI041) */
				,  b.TAIN_IPDV_CD as TAIN_IPDV_CD           /*  자보급여구분(AI041) */
				,  b.MDFE_ITDV_CD as MDFE_ITDV_CD         /*  수가입력구분(AI046):처치,재료필수입력구분 */
				,  ( select  listagg ( COMN_ITEM_CHRC_VL,'I') within group(order by rownum)
					   from  CCCMCDIDT
					  where  COMN_GRP_CD = 'AI206'
					   and   COMN_DTLS_CD = b.MCDP_ADDV_CD ) as AFI_ADIT_MCDP_DVSN_NM /*  가산진료과구분명 */
				,  decode(b.DX_OBJC_ULTS_YN||b.INSR_IPDV_CD||b.INSR_BTTY_CD,'Y1S','Y','N') as DX_OBJC_ULTS_YN  /*  진단초음파여부 */
		        ,  b.ULTS_CLSF_CD  as ULTS_CLSF_CD                           /* 상복부초음파 구분 */
				,  a.PACS_INRF_YN as PACS_INRF_YN            /*  PACS인터페이스여부 */
				,  a.PACS_CD as PACS_CD                          /*  PACS코드 */
				,  a.ORDR_INFM_DVSN_CD as ORDR_INFM_DVSN_CD /*  처방정보구분코드 */
				,  a.DONE_PSBL_YN as DONE_PSBL_YN         /*  DONE 가능여부 */
				,  b.ULTS_CLSF_CD as ULTS_CLSF_CD           /* 초음파 분류코드: 01 산과초음파 */
				,  b.OBDP_ULTS_INPY_ACKN_NTM as OBDP_ULTS_INPY_ACKN_NTM /* 산과초음파급여인정횟수 */
				,  b.OBDP_ULTS_APST_DDCN as OBDP_ULTS_APST_DDCN   /* 산과초음파적용시작일수 */
				,  b.OBDP_ULTS_APFN_DDCN as OBDP_ULTS_APFN_DDCN  /* 산과포음파적용종료일수 */
				,  nvl(b.HGRS_PTRT_ADIT_RT , 0)  as HGRS_PTRT_ADIT_RT     /* 고위험분만가산율 */
				,  nvl(b.OGDP_MNHT_ADIT_RT , 0) as OGDP_MNHT_ADIT_RT /* 산부인과심야가산율 */
				,  b.INSR_EDI_CD as INSR_EDI_CD						/* 보험EDI코드 */
				,  a.CIS_INRF_YN as CIS_INRF_YN /* CIS INTERFACE 여부 */
		        ,  b.ER_MCTE_ADDV_CD
		        ,  FN_AC_CECK_ER_MCTE_ADDV_YN(#{ordrCd}, to_date(#{ordrYmd}, 'yyyymmdd'), #{codvCd}) as ER_MCTE_ADIT_YN
		        ,  b.FDNO_CLCL_ORDR_YN as FDNO_CLCL_ORDR_YN	/* 정수계산처방여부 */
		        ,  b.OPRT_MDFE_CD_YN   as OPRT_MDFE_CD_YN   /* 수술수가코드여부 */
		        ,  b.OPRT_INFM_ITDV_CD as OPRT_INFM_ITDV_CD /* 수술정보입력구분코드 */
		        ,  a.INSR_ACKN_BASE_CECK_YN as INSR_ACKN_BASE_CECK_YN /* 보험인정기준체크여부 */
		        ,  a.EXCF_CD as EXCF_CD /* 검사분류코드, 재활처방에서 사용하기 위해서 추가 2020.08.17 obh */
		        ,  b.ORDR_BSIS_IPDV_CD as ORDR_BSIS_IPDV_CD	/* 처방기본급여구분코드 */
		        ,  b.NGHT_ADIT_RT      as NGHT_ADIT_RT      /* 야간가산율  */
			 from
				   MDORDRCMT a
				,  AIMFMDFET b
			where
				   a.ORDR_CD = #{ordrCd}
			  and  a.ORDR_PSBL_DVSN_CD like #{ordrPsblDvsnCd} || '%'
			  and  a.ORDR_CD = b.MDFE_CD
			  and  b.ORDR_PSBL_YN like #{ordrPsblDvsnCd} || '%'
			  and  to_date ( #{ordrYmd} , 'YYYYMMDD' ) between b.APST_YMD and b.APFN_YMD
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrCltyInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrCltyInqr () 
        Description :                       
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrCltyInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrCltyInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrCltyInqr-result" useCache="true" flushCache="false">
		<![CDATA[
		   select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrCltyInqr */
				   ORDR_CLTY_CD as ORDR_CLTY_CD
			 from  MDORDRCMT
			where  ORDR_CD = #{ordrCd}
		   union
		  select
			        'Q1'
		    from  SUDIECDCT
		  where  APFN_YMD = to_date('29991231', 'yyyymmdd')
		     and   DIET_CD = #{ordrCd}
			]]>
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listExmnCdStndRang-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="spcmCd" column="SPCM_CD"/>
		<result property="baseUplmVl" column="BASE_UPLM_VL"/>
		<result property="baseLwlmVl" column="BASE_LWLM_VL"/>
		<result property="gendCd" column="GEND_CD"/>
		<result property="apstCyclVl" column="APST_CYCL_VL"/>
		<result property="apfnCyclVl" column="APFN_CYCL_VL"/>
		<result property="apstCyclCd" column="APST_CYCL_CD"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listExmnCdStndRang (검사코드 표준범위 조회) 
        Description :                                           검사코드 표준범위 조회
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listExmnCdStndRang-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listExmnCdStndRang"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listExmnCdStndRang-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listExmnCdStndRang */
		select  /*+ MdpOrdrMstrDetlInfmDAO-listExmnCdStndRang_검사코드 표준범위 조회 */ 
				SPCM_CD                     /* 검체코드             */
			 ,  BASE_UPLM_VL                /* 기준치상             */
			 ,  BASE_LWLM_VL                /* 기준치하             */
			 ,  GEND_CD                     /* 성별                 */
			 ,  APST_CYCL_VL                /* 적용시작             */
			 ,  APFN_CYCL_VL                /* 적용종료             */
			 ,  APST_CYCL_CD                /* 적용시작단위         */
		  from  SFCREFECT                 /* Normal Range, Critical Range, Reportable Range관리 */
		 where  EXMN_CD     =   #{exmnCd}   /* 검사코드             */
		   and  BADV_CD     =   'N'         /* 기준타입             */
		   and  SPCM_CD in ('*', #{spcmCd1}, #{spcmCd2})            /* 검체코드             */
		   and  APST_YMD    <![CDATA[ <= ]]>    sysdate             /* 적용개시일자         */
		   and  APFN_YMD    <![CDATA[ >= ]]>    trunc(sysdate)      /* 적용종료일자         */
		 order
			by  SPCM_CD
			 ,  GEND_CD
			 ,  APST_CYCL_VL
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrExmnCd-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="allEmitNm" column="ALL_EMIT_NM"/>
		<result property="spcmCd1" column="SPCM_CD_1"/>
		<result property="spcmNm1" column="SPCM_NM_1"/>
		<result property="spcnCd1" column="SPCN_CD_1"/>
		<result property="spcnNm1" column="SPCN_NM_1"/>
		<result property="spcmNeedQty1" column="SPCM_NEED_QTY_1"/>
		<result property="spcmCd2" column="SPCM_CD_2"/>
		<result property="spcmNm2" column="SPCM_NM_2"/>
		<result property="spcnCd2" column="SPCN_CD_2"/>
		<result property="spcnNm2" column="SPCN_NM_2"/>
		<result property="spcmNeedQty2" column="SPCM_NEED_QTY_2"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="setExmnYn" column="SET_EXMN_YN"/>
		<result property="exrsUnitNm" column="EXRS_UNIT_NM"/>
		<result property="sunExmnYn" column="SUN_EXMN_YN"/>
		<result property="monExmnYn" column="MON_EXMN_YN"/>
		<result property="tueExmnYn" column="TUE_EXMN_YN"/>
		<result property="wedExmnYn" column="WED_EXMN_YN"/>
		<result property="thuExmnYn" column="THU_EXMN_YN"/>
		<result property="friExmnYn" column="FRI_EXMN_YN"/>
		<result property="satExmnYn" column="SAT_EXMN_YN"/>
		<result property="rprtPerdRqrdHhCtn" column="RPRT_PERD_RQRD_HH_CTN"/>
		<result property="exmnCyclCtn" column="EXMN_CYCL_CTN"/>
		<result property="acmpYn" column="ACMP_YN"/>
		<result property="apntNeedEn" column="APNT_NEED_EN"/>
		<result property="sngnSpcmYn" column="SNGN_SPCM_YN"/>
		<result property="bctmBlclYn" column="BCTM_BLCL_YN"/>
		<result property="mdcrBeexYn" column="MDCR_BEEX_YN"/>
		<result property="erExmnPsblYn" column="ER_EXMN_PSBL_YN"/>
		<result property="exmnSpsbCtn" column="EXMN_SPSB_CTN"/>
		<result property="exrmNm" column="EXRM_NM"/>
		<result property="iqryExrmCtn" column="IQRY_EXRM_CTN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrExmnCd (처방마스터 검사코드 정보조회) 
        Description :                                           처방마스터 검사코드 정보조회
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrExmnCd-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrExmnCd"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrExmnCd-result" useCache="true" flushCache="false">
		/*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrExmnCd */
		select  /* 검사코드정보조회_처방코드 상세조회_MdpOrdrMstrDetlInfmDAO-selectOneOrdrMstrExmnCd */
		        a.ORDR_CD                                                   as ORDR_CD                  /*  처방코드             */
		     ,  a.ALL_EMIT_NM                                               as ALL_EMIT_NM              /*  검사항목명(전체)     */
		     ,  a.SPCM_CD1                                                  as SPCM_CD_1                /*  검체코드1            */
		     ,  (select SPCM_NM from SFCSPCMCT where SPCM_CD = a.SPCM_CD1)  as SPCM_NM_1                /*  검체명               */
		     ,  a.SPCN_CD1                                                  as SPCN_CD_1                /*  검체용기코드1        */
		     ,  (select SPCN_NM from SFCTUBECT where SPCN_CD = a.SPCN_CD1)  as SPCN_NM_1                /*  검체용기명           */
		     ,  a.SPCM_NEED_QTY1                                            as SPCM_NEED_QTY_1          /*  검체필요량1          */
		     ,  a.SPCM_CD2                                                  as SPCM_CD_2                /*  검체코드2            */
		     ,  (select SPCM_NM from SFCSPCMCT where SPCM_CD = a.SPCM_CD2)  as SPCM_NM_2                /*  검체명               */
		     ,  a.SPCN_CD2                                                  as SPCN_CD_2                /*  검체용기코드2        */
		     ,  (select SPCN_NM from SFCTUBECT where SPCN_CD = a.SPCN_CD2)  as SPCN_NM_2                /*  검체용기명           */
		     ,  a.SPCM_NEED_QTY2                                            as SPCM_NEED_QTY_2          /*  검체필요량2          */
		     ,  a.ORDR_PSBL_DVSN_CD                                         as ORDR_PSBL_DVSN_CD        /*  처방가능여부         */
		     ,  a.SET_EXMN_YN                                               as SET_EXMN_YN              /*  SET검사여부          */
		     ,  a.EXRS_UNIT_NM                                              as EXRS_UNIT_NM             /*  검사결과단위         */
		     ,  a.SUN_EXMN_YN                                               as SUN_EXMN_YN              /*  일요일검사여부       */
		     ,  a.MON_EXMN_YN                                               as MON_EXMN_YN              /*  월요일검사여부       */
		     ,  a.TUE_EXMN_YN                                               as TUE_EXMN_YN              /*  화요일검사여부       */
		     ,  a.WED_EXMN_YN                                               as WED_EXMN_YN              /*  수요일검사여부       */
		     ,  a.THU_EXMN_YN                                               as THU_EXMN_YN              /*  목요일검사여부       */
		     ,  a.FRI_EXMN_YN                                               as FRI_EXMN_YN              /*  금요일검사여부       */
		     ,  a.SAT_EXMN_YN                                               as SAT_EXMN_YN              /*  토요일검사여부       */
		     ,  a.RPRT_PERD_RQRD_HH_CTN                                     as RPRT_PERD_RQRD_HH_CTN    /*  보고기간             */
		     ,  a.EXMN_CYCL_CTN                                             as EXMN_CYCL_CTN            /*  검사주기             */
		     ,  a.ACMP_YN                                                   as ACMP_YN                  /*  동반여부             */
		     ,  a.APNT_NEED_EN                                              as APNT_NEED_EN             /*  예약 필요 유무 (Y/N) */
		     ,  a.SNGN_SPCM_YN                                              as SNGN_SPCM_YN             /*  단독검체여부         */
		     ,  a.BCTM_BLCL_YN                                              as BCTM_BLCL_YN             /*  채혈팀채혈여부       */
		     ,  a.MDCR_BEEX_YN                                              as MDCR_BEEX_YN             /*  진료전 검사여부      */
		     ,  a.ER_EXMN_PSBL_YN                                           as ER_EXMN_PSBL_YN          /*  응급검사 가능여부    */
		     ,  a.EXMN_SPSB_CTN                                             as EXMN_SPSB_CTN            /*  검사특기사항         */
		     ,  f.EXRM_NM                                                   as EXRM_NM                  /*  검사실명             */
		     ,  case
		            when a.EXCF_CD = 'SL' then a.IQRY_EXRM_CTN
		            else f.TLNO
		            end                                                     as IQRY_EXRM_CTN            /*  문의검사실내용 / 전화번호 */
		  from  MDORDRCMT a         /*  처방코드기본 */
		     ,  SZROOMCMT f         /*  검사실       */
		 where  a.ORDR_CD       =   #{ordrCd}
		   and  f.EXCF_CD   (+) =   a.EXCF_CD
		   and  f.EXRM_CD   (+) =   case
		                                when a.EXCF_CD = 'SR' and length(a.OTPT_EXRM_CD) =  1 then a.OTPT_EXRM_CD||'01'
		                                when a.EXCF_CD = 'SR' and length(a.OTPT_EXRM_CD) &gt;  1 then a.OTPT_EXRM_CD
		                                else a.OTPT_EXRM_CD
		                                end
	</select>




	<resultMap id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDietOrdrCdInqr-result" type="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO">
	
		<result property="saveDvsnCd" column="SAVE_DVSN_CD"/>
		<result property="ordrCd" column="ORDR_CD"/>
		<result property="ordrNm" column="ORDR_NM"/>
		<result property="orclCd" column="ORCL_CD"/>
		<result property="ordrCltyCd" column="ORDR_CLTY_CD"/>
		<result property="slipCd" column="SLIP_CD"/>
		<result property="ordrPsblDvsnCd" column="ORDR_PSBL_DVSN_CD"/>
		<result property="bsisOrdrVrsnVl" column="BSIS_ORDR_VRSN_VL"/>
		<result property="bsisOrdrIdctEndYn" column="BSIS_ORDR_IDCT_END_YN"/>
		<result property="bsisOrdrAplyPlacCd" column="BSIS_ORDR_APLY_PLAC_CD"/>
		<result property="ordrAgdcNeedYn" column="ORDR_AGDC_NEED_YN"/>
	</resultMap>
	
    <!--
        SQL Name : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDietOrdrCdInqr (식이처방코드 조회) 
        Description :                                           식이처방코드 조회.
                                            
		parameterType : com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO
		resultMap : com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDietOrdrCdInqr-result
    -->
	<select id="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDietOrdrCdInqr"  parameterType="com.sds.healthcare.ehr.med.md.mdp.vo.MdpOrdrMstrDetlInfmDVO"  resultMap="com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDietOrdrCdInqr-result" useCache="true" flushCache="false">
		   select  /*SQL_ID: com-sds-healthcare-ehr-med-md-mdp-dao-MdpOrdrMstrDetlInfmDAO-listOrdrMstrDietOrdrCdInqr */
				  'I'  as SAVE_DVSN_CD
				,  a.DIET_CD as ORDR_CD                      /*  처방코드                          */
				,  a.DIET_NM as ORDR_NM                      /*  처방명                            */
				,  'COD' as ORCL_CD                      /*  처방분류코드                      */
				,  'A1'  as ORDR_CLTY_CD                 /*  처방분류유형코드                  */
				,  'DT'  as SLIP_CD                      /*  SLIP코드                         */
				,  'Y'   as ORDR_PSBL_DVSN_CD            /*  처방가능구분코드                  */
				,  ''    as BSIS_ORDR_VRSN_VL            /*  기본처방버전값                    */
				,  ''    as BSIS_ORDR_IDCT_END_YN         /*  기본처방지시완결여부              */
				,  ''    as BSIS_ORDR_APLY_PLAC_CD       /*  기본처방적용장소코드              */
				,  ''    as ORDR_AGDC_NEED_YN            /*  처방동의서필요여부                */
		   from  SUDIECDCT a 
		  where  a.DIET_CD = #{ordrCd}
			and  a.APFN_YMD = to_date('29991231', 'yyyymmdd')
	</select>



</mapper>